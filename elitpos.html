<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ElitePOS Version 71 - Ultimate Enterprise Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --bg-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --bg-secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --text-primary: #2d3748;
            --text-secondary: #4a5568;
            --glass-bg: rgba(255, 255, 255, 0.25);
            --glass-border: rgba(255, 255, 255, 0.18);
        }

        body {
            background: var(--bg-primary);
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            min-height: 100vh;
        }

        .glass-effect {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
        }

        .login-container {
            background: var(--bg-primary);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .input-elegant {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }

        .input-elegant:focus {
            background: rgba(255, 255, 255, 1);
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            outline: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .btn-success {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            transition: all 0.3s ease;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(72, 187, 120, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%);
            transition: all 0.3s ease;
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(245, 101, 101, 0.3);
        }

        .sidebar-transition {
            transition: transform 0.3s ease-in-out;
        }

        .sidebar-hidden {
            transform: translateX(-100%);
        }

        .nav-btn {
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            transform: translateX(8px);
        }

        .nav-btn-active {
            background: rgba(255, 255, 255, 0.2);
            border-left: 4px solid #667eea;
        }

        .floating-animation {
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        .pulse-animation {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .modal-overlay {
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .role-badge {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .role-admin {
            background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%);
            color: white;
        }

        .role-manager {
            background: linear-gradient(135deg, #ed8936 0%, #dd6b20 100%);
            color: white;
        }

        .role-cashier {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
        }

        .permission-card {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .permission-card:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        .login-form-modern {
            position: relative;
            overflow: hidden;
        }

        .login-form-modern::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            transform: rotate(45deg);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .biometric-scanner {
            width: 120px;
            height: 120px;
            border: 3px solid #667eea;
            border-radius: 50%;
            position: relative;
            margin: 0 auto 2rem;
            animation: scan 2s infinite;
        }

        @keyframes scan {
            0%, 100% { border-color: #667eea; box-shadow: 0 0 0 0 rgba(102, 126, 234, 0.4); }
            50% { border-color: #48bb78; box-shadow: 0 0 0 20px rgba(102, 126, 234, 0); }
        }

        .product-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        .cart-item {
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .receipt-print {
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.4;
        }

        .chart-container {
            position: relative;
            height: 300px;
        }

        .progress-bar {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            height: 8px;
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .notification-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #f56565;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .dark-mode {
            --bg-primary: linear-gradient(135deg, #1a202c 0%, #2d3748 100%);
            --text-primary: #f7fafc;
            --text-secondary: #e2e8f0;
            --glass-bg: rgba(0, 0, 0, 0.25);
        }

        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 1rem;
            padding: 2rem;
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-5px);
        }

        .version-badge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            font-weight: bold;
            font-size: 0.875rem;
            display: inline-block;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-container">
        <div class="glass-effect rounded-3xl shadow-2xl p-8 w-full max-w-md login-form-modern">
            <div class="text-center mb-8">
                <div class="biometric-scanner flex items-center justify-center">
                    <span class="text-4xl">üíé</span>
                </div>
                <h1 class="text-3xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent">ElitePOS</h1>
                <div class="version-badge">Version 71 - Ultimate Enterprise Edition</div>
                <p class="text-xs opacity-60 mt-2">üîê Advanced Security & Complete Business Solution</p>
            </div>
            
            <form id="loginForm" class="space-y-6">
                <div>
                    <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">üë§ Username</label>
                    <input type="text" id="loginUsername" required class="input-elegant w-full px-4 py-3 rounded-2xl" placeholder="Masukkan username" autocomplete="username">
                </div>
                <div>
                    <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">üîë Password</label>
                    <div class="relative">
                        <input type="password" id="loginPassword" required class="input-elegant w-full px-4 py-3 pr-12 rounded-2xl" placeholder="Masukkan password" autocomplete="current-password">
                        <button type="button" onclick="togglePassword()" class="absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700">
                            <span id="passwordToggleIcon">üëÅÔ∏è</span>
                        </button>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">üé≠ Role</label>
                    <select id="loginRole" required class="input-elegant w-full px-4 py-3 rounded-2xl">
                        <option value="">Pilih Role</option>
                        <option value="admin">üî¥ Admin - Full Access</option>
                        <option value="manager">üü† Manager - Management Access</option>
                        <option value="cashier">üü¢ Kasir - Transaction Access</option>
                    </select>
                </div>
                
                <div class="flex items-center justify-between text-sm">
                    <label class="flex items-center space-x-2">
                        <input type="checkbox" id="rememberMe" class="rounded">
                        <span style="color: var(--text-primary)">Ingat saya</span>
                    </label>
                    <button type="button" onclick="showForgotPassword()" class="text-purple-600 hover:text-purple-800 font-medium">
                        Lupa password?
                    </button>
                </div>
                
                <button type="submit" class="btn-primary w-full text-white font-bold py-4 px-6 rounded-2xl">
                    üîê Login ke Sistem
                </button>
                
                <div class="mt-6 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl border border-blue-200">
                    <p class="text-xs text-gray-600 mb-3 text-center font-semibold">üîê Akun Demo Tersedia:</p>
                    <div class="space-y-2 text-xs">
                        <div class="flex justify-between items-center p-2 bg-red-50 rounded-lg">
                            <div>
                                <span class="font-semibold text-red-800">Admin:</span>
                                <span class="text-red-600">admin / admin123</span>
                            </div>
                            <span class="px-2 py-1 bg-red-100 text-red-800 rounded text-xs">Full Access</span>
                        </div>
                        <div class="flex justify-between items-center p-2 bg-orange-50 rounded-lg">
                            <div>
                                <span class="font-semibold text-orange-800">Manager:</span>
                                <span class="text-orange-600">manager / manager123</span>
                            </div>
                            <span class="px-2 py-1 bg-orange-100 text-orange-800 rounded text-xs">Management</span>
                        </div>
                        <div class="flex justify-between items-center p-2 bg-green-50 rounded-lg">
                            <div>
                                <span class="font-semibold text-green-800">Kasir:</span>
                                <span class="text-green-600">kasir / kasir123</span>
                            </div>
                            <span class="px-2 py-1 bg-green-100 text-green-800 rounded text-xs">Transaction</span>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" class="hidden">
        <!-- Header -->
        <header class="glass-effect shadow-lg sticky top-0 z-40">
            <div class="flex items-center justify-between px-6 py-4">
                <div class="flex items-center space-x-4">
                    <button id="menuToggle" class="p-3 rounded-xl hover:bg-white/20 transition-all duration-300">
                        <svg class="w-6 h-6" style="color: var(--text-primary)" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                    <div class="flex items-center space-x-3">
                        <div class="w-12 h-12 bg-gradient-to-r from-purple-600 to-blue-600 rounded-xl flex items-center justify-center shadow-lg">
                            <span class="text-2xl">üíé</span>
                        </div>
                        <div>
                            <h1 class="text-2xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent">ElitePOS</h1>
                            <p class="text-sm opacity-75">Version 71 - Ultimate Enterprise</p>
                        </div>
                    </div>
                </div>
                <div class="flex items-center space-x-6">
                    <!-- Notifications -->
                    <div class="relative">
                        <button onclick="toggleNotifications()" class="p-3 rounded-xl hover:bg-white/20 transition-all duration-300 relative">
                            <svg class="w-6 h-6" style="color: var(--text-primary)" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5v-5zM11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"></path>
                            </svg>
                            <div class="notification-badge" id="notificationCount">3</div>
                        </button>
                        
                        <!-- Notification Dropdown -->
                        <div id="notificationDropdown" class="hidden absolute right-0 top-full mt-2 w-80 glass-effect rounded-2xl shadow-2xl z-50 max-h-96 overflow-y-auto">
                            <div class="p-4 border-b border-white/20">
                                <h3 class="font-bold text-lg" style="color: var(--text-primary)">üîî Notifikasi</h3>
                                <p class="text-sm text-gray-600">Anda memiliki 3 notifikasi baru</p>
                            </div>
                            <div class="p-2">
                                <div class="notification-item p-3 hover:bg-white/10 rounded-xl transition-colors cursor-pointer">
                                    <div class="flex items-start space-x-3">
                                        <div class="w-10 h-10 bg-red-100 rounded-xl flex items-center justify-center flex-shrink-0">
                                            <span class="text-xl">‚ö†Ô∏è</span>
                                        </div>
                                        <div class="flex-1">
                                            <h4 class="font-semibold text-sm" style="color: var(--text-primary)">Stok Rendah</h4>
                                            <p class="text-xs text-gray-600">AirPods Pro tersisa 5 unit. Segera lakukan restock.</p>
                                            <p class="text-xs text-gray-500 mt-1">2 menit yang lalu</p>
                                        </div>
                                        <div class="w-2 h-2 bg-red-500 rounded-full flex-shrink-0"></div>
                                    </div>
                                </div>
                                <div class="notification-item p-3 hover:bg-white/10 rounded-xl transition-colors cursor-pointer">
                                    <div class="flex items-start space-x-3">
                                        <div class="w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center flex-shrink-0">
                                            <span class="text-xl">üí∞</span>
                                        </div>
                                        <div class="flex-1">
                                            <h4 class="font-semibold text-sm" style="color: var(--text-primary)">Penjualan Tinggi</h4>
                                            <p class="text-xs text-gray-600">Target penjualan hari ini sudah tercapai 120%!</p>
                                            <p class="text-xs text-gray-500 mt-1">15 menit yang lalu</p>
                                        </div>
                                        <div class="w-2 h-2 bg-green-500 rounded-full flex-shrink-0"></div>
                                    </div>
                                </div>
                                <div class="notification-item p-3 hover:bg-white/10 rounded-xl transition-colors cursor-pointer">
                                    <div class="flex items-start space-x-3">
                                        <div class="w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center flex-shrink-0">
                                            <span class="text-xl">üë•</span>
                                        </div>
                                        <div class="flex-1">
                                            <h4 class="font-semibold text-sm" style="color: var(--text-primary)">Customer Baru</h4>
                                            <p class="text-xs text-gray-600">5 customer baru mendaftar hari ini.</p>
                                            <p class="text-xs text-gray-500 mt-1">1 jam yang lalu</p>
                                        </div>
                                        <div class="w-2 h-2 bg-blue-500 rounded-full flex-shrink-0"></div>
                                    </div>
                                </div>
                                <div class="notification-item p-3 hover:bg-white/10 rounded-xl transition-colors cursor-pointer">
                                    <div class="flex items-start space-x-3">
                                        <div class="w-10 h-10 bg-orange-100 rounded-xl flex items-center justify-center flex-shrink-0">
                                            <span class="text-xl">üìã</span>
                                        </div>
                                        <div class="flex-1">
                                            <h4 class="font-semibold text-sm" style="color: var(--text-primary)">Purchase Order</h4>
                                            <p class="text-xs text-gray-600">PO #12345 menunggu approval Anda.</p>
                                            <p class="text-xs text-gray-500 mt-1">3 jam yang lalu</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="notification-item p-3 hover:bg-white/10 rounded-xl transition-colors cursor-pointer">
                                    <div class="flex items-start space-x-3">
                                        <div class="w-10 h-10 bg-purple-100 rounded-xl flex items-center justify-center flex-shrink-0">
                                            <span class="text-xl">üéÅ</span>
                                        </div>
                                        <div class="flex-1">
                                            <h4 class="font-semibold text-sm" style="color: var(--text-primary)">Loyalty Program</h4>
                                            <p class="text-xs text-gray-600">10 member baru bergabung program VIP.</p>
                                            <p class="text-xs text-gray-500 mt-1">5 jam yang lalu</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="p-4 border-t border-white/20">
                                <div class="flex space-x-2">
                                    <button onclick="markAllAsRead()" class="flex-1 btn-primary text-white py-2 px-4 rounded-xl text-sm">
                                        ‚úÖ Tandai Semua Dibaca
                                    </button>
                                    <button onclick="clearAllNotifications()" class="flex-1 glass-effect py-2 px-4 rounded-xl text-sm hover:bg-white/30 transition-all">
                                        üóëÔ∏è Hapus Semua
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- User Info -->
                    <div class="hidden sm:flex items-center space-x-3 glass-effect px-4 py-2 rounded-xl">
                        <div class="w-8 h-8 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full flex items-center justify-center">
                            <span class="text-white text-sm">üë§</span>
                        </div>
                        <div>
                            <div class="text-sm font-medium" style="color: var(--text-primary)" id="currentUser">Admin</div>
                            <div class="text-xs px-2 py-1 bg-red-100 text-red-800 rounded-full font-semibold" id="currentRole">Admin</div>
                        </div>
                    </div>
                    
                    <!-- Time & Date -->
                    <div class="glass-effect px-4 py-2 rounded-xl">
                        <div class="text-sm font-medium" style="color: var(--text-primary)">
                            <div id="currentTime"></div>
                            <div id="currentDate" class="text-xs opacity-75"></div>
                        </div>
                    </div>

                    <!-- Dark Mode Toggle -->
                    <button onclick="toggleDarkMode()" class="p-3 rounded-xl hover:bg-white/20 transition-all duration-300">
                        <span id="darkModeIcon">üåô</span>
                    </button>
                </div>
            </div>
        </header>

        <div class="flex min-h-screen pt-20">
            <!-- Sidebar -->
            <aside id="sidebar" class="sidebar-transition glass-effect fixed z-30 w-72 shadow-2xl h-screen overflow-y-auto sidebar-hidden">
                <nav class="p-6 space-y-3 pb-20">
                    <div class="mb-8 menu-title">
                        <h3 class="text-lg font-semibold mb-4" style="color: var(--text-primary)">Menu Utama</h3>
                    </div>
                    
                    <!-- Dashboard -->
                    <button onclick="showSection('dashboard')" class="nav-btn w-full flex items-center space-x-4 px-6 py-4 text-left rounded-2xl hover:bg-white/50 transition-all duration-300 group">
                        <div class="w-12 h-12 bg-gradient-to-r from-purple-600 to-blue-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300 flex-shrink-0">
                            <span class="text-2xl">üìä</span>
                        </div>
                        <div class="nav-text">
                            <span class="font-semibold" style="color: var(--text-primary)">Dashboard</span>
                            <p class="text-sm nav-description" style="color: var(--text-secondary)">Overview bisnis</p>
                        </div>
                    </button>
                    
                    <!-- Kasir -->
                    <button onclick="showSection('kasir')" class="nav-btn nav-btn-active w-full flex items-center space-x-4 px-6 py-4 text-left rounded-2xl hover:bg-white/50 transition-all duration-300 group">
                        <div class="w-12 h-12 bg-gradient-to-r from-purple-600 to-blue-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300 flex-shrink-0">
                            <span class="text-2xl">üí∞</span>
                        </div>
                        <div class="nav-text">
                            <span class="font-semibold" style="color: var(--text-primary)">Kasir</span>
                            <p class="text-sm nav-description" style="color: var(--text-secondary)">Proses transaksi</p>
                        </div>
                    </button>
                    
                    <!-- Produk -->
                    <button onclick="showSection('produk')" class="nav-btn w-full flex items-center space-x-4 px-6 py-4 text-left rounded-2xl hover:bg-white/50 transition-all duration-300 group">
                        <div class="w-12 h-12 bg-gradient-to-r from-purple-600 to-blue-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300 flex-shrink-0">
                            <span class="text-2xl">üì¶</span>
                        </div>
                        <div class="nav-text">
                            <span class="font-semibold" style="color: var(--text-primary)">Kelola Produk</span>
                            <p class="text-sm nav-description" style="color: var(--text-secondary)">Manajemen inventory</p>
                        </div>
                    </button>
                    
                    <!-- Inventory -->
                    <button onclick="showSection('inventory')" class="nav-btn w-full flex items-center space-x-4 px-6 py-4 text-left rounded-2xl hover:bg-white/50 transition-all duration-300 group">
                        <div class="w-12 h-12 bg-gradient-to-r from-purple-600 to-blue-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300 flex-shrink-0">
                            <span class="text-2xl">üìã</span>
                        </div>
                        <div class="nav-text">
                            <span class="font-semibold" style="color: var(--text-primary)">Inventory</span>
                            <p class="text-sm nav-description" style="color: var(--text-secondary)">Stok & gudang</p>
                        </div>
                    </button>
                    
                    <!-- Laporan -->
                    <button onclick="showSection('laporan')" class="nav-btn w-full flex items-center space-x-4 px-6 py-4 text-left rounded-2xl hover:bg-white/50 transition-all duration-300 group">
                        <div class="w-12 h-12 bg-gradient-to-r from-purple-600 to-blue-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300 flex-shrink-0">
                            <span class="text-2xl">üìà</span>
                        </div>
                        <div class="nav-text">
                            <span class="font-semibold" style="color: var(--text-primary)">Laporan</span>
                            <p class="text-sm nav-description" style="color: var(--text-secondary)">Analisis penjualan</p>
                        </div>
                    </button>
                    
                    <!-- Customer -->
                    <button onclick="showSection('customer')" class="nav-btn w-full flex items-center space-x-4 px-6 py-4 text-left rounded-2xl hover:bg-white/50 transition-all duration-300 group">
                        <div class="w-12 h-12 bg-gradient-to-r from-purple-600 to-blue-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300 flex-shrink-0">
                            <span class="text-2xl">üë•</span>
                        </div>
                        <div class="nav-text">
                            <span class="font-semibold" style="color: var(--text-primary)">Customer</span>
                            <p class="text-sm nav-description" style="color: var(--text-secondary)">Data pelanggan</p>
                        </div>
                    </button>
                    
                    <!-- Supplier -->
                    <button onclick="showSection('supplier')" class="nav-btn w-full flex items-center space-x-4 px-6 py-4 text-left rounded-2xl hover:bg-white/50 transition-all duration-300 group">
                        <div class="w-12 h-12 bg-gradient-to-r from-purple-600 to-blue-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300 flex-shrink-0">
                            <span class="text-2xl">üè≠</span>
                        </div>
                        <div class="nav-text">
                            <span class="font-semibold" style="color: var(--text-primary)">Supplier</span>
                            <p class="text-sm nav-description" style="color: var(--text-secondary)">Manajemen pemasok</p>
                        </div>
                    </button>
                    
                    <!-- Akun User -->
                    <button onclick="showSection('akun')" class="nav-btn w-full flex items-center space-x-4 px-6 py-4 text-left rounded-2xl hover:bg-white/50 transition-all duration-300 group">
                        <div class="w-12 h-12 bg-gradient-to-r from-purple-600 to-blue-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300 flex-shrink-0">
                            <span class="text-2xl">üë§</span>
                        </div>
                        <div class="nav-text">
                            <span class="font-semibold" style="color: var(--text-primary)">Akun User</span>
                            <p class="text-sm nav-description" style="color: var(--text-secondary)">Kelola pengguna</p>
                        </div>
                    </button>
                    
                    <!-- Pengaturan -->
                    <button onclick="showSection('pengaturan')" class="nav-btn w-full flex items-center space-x-4 px-6 py-4 text-left rounded-2xl hover:bg-white/50 transition-all duration-300 group">
                        <div class="w-12 h-12 bg-gradient-to-r from-purple-600 to-blue-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300 flex-shrink-0">
                            <span class="text-2xl">‚öôÔ∏è</span>
                        </div>
                        <div class="nav-text">
                            <span class="font-semibold" style="color: var(--text-primary)">Pengaturan</span>
                            <p class="text-sm nav-description" style="color: var(--text-secondary)">Konfigurasi sistem</p>
                        </div>
                    </button>
                    
                    <!-- Logout Section -->
                    <div class="mt-8 pt-6 border-t border-gray-200">
                        <div class="mb-4">
                            <h4 class="text-sm font-semibold text-gray-600 uppercase tracking-wider mb-3">Sesi Login</h4>
                        </div>
                        
                        <div class="glass-effect p-4 rounded-2xl mb-4 border border-red-100">
                            <div class="flex items-center space-x-3 mb-3">
                                <div class="w-10 h-10 bg-gradient-to-r from-red-500 to-red-600 rounded-xl flex items-center justify-center">
                                    <span class="text-xl">üë§</span>
                                </div>
                                <div>
                                    <div class="text-sm font-semibold text-gray-800" id="sidebarCurrentUser">Admin</div>
                                    <div class="text-xs px-2 py-1 bg-red-100 text-red-800 rounded-full font-semibold inline-block" id="sidebarCurrentRole">Admin</div>
                                </div>
                            </div>
                            
                            <div class="text-xs text-gray-600 space-y-1">
                                <div><span class="font-medium">Login:</span> <span id="sidebarLoginTime">-</span></div>
                            </div>
                        </div>
                        
                        <button onclick="confirmLogout()" class="w-full flex items-center space-x-4 px-6 py-4 text-left rounded-2xl bg-gradient-to-r from-red-500 to-red-600 text-white hover:from-red-600 hover:to-red-700 transition-all duration-300 group shadow-lg hover:shadow-xl">
                            <div class="w-12 h-12 bg-white bg-opacity-20 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300 flex-shrink-0">
                                <span class="text-2xl">üö™</span>
                            </div>
                            <div class="nav-text">
                                <span class="font-semibold">Logout</span>
                                <p class="text-sm opacity-90">Keluar dari sistem</p>
                            </div>
                        </button>
                    </div>
                </nav>
            </aside>

            <!-- Overlay -->
            <div id="overlay" class="fixed inset-0 bg-black bg-opacity-50 z-20 hidden backdrop-blur-sm"></div>

            <!-- Main Content -->
            <main class="flex-1 p-6 ml-0 transition-all duration-300" id="mainContent">
                
                <!-- Dashboard Section -->
                <div id="dashboardSection" class="section hidden">
                    <div class="mb-8">
                        <h2 class="text-3xl font-bold mb-2" style="color: var(--text-primary)">üìä Dashboard</h2>
                        <p class="text-gray-600">Overview lengkap bisnis Anda</p>
                    </div>

                    <!-- Key Metrics -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="glass-effect p-6 rounded-2xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Penjualan Hari Ini</p>
                                    <p class="text-2xl font-bold text-green-600">Rp 2.450.000</p>
                                    <p class="text-xs text-green-500">+12% dari kemarin</p>
                                </div>
                                <div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center">
                                    <span class="text-2xl">üí∞</span>
                                </div>
                            </div>
                        </div>
                        <div class="glass-effect p-6 rounded-2xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Transaksi</p>
                                    <p class="text-2xl font-bold text-blue-600">156</p>
                                    <p class="text-xs text-blue-500">+8% dari kemarin</p>
                                </div>
                                <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center">
                                    <span class="text-2xl">üõí</span>
                                </div>
                            </div>
                        </div>
                        <div class="glass-effect p-6 rounded-2xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Produk Terjual</p>
                                    <p class="text-2xl font-bold text-purple-600">324</p>
                                    <p class="text-xs text-purple-500">+15% dari kemarin</p>
                                </div>
                                <div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center">
                                    <span class="text-2xl">üì¶</span>
                                </div>
                            </div>
                        </div>
                        <div class="glass-effect p-6 rounded-2xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Customer Baru</p>
                                    <p class="text-2xl font-bold text-orange-600">23</p>
                                    <p class="text-xs text-orange-500">+5% dari kemarin</p>
                                </div>
                                <div class="w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center">
                                    <span class="text-2xl">üë•</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Charts and Analytics -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                        <div class="glass-effect p-6 rounded-2xl">
                            <h3 class="text-xl font-bold mb-4" style="color: var(--text-primary)">Penjualan 7 Hari Terakhir</h3>
                            <div class="chart-container">
                                <canvas id="salesChart" width="400" height="200"></canvas>
                            </div>
                        </div>
                        <div class="glass-effect p-6 rounded-2xl">
                            <h3 class="text-xl font-bold mb-4" style="color: var(--text-primary)">Produk Terlaris</h3>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                                            <span>üì±</span>
                                        </div>
                                        <div>
                                            <p class="font-semibold">iPhone 15 Pro</p>
                                            <p class="text-sm text-gray-600">45 terjual</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-bold text-green-600">Rp 18.999.000</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
                                            <span>üíª</span>
                                        </div>
                                        <div>
                                            <p class="font-semibold">MacBook Air M3</p>
                                            <p class="text-sm text-gray-600">32 terjual</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-bold text-green-600">Rp 16.999.000</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center">
                                            <span>üéß</span>
                                        </div>
                                        <div>
                                            <p class="font-semibold">AirPods Pro</p>
                                            <p class="text-sm text-gray-600">78 terjual</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-bold text-green-600">Rp 3.999.000</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="glass-effect p-6 rounded-2xl">
                        <h3 class="text-xl font-bold mb-4" style="color: var(--text-primary)">Quick Actions</h3>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <button onclick="showSection('kasir')" class="p-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 transition-all">
                                <div class="text-2xl mb-2">üí∞</div>
                                <div class="text-sm font-semibold">Buka Kasir</div>
                            </button>
                            <button onclick="showSection('produk')" class="p-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all">
                                <div class="text-2xl mb-2">üì¶</div>
                                <div class="text-sm font-semibold">Tambah Produk</div>
                            </button>
                            <button onclick="showSection('laporan')" class="p-4 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-xl hover:from-purple-600 hover:to-purple-700 transition-all">
                                <div class="text-2xl mb-2">üìà</div>
                                <div class="text-sm font-semibold">Lihat Laporan</div>
                            </button>
                            <button onclick="showSection('customer')" class="p-4 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all">
                                <div class="text-2xl mb-2">üë•</div>
                                <div class="text-sm font-semibold">Kelola Customer</div>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Kasir Section -->
                <div id="kasirSection" class="section">
                    <div class="mb-8">
                        <h2 class="text-3xl font-bold mb-2" style="color: var(--text-primary)">üí∞ Sistem Kasir</h2>
                        <p class="text-gray-600">Proses transaksi penjualan dengan mudah dan cepat</p>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <!-- Product Selection -->
                        <div class="lg:col-span-2">
                            <div class="glass-effect p-6 rounded-2xl">
                                <div class="flex items-center justify-between mb-6">
                                    <h3 class="text-xl font-bold" style="color: var(--text-primary)">Pilih Produk</h3>
                                    <div class="flex items-center space-x-4">
                                        <input type="text" id="productSearch" placeholder="Cari produk..." class="input-elegant px-4 py-2 rounded-xl w-64">
                                        <select id="categoryFilter" class="input-elegant px-4 py-2 rounded-xl">
                                            <option value="">Semua Kategori</option>
                                            <option value="elektronik">Elektronik</option>
                                            <option value="fashion">Fashion</option>
                                            <option value="makanan">Makanan</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4" id="productGrid">
                                    <!-- Products will be populated here -->
                                </div>
                            </div>
                        </div>

                        <!-- Shopping Cart -->
                        <div class="lg:col-span-1">
                            <div class="glass-effect p-6 rounded-2xl sticky top-24">
                                <h3 class="text-xl font-bold mb-4" style="color: var(--text-primary)">Keranjang Belanja</h3>
                                
                                <div id="cartItems" class="space-y-3 mb-6 max-h-64 overflow-y-auto">
                                    <!-- Cart items will be populated here -->
                                </div>

                                <!-- Discount Section -->
                                <div class="border-t border-b py-4 mb-4">
                                    <h4 class="font-semibold mb-3" style="color: var(--text-primary)">üéØ Diskon & Promo</h4>
                                    <div class="space-y-3">
                                        <div class="flex space-x-2">
                                            <input type="text" id="discountCode" placeholder="Kode promo..." class="input-elegant flex-1 px-3 py-2 rounded-xl text-sm">
                                            <button onclick="applyDiscountCode()" class="btn-primary text-white px-4 py-2 rounded-xl text-sm">
                                                Terapkan
                                            </button>
                                        </div>
                                        <div class="grid grid-cols-2 gap-2">
                                            <button onclick="applyDiscount('percentage', 10)" class="glass-effect px-3 py-2 rounded-xl text-xs hover:bg-white/30 transition-all">
                                                üí∞ 10%
                                            </button>
                                            <button onclick="applyDiscount('percentage', 15)" class="glass-effect px-3 py-2 rounded-xl text-xs hover:bg-white/30 transition-all">
                                                üí∞ 15%
                                            </button>
                                            <button onclick="applyDiscount('percentage', 20)" class="glass-effect px-3 py-2 rounded-xl text-xs hover:bg-white/30 transition-all">
                                                üí∞ 20%
                                            </button>
                                            <button onclick="applyDiscount('fixed', 50000)" class="glass-effect px-3 py-2 rounded-xl text-xs hover:bg-white/30 transition-all">
                                                üí∏ 50K
                                            </button>
                                        </div>
                                        <div class="flex space-x-2">
                                            <select id="memberDiscount" onchange="applyMemberDiscount()" class="input-elegant flex-1 px-3 py-2 rounded-xl text-sm">
                                                <option value="">Pilih Member</option>
                                                <option value="silver">Silver (5%)</option>
                                                <option value="gold">Gold (10%)</option>
                                                <option value="platinum">Platinum (15%)</option>
                                                <option value="vip">VIP (20%)</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <div class="border-t pt-4 space-y-2">
                                    <div class="flex justify-between">
                                        <span>Subtotal:</span>
                                        <span id="subtotal">Rp 0</span>
                                    </div>
                                    <div id="discountRow" class="flex justify-between text-red-600 hidden">
                                        <span>Diskon:</span>
                                        <span id="discountAmount">- Rp 0</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>Pajak (10%):</span>
                                        <span id="tax">Rp 0</span>
                                    </div>
                                    <div class="flex justify-between font-bold text-lg">
                                        <span>Total:</span>
                                        <span id="total">Rp 0</span>
                                    </div>
                                </div>

                                <div class="mt-6 space-y-3">
                                    <button onclick="openPaymentModal()" class="btn-success w-full text-white font-bold py-3 px-6 rounded-2xl">
                                        üí≥ Bayar Sekarang
                                    </button>
                                    <button onclick="clearCart()" class="btn-danger w-full text-white font-bold py-3 px-6 rounded-2xl">
                                        üóëÔ∏è Kosongkan Keranjang
                                    </button>
                                    <button onclick="clearDiscount()" class="glass-effect w-full font-bold py-2 px-6 rounded-2xl hover:bg-white/30 transition-all">
                                        üóëÔ∏è Hapus Diskon
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Product Management Section -->
                <div id="produkSection" class="section hidden">
                    <div class="mb-6 md:mb-8">
                        <h2 class="text-2xl md:text-3xl font-bold mb-2" style="color: var(--text-primary)">üì¶ Kelola Produk</h2>
                        <p class="text-sm md:text-base text-gray-600">Manajemen produk dan inventory lengkap</p>
                    </div>

                    <!-- Product Stats -->
                    <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-6 md:mb-8">
                        <div class="glass-effect p-4 md:p-6 rounded-2xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-xs md:text-sm text-gray-600">Total Produk</p>
                                    <p class="text-xl md:text-2xl font-bold text-blue-600" id="totalProducts">245</p>
                                    <p class="text-xs text-blue-500">+12 bulan ini</p>
                                </div>
                                <div class="w-10 h-10 md:w-12 md:h-12 bg-blue-100 rounded-xl flex items-center justify-center">
                                    <span class="text-xl md:text-2xl">üì¶</span>
                                </div>
                            </div>
                        </div>
                        <div class="glass-effect p-4 md:p-6 rounded-2xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-xs md:text-sm text-gray-600">Stok Rendah</p>
                                    <p class="text-xl md:text-2xl font-bold text-red-600" id="lowStock">12</p>
                                    <p class="text-xs text-red-500">Perlu restock</p>
                                </div>
                                <div class="w-10 h-10 md:w-12 md:h-12 bg-red-100 rounded-xl flex items-center justify-center">
                                    <span class="text-xl md:text-2xl">‚ö†Ô∏è</span>
                                </div>
                            </div>
                        </div>
                        <div class="glass-effect p-4 md:p-6 rounded-2xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-xs md:text-sm text-gray-600">Kategori</p>
                                    <p class="text-xl md:text-2xl font-bold text-green-600" id="totalCategories">8</p>
                                    <p class="text-xs text-green-500">Aktif semua</p>
                                </div>
                                <div class="w-10 h-10 md:w-12 md:h-12 bg-green-100 rounded-xl flex items-center justify-center">
                                    <span class="text-xl md:text-2xl">üè∑Ô∏è</span>
                                </div>
                            </div>
                        </div>
                        <div class="glass-effect p-4 md:p-6 rounded-2xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-xs md:text-sm text-gray-600">Nilai Inventory</p>
                                    <p class="text-xl md:text-2xl font-bold text-purple-600">Rp 2.5M</p>
                                    <p class="text-xs text-purple-500">+8% dari target</p>
                                </div>
                                <div class="w-10 h-10 md:w-12 md:h-12 bg-purple-100 rounded-xl flex items-center justify-center">
                                    <span class="text-xl md:text-2xl">üíé</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex flex-wrap gap-2 md:gap-4 mb-6">
                        <button onclick="openAddProductModal()" class="btn-success text-white px-4 md:px-6 py-2 md:py-3 rounded-2xl font-semibold text-sm md:text-base">
                            ‚ûï Tambah Produk
                        </button>
                        <button onclick="importProducts()" class="btn-primary text-white px-4 md:px-6 py-2 md:py-3 rounded-2xl font-semibold text-sm md:text-base">
                            üì• Import
                        </button>
                        <button onclick="exportProducts()" class="glass-effect px-4 md:px-6 py-2 md:py-3 rounded-2xl font-semibold hover:bg-white/30 transition-all text-sm md:text-base">
                            üìä Export
                        </button>
                        <button onclick="bulkEdit()" class="glass-effect px-4 md:px-6 py-2 md:py-3 rounded-2xl font-semibold hover:bg-white/30 transition-all text-sm md:text-base">
                            ‚úèÔ∏è Edit Massal
                        </button>
                    </div>

                    <!-- Product Table -->
                    <div class="glass-effect p-6 rounded-2xl mb-8">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-xl font-bold" style="color: var(--text-primary)">üìã Daftar Produk</h3>
                            <div class="flex items-center space-x-4">
                                <input type="text" id="productTableSearch" placeholder="Cari produk..." class="input-elegant px-4 py-2 rounded-xl w-64" onkeyup="filterProductTable()">
                                <select id="productTableCategory" class="input-elegant px-4 py-2 rounded-xl" onchange="filterProductTable()">
                                    <option value="">Semua Kategori</option>
                                    <option value="elektronik">üì± Elektronik</option>
                                    <option value="fashion">üëï Fashion</option>
                                    <option value="makanan">üçî Makanan</option>
                                    <option value="kesehatan">üíä Kesehatan</option>
                                    <option value="rumah">üè† Rumah</option>
                                    <option value="olahraga">‚öΩ Olahraga</option>
                                    <option value="buku">üìö Buku</option>
                                    <option value="mainan">üß∏ Mainan</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead>
                                    <tr class="border-b border-gray-200">
                                        <th class="text-left py-4 px-4 font-semibold" style="color: var(--text-primary)">Produk</th>
                                        <th class="text-left py-4 px-4 font-semibold" style="color: var(--text-primary)">Kategori</th>
                                        <th class="text-left py-4 px-4 font-semibold" style="color: var(--text-primary)">Harga</th>
                                        <th class="text-left py-4 px-4 font-semibold" style="color: var(--text-primary)">Stok</th>
                                        <th class="text-left py-4 px-4 font-semibold" style="color: var(--text-primary)">Status</th>
                                        <th class="text-left py-4 px-4 font-semibold" style="color: var(--text-primary)">Aksi</th>
                                    </tr>
                                </thead>
                                <tbody id="productTableBody">
                                    <!-- Product rows will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Product Features Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6">
                        <div class="feature-card">
                            <h3 class="text-lg md:text-xl font-bold mb-4 text-white">üì¶ Database Produk</h3>
                            <p class="text-sm md:text-base text-gray-300 mb-4">Kelola semua produk dengan sistem kategori dan barcode</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>Total Produk:</span>
                                    <span class="font-bold">245</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Produk Aktif:</span>
                                    <span class="font-bold text-green-400">238</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Stok Rendah:</span>
                                    <span class="font-bold text-red-400">12</span>
                                </div>
                            </div>
                            <button onclick="manageProductDatabase()" class="btn-primary text-white px-4 py-2 rounded-xl w-full text-sm md:text-base">Kelola Database</button>
                        </div>
                        
                        <div class="feature-card">
                            <h3 class="text-lg md:text-xl font-bold mb-4 text-white">üè∑Ô∏è Kategori & Tag</h3>
                            <p class="text-sm md:text-base text-gray-300 mb-4">Organisasi produk dengan kategori dan tag otomatis</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>Kategori Utama:</span>
                                    <span class="font-bold">8</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Sub Kategori:</span>
                                    <span class="font-bold">24</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Tag Aktif:</span>
                                    <span class="font-bold">156</span>
                                </div>
                            </div>
                            <button onclick="manageCategoriesAndTags()" class="btn-primary text-white px-4 py-2 rounded-xl w-full text-sm md:text-base">Kelola Kategori</button>
                        </div>
                        
                        <div class="feature-card">
                            <h3 class="text-lg md:text-xl font-bold mb-4 text-white">üí∞ Pricing & Discount</h3>
                            <p class="text-sm md:text-base text-gray-300 mb-4">Sistem harga dinamis dengan discount otomatis</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>Harga Rata-rata:</span>
                                    <span class="font-bold">Rp 2.1M</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Produk Diskon:</span>
                                    <span class="font-bold text-orange-400">45</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Margin Profit:</span>
                                    <span class="font-bold text-green-400">32%</span>
                                </div>
                            </div>
                            <button onclick="managePricingStrategy()" class="btn-primary text-white px-4 py-2 rounded-xl w-full text-sm md:text-base">Kelola Harga</button>
                        </div>
                        
                        <div class="feature-card">
                            <h3 class="text-lg md:text-xl font-bold mb-4 text-white">üìä Product Analytics</h3>
                            <p class="text-sm md:text-base text-gray-300 mb-4">Analisis performa produk dan trend penjualan</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>Best Seller:</span>
                                    <span class="font-bold">iPhone 15 Pro</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Slow Moving:</span>
                                    <span class="font-bold text-red-400">8 items</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Turnover Rate:</span>
                                    <span class="font-bold">4.2x</span>
                                </div>
                            </div>
                            <button onclick="viewProductAnalytics()" class="btn-primary text-white px-4 py-2 rounded-xl w-full text-sm md:text-base">View Analytics</button>
                        </div>
                        
                        <div class="feature-card">
                            <h3 class="text-lg md:text-xl font-bold mb-4 text-white">üîÑ Bulk Operations</h3>
                            <p class="text-sm md:text-base text-gray-300 mb-4">Import, export, dan edit massal produk</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>Last Import:</span>
                                    <span class="font-bold">156 items</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Pending Updates:</span>
                                    <span class="font-bold text-orange-400">23</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Success Rate:</span>
                                    <span class="font-bold text-green-400">98.5%</span>
                                </div>
                            </div>
                            <button onclick="manageBulkOperations()" class="btn-primary text-white px-4 py-2 rounded-xl w-full text-sm md:text-base">Bulk Operations</button>
                        </div>
                        
                        <div class="feature-card">
                            <h3 class="text-lg md:text-xl font-bold mb-4 text-white">üè™ Multi-Store Sync</h3>
                            <p class="text-sm md:text-base text-gray-300 mb-4">Sinkronisasi produk antar cabang otomatis</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>Connected Stores:</span>
                                    <span class="font-bold">5</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Sync Status:</span>
                                    <span class="font-bold text-green-400">Online</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Last Sync:</span>
                                    <span class="font-bold">2 min ago</span>
                                </div>
                            </div>
                            <button onclick="manageMultiStoreSync()" class="btn-primary text-white px-4 py-2 rounded-xl w-full text-sm md:text-base">Manage Sync</button>
                        </div>
                    </div>
                </div>

                <!-- Other sections with comprehensive features -->
                <div id="inventorySection" class="section hidden">
                    <div class="mb-6 md:mb-8">
                        <h2 class="text-2xl md:text-3xl font-bold mb-2" style="color: var(--text-primary)">üìã Manajemen Inventory</h2>
                        <p class="text-sm md:text-base text-gray-600">Sistem inventory lengkap dengan tracking stok dan analisis</p>
                    </div>

                    <!-- Inventory Stats -->
                    <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-6 md:mb-8">
                        <div class="glass-effect p-4 md:p-6 rounded-2xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-xs md:text-sm text-gray-600">Total Items</p>
                                    <p class="text-xl md:text-2xl font-bold text-blue-600">1,245</p>
                                    <p class="text-xs text-blue-500">+5% dari bulan lalu</p>
                                </div>
                                <div class="w-10 h-10 md:w-12 md:h-12 bg-blue-100 rounded-xl flex items-center justify-center">
                                    <span class="text-xl md:text-2xl">üì¶</span>
                                </div>
                            </div>
                        </div>
                        <div class="glass-effect p-4 md:p-6 rounded-2xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-xs md:text-sm text-gray-600">Low Stock Alert</p>
                                    <p class="text-xl md:text-2xl font-bold text-red-600">23</p>
                                    <p class="text-xs text-red-500">Perlu restock</p>
                                </div>
                                <div class="w-10 h-10 md:w-12 md:h-12 bg-red-100 rounded-xl flex items-center justify-center">
                                    <span class="text-xl md:text-2xl">‚ö†Ô∏è</span>
                                </div>
                            </div>
                        </div>
                        <div class="glass-effect p-4 md:p-6 rounded-2xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-xs md:text-sm text-gray-600">Stock Value</p>
                                    <p class="text-xl md:text-2xl font-bold text-green-600">Rp 45.2M</p>
                                    <p class="text-xs text-green-500">+12% dari bulan lalu</p>
                                </div>
                                <div class="w-10 h-10 md:w-12 md:h-12 bg-green-100 rounded-xl flex items-center justify-center">
                                    <span class="text-xl md:text-2xl">üí∞</span>
                                </div>
                            </div>
                        </div>
                        <div class="glass-effect p-4 md:p-6 rounded-2xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-xs md:text-sm text-gray-600">Stock Movement</p>
                                    <p class="text-xl md:text-2xl font-bold text-purple-600">456</p>
                                    <p class="text-xs text-purple-500">Items hari ini</p>
                                </div>
                                <div class="w-10 h-10 md:w-12 md:h-12 bg-purple-100 rounded-xl flex items-center justify-center">
                                    <span class="text-xl md:text-2xl">üìä</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex flex-wrap gap-2 md:gap-4 mb-6">
                        <button onclick="openStockAdjustment()" class="btn-success text-white px-4 md:px-6 py-2 md:py-3 rounded-2xl font-semibold text-sm md:text-base">
                            üìù Stock Adjustment
                        </button>
                        <button onclick="openStockOpname()" class="btn-primary text-white px-4 md:px-6 py-2 md:py-3 rounded-2xl font-semibold text-sm md:text-base">
                            üìã Stock Opname
                        </button>
                        <button onclick="generateReorderReport()" class="glass-effect px-4 md:px-6 py-2 md:py-3 rounded-2xl font-semibold hover:bg-white/30 transition-all text-sm md:text-base">
                            üîÑ Reorder Report
                        </button>
                        <button onclick="exportInventoryData()" class="glass-effect px-4 md:px-6 py-2 md:py-3 rounded-2xl font-semibold hover:bg-white/30 transition-all text-sm md:text-base">
                            üìä Export Data
                        </button>
                    </div>

                    <!-- Inventory Features Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6">
                        <div class="feature-card">
                            <h3 class="text-lg md:text-xl font-bold mb-4 text-white">üì¶ Stock Management</h3>
                            <p class="text-sm md:text-base text-gray-300 mb-4">Real-time tracking stok dengan alert otomatis</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>Total Items:</span>
                                    <span class="font-bold">1,245</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Low Stock:</span>
                                    <span class="font-bold text-red-400">23</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Out of Stock:</span>
                                    <span class="font-bold text-red-400">5</span>
                                </div>
                            </div>
                            <button onclick="manageStockLevels()" class="btn-primary text-white px-4 py-2 rounded-xl w-full text-sm md:text-base">Kelola Stok</button>
                        </div>
                        
                        <div class="feature-card">
                            <h3 class="text-lg md:text-xl font-bold mb-4 text-white">üîÑ Stock Movement</h3>
                            <p class="text-sm md:text-base text-gray-300 mb-4">Tracking pergerakan stok masuk dan keluar</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>Stock In Today:</span>
                                    <span class="font-bold text-green-400">156</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Stock Out Today:</span>
                                    <span class="font-bold text-red-400">89</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Net Movement:</span>
                                    <span class="font-bold text-green-400">+67</span>
                                </div>
                            </div>
                            <button onclick="viewStockMovement()" class="btn-primary text-white px-4 py-2 rounded-xl w-full text-sm md:text-base">View Movement</button>
                        </div>
                        
                        <div class="feature-card">
                            <h3 class="text-lg md:text-xl font-bold mb-4 text-white">üìã Stock Opname</h3>
                            <p class="text-sm md:text-base text-gray-300 mb-4">Sistem stock opname digital dengan barcode scanner</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>Last Opname:</span>
                                    <span class="font-bold">15 Jan 2024</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Items Counted:</span>
                                    <span class="font-bold">1,240</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Variance:</span>
                                    <span class="font-bold text-orange-400">0.4%</span>
                                </div>
                            </div>
                            <button onclick="startStockOpname()" class="btn-primary text-white px-4 py-2 rounded-xl w-full text-sm md:text-base">Start Opname</button>
                        </div>
                        
                        <div class="feature-card">
                            <h3 class="text-lg md:text-xl font-bold mb-4 text-white">‚ö†Ô∏è Reorder Management</h3>
                            <p class="text-sm md:text-base text-gray-300 mb-4">Sistem reorder otomatis berdasarkan minimum stock</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>Reorder Points:</span>
                                    <span class="font-bold">245</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Need Reorder:</span>
                                    <span class="font-bold text-red-400">23</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Auto Orders:</span>
                                    <span class="font-bold text-green-400">12</span>
                                </div>
                            </div>
                            <button onclick="manageReorderPoints()" class="btn-primary text-white px-4 py-2 rounded-xl w-full text-sm md:text-base">Manage Reorder</button>
                        </div>
                        
                        <div class="feature-card">
                            <h3 class="text-lg md:text-xl font-bold mb-4 text-white">üìä Inventory Analytics</h3>
                            <p class="text-sm md:text-base text-gray-300 mb-4">Analisis perputaran inventory dan aging report</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>Turnover Rate:</span>
                                    <span class="font-bold">4.2x</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Slow Moving:</span>
                                    <span class="font-bold text-orange-400">45 items</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Dead Stock:</span>
                                    <span class="font-bold text-red-400">8 items</span>
                                </div>
                            </div>
                            <button onclick="viewInventoryAnalytics()" class="btn-primary text-white px-4 py-2 rounded-xl w-full text-sm md:text-base">View Analytics</button>
                        </div>
                        
                        <div class="feature-card">
                            <h3 class="text-lg md:text-xl font-bold mb-4 text-white">üè≠ Warehouse Management</h3>
                            <p class="text-sm md:text-base text-gray-300 mb-4">Multi-warehouse dengan location tracking</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>Warehouses:</span>
                                    <span class="font-bold">3</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Locations:</span>
                                    <span class="font-bold">156</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Utilization:</span>
                                    <span class="font-bold text-green-400">78%</span>
                                </div>
                            </div>
                            <button onclick="manageWarehouses()" class="btn-primary text-white px-4 py-2 rounded-xl w-full text-sm md:text-base">Manage Warehouse</button>
                        </div>
                    </div>
                </div>

                <div id="laporanSection" class="section hidden">
                    <div class="mb-8">
                        <h2 class="text-3xl font-bold mb-2" style="color: var(--text-primary)">üìà Laporan & Analytics</h2>
                        <p class="text-gray-600">Analisis mendalam performa bisnis Anda</p>
                    </div>

                    <!-- Report Stats -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                        <div class="glass-effect p-6 rounded-2xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Penjualan Bulan Ini</p>
                                    <p class="text-2xl font-bold text-green-600">Rp 125.5M</p>
                                    <p class="text-xs text-green-500">+18% dari bulan lalu</p>
                                </div>
                                <div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center">
                                    <span class="text-2xl">üí∞</span>
                                </div>
                            </div>
                        </div>
                        <div class="glass-effect p-6 rounded-2xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Profit Margin</p>
                                    <p class="text-2xl font-bold text-blue-600">32.5%</p>
                                    <p class="text-xs text-blue-500">+2.1% dari target</p>
                                </div>
                                <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center">
                                    <span class="text-2xl">üìà</span>
                                </div>
                            </div>
                        </div>
                        <div class="glass-effect p-6 rounded-2xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Total Transaksi</p>
                                    <p class="text-2xl font-bold text-purple-600">4,567</p>
                                    <p class="text-xs text-purple-500">+12% dari bulan lalu</p>
                                </div>
                                <div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center">
                                    <span class="text-2xl">üõí</span>
                                </div>
                            </div>
                        </div>
                        <div class="glass-effect p-6 rounded-2xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Avg. Transaction</p>
                                    <p class="text-2xl font-bold text-orange-600">Rp 275K</p>
                                    <p class="text-xs text-orange-500">+5% dari bulan lalu</p>
                                </div>
                                <div class="w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center">
                                    <span class="text-2xl">üí≥</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Report Actions -->
                    <div class="flex flex-wrap gap-4 mb-6">
                        <button onclick="generateSalesReport()" class="btn-success text-white px-6 py-3 rounded-2xl font-semibold">
                            üìä Generate Sales Report
                        </button>
                        <button onclick="generateFinancialReport()" class="btn-primary text-white px-6 py-3 rounded-2xl font-semibold">
                            üí∞ Financial Report
                        </button>
                        <button onclick="generateInventoryReport()" class="glass-effect px-6 py-3 rounded-2xl font-semibold hover:bg-white/30 transition-all">
                            üì¶ Inventory Report
                        </button>
                        <button onclick="exportAllReports()" class="glass-effect px-6 py-3 rounded-2xl font-semibold hover:bg-white/30 transition-all">
                            üìã Export All
                        </button>
                    </div>

                    <div class="feature-grid">
                        <div class="feature-card">
                            <h3 class="text-xl font-bold mb-4 text-white">üìä Laporan Penjualan</h3>
                            <p class="text-gray-300 mb-4">Analisis penjualan harian, mingguan, bulanan dengan grafik interaktif</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>Hari Ini:</span>
                                    <span class="font-bold">Rp 4.2M</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Minggu Ini:</span>
                                    <span class="font-bold">Rp 28.5M</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Bulan Ini:</span>
                                    <span class="font-bold">Rp 125.5M</span>
                                </div>
                            </div>
                            <button onclick="openSalesReport()" class="btn-primary text-white px-4 py-2 rounded-xl w-full">Lihat Detail</button>
                        </div>
                        <div class="feature-card">
                            <h3 class="text-xl font-bold mb-4 text-white">üí∞ Laporan Keuangan</h3>
                            <p class="text-gray-300 mb-4">Profit & Loss, Cash Flow, Balance Sheet otomatis</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>Revenue:</span>
                                    <span class="font-bold text-green-400">Rp 125.5M</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Expenses:</span>
                                    <span class="font-bold text-red-400">Rp 84.7M</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Net Profit:</span>
                                    <span class="font-bold text-green-400">Rp 40.8M</span>
                                </div>
                            </div>
                            <button onclick="openFinancialReport()" class="btn-primary text-white px-4 py-2 rounded-xl w-full">Lihat Detail</button>
                        </div>
                        <div class="feature-card">
                            <h3 class="text-xl font-bold mb-4 text-white">üì¶ Laporan Inventory</h3>
                            <p class="text-gray-300 mb-4">Stock movement, aging analysis, reorder recommendations</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>Total Items:</span>
                                    <span class="font-bold">1,245</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Low Stock:</span>
                                    <span class="font-bold text-red-400">23</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Stock Value:</span>
                                    <span class="font-bold">Rp 45.2M</span>
                                </div>
                            </div>
                            <button onclick="openInventoryReport()" class="btn-primary text-white px-4 py-2 rounded-xl w-full">Lihat Detail</button>
                        </div>
                        <div class="feature-card">
                            <h3 class="text-xl font-bold mb-4 text-white">üë• Laporan Customer</h3>
                            <p class="text-gray-300 mb-4">Customer analytics, loyalty program, purchase behavior</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>Total Customers:</span>
                                    <span class="font-bold">2,456</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>New This Month:</span>
                                    <span class="font-bold text-green-400">234</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Repeat Rate:</span>
                                    <span class="font-bold">68%</span>
                                </div>
                            </div>
                            <button onclick="openCustomerReport()" class="btn-primary text-white px-4 py-2 rounded-xl w-full">Lihat Detail</button>
                        </div>
                    </div>
                </div>

                <div id="customerSection" class="section hidden">
                    <div class="mb-6 md:mb-8">
                        <h2 class="text-2xl md:text-3xl font-bold mb-2" style="color: var(--text-primary)">üë• Customer Management</h2>
                        <p class="text-sm md:text-base text-gray-600">Kelola data pelanggan dan program loyalitas</p>
                    </div>

                    <!-- Customer Stats -->
                    <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-6 md:mb-8">
                        <div class="glass-effect p-4 md:p-6 rounded-2xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-xs md:text-sm text-gray-600">Total Customers</p>
                                    <p class="text-xl md:text-2xl font-bold text-blue-600">2,456</p>
                                    <p class="text-xs text-blue-500">+15% dari bulan lalu</p>
                                </div>
                                <div class="w-10 h-10 md:w-12 md:h-12 bg-blue-100 rounded-xl flex items-center justify-center">
                                    <span class="text-xl md:text-2xl">üë•</span>
                                </div>
                            </div>
                        </div>
                        <div class="glass-effect p-4 md:p-6 rounded-2xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-xs md:text-sm text-gray-600">New Customers</p>
                                    <p class="text-xl md:text-2xl font-bold text-green-600">234</p>
                                    <p class="text-xs text-green-500">Bulan ini</p>
                                </div>
                                <div class="w-10 h-10 md:w-12 md:h-12 bg-green-100 rounded-xl flex items-center justify-center">
                                    <span class="text-xl md:text-2xl">üÜï</span>
                                </div>
                            </div>
                        </div>
                        <div class="glass-effect p-4 md:p-6 rounded-2xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-xs md:text-sm text-gray-600">VIP Members</p>
                                    <p class="text-xl md:text-2xl font-bold text-purple-600">156</p>
                                    <p class="text-xs text-purple-500">6.4% dari total</p>
                                </div>
                                <div class="w-10 h-10 md:w-12 md:h-12 bg-purple-100 rounded-xl flex items-center justify-center">
                                    <span class="text-xl md:text-2xl">üëë</span>
                                </div>
                            </div>
                        </div>
                        <div class="glass-effect p-4 md:p-6 rounded-2xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-xs md:text-sm text-gray-600">Repeat Rate</p>
                                    <p class="text-xl md:text-2xl font-bold text-orange-600">68%</p>
                                    <p class="text-xs text-orange-500">+3% dari target</p>
                                </div>
                                <div class="w-10 h-10 md:w-12 md:h-12 bg-orange-100 rounded-xl flex items-center justify-center">
                                    <span class="text-xl md:text-2xl">üîÑ</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Customer Actions -->
                    <div class="flex flex-wrap gap-2 md:gap-4 mb-6">
                        <button onclick="openAddCustomer()" class="btn-success text-white px-4 md:px-6 py-2 md:py-3 rounded-2xl font-semibold text-sm md:text-base">
                            ‚ûï Tambah Customer
                        </button>
                        <button onclick="openLoyaltyProgram()" class="btn-primary text-white px-4 md:px-6 py-2 md:py-3 rounded-2xl font-semibold text-sm md:text-base">
                            üéÅ Loyalty Program
                        </button>
                        <button onclick="createMarketingCampaign()" class="glass-effect px-4 md:px-6 py-2 md:py-3 rounded-2xl font-semibold hover:bg-white/30 transition-all text-sm md:text-base">
                            üìß Marketing
                        </button>
                        <button onclick="exportCustomerData()" class="glass-effect px-4 md:px-6 py-2 md:py-3 rounded-2xl font-semibold hover:bg-white/30 transition-all text-sm md:text-base">
                            üìä Export
                        </button>
                    </div>

                    <!-- Customer Features Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6">
                        <div class="feature-card">
                            <h3 class="text-lg md:text-xl font-bold mb-4 text-white">üë§ Database Customer</h3>
                            <p class="text-sm md:text-base text-gray-300 mb-4">Profil lengkap customer dengan riwayat pembelian</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>Active Customers:</span>
                                    <span class="font-bold">2,456</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Avg. Lifetime Value:</span>
                                    <span class="font-bold text-green-400">Rp 3.2M</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>New This Month:</span>
                                    <span class="font-bold text-blue-400">234</span>
                                </div>
                            </div>
                            <button onclick="manageCustomerDatabase()" class="btn-primary text-white px-4 py-2 rounded-xl w-full text-sm md:text-base">Kelola Database</button>
                        </div>
                        
                        <div class="feature-card">
                            <h3 class="text-lg md:text-xl font-bold mb-4 text-white">üéÅ Program Loyalitas</h3>
                            <p class="text-sm md:text-base text-gray-300 mb-4">Point reward, membership tier, special discount</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>Active Members:</span>
                                    <span class="font-bold">1,234</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Points Redeemed:</span>
                                    <span class="font-bold text-orange-400">45,678</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>VIP Members:</span>
                                    <span class="font-bold text-purple-400">156</span>
                                </div>
                            </div>
                            <button onclick="setupLoyaltyProgram()" class="btn-primary text-white px-4 py-2 rounded-xl w-full text-sm md:text-base">Setup Program</button>
                        </div>
                        
                        <div class="feature-card">
                            <h3 class="text-lg md:text-xl font-bold mb-4 text-white">üìß Marketing Campaign</h3>
                            <p class="text-sm md:text-base text-gray-300 mb-4">Email marketing, SMS blast, targeted promotion</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>Active Campaigns:</span>
                                    <span class="font-bold">5</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Open Rate:</span>
                                    <span class="font-bold text-green-400">24.5%</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Conversion Rate:</span>
                                    <span class="font-bold text-blue-400">8.2%</span>
                                </div>
                            </div>
                            <button onclick="createCampaign()" class="btn-primary text-white px-4 py-2 rounded-xl w-full text-sm md:text-base">Buat Campaign</button>
                        </div>
                        
                        <div class="feature-card">
                            <h3 class="text-lg md:text-xl font-bold mb-4 text-white">üìä Customer Analytics</h3>
                            <p class="text-sm md:text-base text-gray-300 mb-4">Behavior analysis, segmentation, insights</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>Segments:</span>
                                    <span class="font-bold">8</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Churn Rate:</span>
                                    <span class="font-bold text-red-400">5.2%</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Repeat Rate:</span>
                                    <span class="font-bold text-green-400">68%</span>
                                </div>
                            </div>
                            <button onclick="viewCustomerAnalytics()" class="btn-primary text-white px-4 py-2 rounded-xl w-full text-sm md:text-base">View Analytics</button>
                        </div>
                        
                        <div class="feature-card">
                            <h3 class="text-lg md:text-xl font-bold mb-4 text-white">üéØ Customer Segmentation</h3>
                            <p class="text-sm md:text-base text-gray-300 mb-4">Segmentasi otomatis berdasarkan behavior</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>High Value:</span>
                                    <span class="font-bold text-green-400">245</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Regular:</span>
                                    <span class="font-bold">1,456</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>At Risk:</span>
                                    <span class="font-bold text-orange-400">156</span>
                                </div>
                            </div>
                            <button onclick="manageCustomerSegments()" class="btn-primary text-white px-4 py-2 rounded-xl w-full text-sm md:text-base">Manage Segments</button>
                        </div>
                        
                        <div class="feature-card">
                            <h3 class="text-lg md:text-xl font-bold mb-4 text-white">üí¨ Customer Support</h3>
                            <p class="text-sm md:text-base text-gray-300 mb-4">Integrated support system dengan ticket tracking</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>Open Tickets:</span>
                                    <span class="font-bold text-orange-400">23</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Resolved Today:</span>
                                    <span class="font-bold text-green-400">45</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Satisfaction:</span>
                                    <span class="font-bold text-green-400">4.8/5</span>
                                </div>
                            </div>
                            <button onclick="manageCustomerSupport()" class="btn-primary text-white px-4 py-2 rounded-xl w-full text-sm md:text-base">Support Center</button>
                        </div>
                    </div>
                </div>

                <div id="supplierSection" class="section hidden">
                    <div class="mb-6 md:mb-8">
                        <h2 class="text-2xl md:text-3xl font-bold mb-2" style="color: var(--text-primary)">üè≠ Supplier Management</h2>
                        <p class="text-sm md:text-base text-gray-600">Kelola pemasok dan purchase order</p>
                    </div>

                    <!-- Supplier Stats -->
                    <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-6 md:mb-8">
                        <div class="glass-effect p-4 md:p-6 rounded-2xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-xs md:text-sm text-gray-600">Total Suppliers</p>
                                    <p class="text-xl md:text-2xl font-bold text-blue-600">45</p>
                                    <p class="text-xs text-blue-500">+3 supplier baru</p>
                                </div>
                                <div class="w-10 h-10 md:w-12 md:h-12 bg-blue-100 rounded-xl flex items-center justify-center">
                                    <span class="text-xl md:text-2xl">üè≠</span>
                                </div>
                            </div>
                        </div>
                        <div class="glass-effect p-4 md:p-6 rounded-2xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-xs md:text-sm text-gray-600">Active POs</p>
                                    <p class="text-xl md:text-2xl font-bold text-orange-600">23</p>
                                    <p class="text-xs text-orange-500">Pending approval</p>
                                </div>
                                <div class="w-10 h-10 md:w-12 md:h-12 bg-orange-100 rounded-xl flex items-center justify-center">
                                    <span class="text-xl md:text-2xl">üìã</span>
                                </div>
                            </div>
                        </div>
                        <div class="glass-effect p-4 md:p-6 rounded-2xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-xs md:text-sm text-gray-600">Total Spend</p>
                                    <p class="text-xl md:text-2xl font-bold text-green-600">Rp 85.2M</p>
                                    <p class="text-xs text-green-500">Bulan ini</p>
                                </div>
                                <div class="w-10 h-10 md:w-12 md:h-12 bg-green-100 rounded-xl flex items-center justify-center">
                                    <span class="text-xl md:text-2xl">üí∞</span>
                                </div>
                            </div>
                        </div>
                        <div class="glass-effect p-4 md:p-6 rounded-2xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-xs md:text-sm text-gray-600">Avg Rating</p>
                                    <p class="text-xl md:text-2xl font-bold text-purple-600">4.2</p>
                                    <p class="text-xs text-purple-500">dari 5.0</p>
                                </div>
                                <div class="w-10 h-10 md:w-12 md:h-12 bg-purple-100 rounded-xl flex items-center justify-center">
                                    <span class="text-xl md:text-2xl">‚≠ê</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Supplier Actions -->
                    <div class="flex flex-wrap gap-2 md:gap-4 mb-6">
                        <button onclick="openAddSupplier()" class="btn-success text-white px-4 md:px-6 py-2 md:py-3 rounded-2xl font-semibold text-sm md:text-base">
                            ‚ûï Tambah Supplier
                        </button>
                        <button onclick="createPurchaseOrder()" class="btn-primary text-white px-4 md:px-6 py-2 md:py-3 rounded-2xl font-semibold text-sm md:text-base">
                            üìã Buat PO
                        </button>
                        <button onclick="viewSupplierPerformance()" class="glass-effect px-4 md:px-6 py-2 md:py-3 rounded-2xl font-semibold hover:bg-white/30 transition-all text-sm md:text-base">
                            üìä Performance
                        </button>
                        <button onclick="exportSupplierData()" class="glass-effect px-4 md:px-6 py-2 md:py-3 rounded-2xl font-semibold hover:bg-white/30 transition-all text-sm md:text-base">
                            üìã Export
                        </button>
                    </div>

                    <!-- Supplier Features Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6">
                        <div class="feature-card">
                            <h3 class="text-lg md:text-xl font-bold mb-4 text-white">üè¢ Database Supplier</h3>
                            <p class="text-sm md:text-base text-gray-300 mb-4">Informasi lengkap supplier dengan rating performa</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>Active Suppliers:</span>
                                    <span class="font-bold">45</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Top Rated (4.5+):</span>
                                    <span class="font-bold text-green-400">12</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>New This Month:</span>
                                    <span class="font-bold text-blue-400">3</span>
                                </div>
                            </div>
                            <button onclick="manageSupplierDatabase()" class="btn-primary text-white px-4 py-2 rounded-xl w-full text-sm md:text-base">Kelola Database</button>
                        </div>
                        
                        <div class="feature-card">
                            <h3 class="text-lg md:text-xl font-bold mb-4 text-white">üìã Purchase Order</h3>
                            <p class="text-sm md:text-base text-gray-300 mb-4">Sistem PO otomatis dengan approval workflow</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>Pending POs:</span>
                                    <span class="font-bold text-orange-400">23</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Completed:</span>
                                    <span class="font-bold text-green-400">156</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>This Month:</span>
                                    <span class="font-bold">89</span>
                                </div>
                            </div>
                            <button onclick="managePurchaseOrders()" class="btn-primary text-white px-4 py-2 rounded-xl w-full text-sm md:text-base">Kelola PO</button>
                        </div>
                        
                        <div class="feature-card">
                            <h3 class="text-lg md:text-xl font-bold mb-4 text-white">üìä Supplier Analytics</h3>
                            <p class="text-sm md:text-base text-gray-300 mb-4">Analisis performa supplier dan cost optimization</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>Best Performer:</span>
                                    <span class="font-bold">Apple Tech</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Cost Savings:</span>
                                    <span class="font-bold text-green-400">Rp 2.5M</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Avg Rating:</span>
                                    <span class="font-bold text-yellow-400">4.2/5</span>
                                </div>
                            </div>
                            <button onclick="viewSupplierAnalytics()" class="btn-primary text-white px-4 py-2 rounded-xl w-full text-sm md:text-base">View Analytics</button>
                        </div>
                        
                        <div class="feature-card">
                            <h3 class="text-lg md:text-xl font-bold mb-4 text-white">ü§ù Supplier Relations</h3>
                            <p class="text-sm md:text-base text-gray-300 mb-4">Contract management, negotiations, partnerships</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>Active Contracts:</span>
                                    <span class="font-bold">34</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Expiring Soon:</span>
                                    <span class="font-bold text-red-400">5</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Renewals:</span>
                                    <span class="font-bold text-green-400">12</span>
                                </div>
                            </div>
                            <button onclick="manageSupplierRelations()" class="btn-primary text-white px-4 py-2 rounded-xl w-full text-sm md:text-base">Manage Relations</button>
                        </div>
                        
                        <div class="feature-card">
                            <h3 class="text-lg md:text-xl font-bold mb-4 text-white">üí∞ Cost Management</h3>
                            <p class="text-sm md:text-base text-gray-300 mb-4">Analisis biaya dan optimasi procurement</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>Total Spend:</span>
                                    <span class="font-bold">Rp 85.2M</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Cost Reduction:</span>
                                    <span class="font-bold text-green-400">8.5%</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Budget Variance:</span>
                                    <span class="font-bold text-blue-400">-2.1%</span>
                                </div>
                            </div>
                            <button onclick="manageCostOptimization()" class="btn-primary text-white px-4 py-2 rounded-xl w-full text-sm md:text-base">Cost Analysis</button>
                        </div>
                        
                        <div class="feature-card">
                            <h3 class="text-lg md:text-xl font-bold mb-4 text-white">üöö Delivery Tracking</h3>
                            <p class="text-sm md:text-base text-gray-300 mb-4">Real-time tracking pengiriman dan delivery</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>In Transit:</span>
                                    <span class="font-bold text-orange-400">12</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>On Time Rate:</span>
                                    <span class="font-bold text-green-400">94.5%</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Delayed:</span>
                                    <span class="font-bold text-red-400">2</span>
                                </div>
                            </div>
                            <button onclick="trackDeliveries()" class="btn-primary text-white px-4 py-2 rounded-xl w-full text-sm md:text-base">Track Deliveries</button>
                        </div>
                    </div>
                </div>

                <!-- User Account Management Section -->
                <div id="akunSection" class="section hidden">
                    <div class="mb-6 md:mb-8">
                        <h2 class="text-2xl md:text-3xl font-bold mb-2" style="color: var(--text-primary)">üë• Manajemen Akun User</h2>
                        <p class="text-sm md:text-base text-gray-600">Kelola pengguna sistem dan hak akses mereka</p>
                    </div>

                    <!-- User Statistics -->
                    <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-6 md:mb-8">
                        <div class="glass-effect p-4 md:p-6 rounded-2xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-xs md:text-sm text-gray-600">Total Users</p>
                                    <p class="text-xl md:text-2xl font-bold text-blue-600" id="totalUsers">12</p>
                                    <p class="text-xs text-blue-500">+2 bulan ini</p>
                                </div>
                                <div class="w-10 h-10 md:w-12 md:h-12 bg-blue-100 rounded-xl flex items-center justify-center">
                                    <span class="text-xl md:text-2xl">üë•</span>
                                </div>
                            </div>
                        </div>
                        <div class="glass-effect p-4 md:p-6 rounded-2xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-xs md:text-sm text-gray-600">Admin</p>
                                    <p class="text-xl md:text-2xl font-bold text-red-600" id="adminCount">3</p>
                                    <p class="text-xs text-red-500">Full access</p>
                                </div>
                                <div class="w-10 h-10 md:w-12 md:h-12 bg-red-100 rounded-xl flex items-center justify-center">
                                    <span class="text-xl md:text-2xl">üî¥</span>
                                </div>
                            </div>
                        </div>
                        <div class="glass-effect p-4 md:p-6 rounded-2xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-xs md:text-sm text-gray-600">Manager</p>
                                    <p class="text-xl md:text-2xl font-bold text-orange-600" id="managerCount">4</p>
                                    <p class="text-xs text-orange-500">Management</p>
                                </div>
                                <div class="w-10 h-10 md:w-12 md:h-12 bg-orange-100 rounded-xl flex items-center justify-center">
                                    <span class="text-xl md:text-2xl">üü†</span>
                                </div>
                            </div>
                        </div>
                        <div class="glass-effect p-4 md:p-6 rounded-2xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-xs md:text-sm text-gray-600">Kasir</p>
                                    <p class="text-xl md:text-2xl font-bold text-green-600" id="cashierCount">5</p>
                                    <p class="text-xs text-green-500">Transaction</p>
                                </div>
                                <div class="w-10 h-10 md:w-12 md:h-12 bg-green-100 rounded-xl flex items-center justify-center">
                                    <span class="text-xl md:text-2xl">üü¢</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex flex-wrap gap-2 md:gap-4 mb-6">
                        <button onclick="openAddUserModal()" class="btn-success text-white px-4 md:px-6 py-2 md:py-3 rounded-2xl font-semibold text-sm md:text-base">
                            ‚ûï Tambah User
                        </button>
                        <button onclick="openPermissionModal()" class="btn-primary text-white px-4 md:px-6 py-2 md:py-3 rounded-2xl font-semibold text-sm md:text-base">
                            üîê Hak Akses
                        </button>
                        <button onclick="exportUserData()" class="glass-effect px-4 md:px-6 py-2 md:py-3 rounded-2xl font-semibold hover:bg-white/30 transition-all text-sm md:text-base">
                            üìä Export
                        </button>
                    </div>

                    <!-- User Management Features Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6">
                        <div class="feature-card">
                            <h3 class="text-lg md:text-xl font-bold mb-4 text-white">üë§ User Database</h3>
                            <p class="text-sm md:text-base text-gray-300 mb-4">Kelola semua pengguna sistem dengan role-based access</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>Total Users:</span>
                                    <span class="font-bold">12</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Active Users:</span>
                                    <span class="font-bold text-green-400">11</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>New This Month:</span>
                                    <span class="font-bold text-blue-400">2</span>
                                </div>
                            </div>
                            <button onclick="manageUserDatabase()" class="btn-primary text-white px-4 py-2 rounded-xl w-full text-sm md:text-base">Kelola Database</button>
                        </div>
                        
                        <div class="feature-card">
                            <h3 class="text-lg md:text-xl font-bold mb-4 text-white">üîê Role & Permissions</h3>
                            <p class="text-sm md:text-base text-gray-300 mb-4">Sistem role-based dengan granular permissions</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>Admin Roles:</span>
                                    <span class="font-bold text-red-400">3</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Manager Roles:</span>
                                    <span class="font-bold text-orange-400">4</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Cashier Roles:</span>
                                    <span class="font-bold text-green-400">5</span>
                                </div>
                            </div>
                            <button onclick="manageRolesPermissions()" class="btn-primary text-white px-4 py-2 rounded-xl w-full text-sm md:text-base">Manage Roles</button>
                        </div>
                        
                        <div class="feature-card">
                            <h3 class="text-lg md:text-xl font-bold mb-4 text-white">üìä User Analytics</h3>
                            <p class="text-sm md:text-base text-gray-300 mb-4">Analisis aktivitas dan performa pengguna</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>Login Today:</span>
                                    <span class="font-bold text-green-400">8</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Avg Session:</span>
                                    <span class="font-bold">4.2h</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Most Active:</span>
                                    <span class="font-bold">Admin</span>
                                </div>
                            </div>
                            <button onclick="viewUserAnalytics()" class="btn-primary text-white px-4 py-2 rounded-xl w-full text-sm md:text-base">View Analytics</button>
                        </div>
                        
                        <div class="feature-card">
                            <h3 class="text-lg md:text-xl font-bold mb-4 text-white">üîí Security Settings</h3>
                            <p class="text-sm md:text-base text-gray-300 mb-4">Password policy, 2FA, dan security audit</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>2FA Enabled:</span>
                                    <span class="font-bold text-green-400">8/12</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Strong Passwords:</span>
                                    <span class="font-bold text-green-400">100%</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Failed Logins:</span>
                                    <span class="font-bold text-red-400">3</span>
                                </div>
                            </div>
                            <button onclick="manageSecuritySettings()" class="btn-primary text-white px-4 py-2 rounded-xl w-full text-sm md:text-base">Security Config</button>
                        </div>
                        
                        <div class="feature-card">
                            <h3 class="text-lg md:text-xl font-bold mb-4 text-white">üìù Audit Logs</h3>
                            <p class="text-sm md:text-base text-gray-300 mb-4">Tracking aktivitas dan perubahan sistem</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>Today's Logs:</span>
                                    <span class="font-bold">156</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Critical Events:</span>
                                    <span class="font-bold text-orange-400">2</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Data Changes:</span>
                                    <span class="font-bold">23</span>
                                </div>
                            </div>
                            <button onclick="viewAuditLogs()" class="btn-primary text-white px-4 py-2 rounded-xl w-full text-sm md:text-base">View Logs</button>
                        </div>
                        
                        <div class="feature-card">
                            <h3 class="text-lg md:text-xl font-bold mb-4 text-white">üîÑ User Lifecycle</h3>
                            <p class="text-sm md:text-base text-gray-300 mb-4">Onboarding, training, dan offboarding</p>
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>Pending Approval:</span>
                                    <span class="font-bold text-orange-400">2</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Training Complete:</span>
                                    <span class="font-bold text-green-400">9/12</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span>Inactive Users:</span>
                                    <span class="font-bold text-red-400">1</span>
                                </div>
                            </div>
                            <button onclick="manageUserLifecycle()" class="btn-primary text-white px-4 py-2 rounded-xl w-full text-sm md:text-base">Manage Lifecycle</button>
                        </div>
                    </div>
                </div>

                <div id="pengaturanSection" class="section hidden">
                    <div class="mb-8">
                        <h2 class="text-3xl font-bold mb-2" style="color: var(--text-primary)">‚öôÔ∏è Pengaturan Sistem</h2>
                        <p class="text-gray-600">Konfigurasi lengkap sistem ElitePOS</p>
                    </div>

                    <div class="feature-grid">
                        <div class="feature-card">
                            <h3 class="text-xl font-bold mb-4 text-white">üè™ Pengaturan Toko</h3>
                            <p class="text-gray-300 mb-4">Informasi toko, logo, alamat, kontak</p>
                            <button class="btn-primary text-white px-4 py-2 rounded-xl">Konfigurasi</button>
                        </div>
                        <div class="feature-card">
                            <h3 class="text-xl font-bold mb-4 text-white">üí≥ Payment Gateway</h3>
                            <p class="text-gray-300 mb-4">Integrasi dengan berbagai metode pembayaran</p>
                            <button class="btn-primary text-white px-4 py-2 rounded-xl">Setup Payment</button>
                        </div>
                        <div class="feature-card">
                            <h3 class="text-xl font-bold mb-4 text-white">üñ®Ô∏è Printer & Hardware</h3>
                            <p class="text-gray-300 mb-4">Konfigurasi printer receipt, barcode scanner</p>
                            <button class="btn-primary text-white px-4 py-2 rounded-xl">Setup Hardware</button>
                        </div>
                        <div class="feature-card">
                            <h3 class="text-xl font-bold mb-4 text-white">üîí Security Settings</h3>
                            <p class="text-gray-300 mb-4">Password policy, session timeout, audit log</p>
                            <button class="btn-primary text-white px-4 py-2 rounded-xl">Security Config</button>
                        </div>
                        <div class="feature-card">
                            <h3 class="text-xl font-bold mb-4 text-white">üìä Backup & Restore</h3>
                            <p class="text-gray-300 mb-4">Automated backup, cloud sync, data recovery</p>
                            <button class="btn-primary text-white px-4 py-2 rounded-xl">Backup Settings</button>
                        </div>
                        <div class="feature-card">
                            <h3 class="text-xl font-bold mb-4 text-white">üåê API Integration</h3>
                            <p class="text-gray-300 mb-4">Third-party integrations, webhooks, API keys</p>
                            <button class="btn-primary text-white px-4 py-2 rounded-xl">API Config</button>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Modals (existing modals remain the same) -->
    
    <!-- Add Product Modal -->
    <div id="addProductModal" class="fixed inset-0 z-50 hidden modal-overlay flex items-center justify-center p-4">
        <div class="glass-effect rounded-3xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto">
            <div class="p-8">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-2xl font-bold" style="color: var(--text-primary)">üì¶ Tambah Produk Baru</h3>
                    <button onclick="closeAddProductModal()" class="p-2 hover:bg-white/20 rounded-xl transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <form id="addProductForm" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Basic Information -->
                        <div class="md:col-span-2">
                            <h4 class="text-lg font-semibold mb-4 text-white">üìã Informasi Dasar</h4>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Nama Produk *</label>
                            <input type="text" id="productName" required class="input-elegant w-full px-4 py-3 rounded-2xl" placeholder="iPhone 15 Pro Max">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">SKU/Barcode</label>
                            <input type="text" id="productSku" class="input-elegant w-full px-4 py-3 rounded-2xl" placeholder="IP15PM-256-BLU">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Kategori *</label>
                            <select id="productCategory" required class="input-elegant w-full px-4 py-3 rounded-2xl">
                                <option value="">Pilih Kategori</option>
                                <option value="elektronik">üì± Elektronik</option>
                                <option value="fashion">üëï Fashion</option>
                                <option value="makanan">üçî Makanan & Minuman</option>
                                <option value="kesehatan">üíä Kesehatan & Kecantikan</option>
                                <option value="rumah">üè† Rumah & Taman</option>
                                <option value="olahraga">‚öΩ Olahraga</option>
                                <option value="buku">üìö Buku & Media</option>
                                <option value="mainan">üß∏ Mainan & Hobi</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Brand/Merek</label>
                            <input type="text" id="productBrand" class="input-elegant w-full px-4 py-3 rounded-2xl" placeholder="Apple">
                        </div>
                        
                        <div class="md:col-span-2">
                            <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Deskripsi Produk</label>
                            <textarea id="productDescription" rows="3" class="input-elegant w-full px-4 py-3 rounded-2xl" placeholder="Deskripsi lengkap produk..."></textarea>
                        </div>
                        
                        <!-- Pricing Information -->
                        <div class="md:col-span-2">
                            <h4 class="text-lg font-semibold mb-4 text-white">üí∞ Informasi Harga</h4>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Harga Beli *</label>
                            <input type="number" id="productCostPrice" required class="input-elegant w-full px-4 py-3 rounded-2xl" placeholder="15000000">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Harga Jual *</label>
                            <input type="number" id="productSellPrice" required class="input-elegant w-full px-4 py-3 rounded-2xl" placeholder="18999000">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Margin Profit</label>
                            <input type="text" id="productMargin" readonly class="input-elegant w-full px-4 py-3 rounded-2xl bg-gray-100" placeholder="Otomatis terhitung">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Diskon (%)</label>
                            <input type="number" id="productDiscount" min="0" max="100" class="input-elegant w-full px-4 py-3 rounded-2xl" placeholder="0">
                        </div>
                        
                        <!-- Stock Information -->
                        <div class="md:col-span-2">
                            <h4 class="text-lg font-semibold mb-4 text-white">üì¶ Informasi Stok</h4>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Stok Awal *</label>
                            <input type="number" id="productStock" required min="0" class="input-elegant w-full px-4 py-3 rounded-2xl" placeholder="50">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Minimum Stok</label>
                            <input type="number" id="productMinStock" min="0" class="input-elegant w-full px-4 py-3 rounded-2xl" placeholder="10">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Satuan</label>
                            <select id="productUnit" class="input-elegant w-full px-4 py-3 rounded-2xl">
                                <option value="pcs">Pcs</option>
                                <option value="kg">Kg</option>
                                <option value="gram">Gram</option>
                                <option value="liter">Liter</option>
                                <option value="meter">Meter</option>
                                <option value="box">Box</option>
                                <option value="pack">Pack</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Status</label>
                            <select id="productStatus" class="input-elegant w-full px-4 py-3 rounded-2xl">
                                <option value="active">‚úÖ Aktif</option>
                                <option value="inactive">‚ùå Tidak Aktif</option>
                                <option value="draft">üìù Draft</option>
                            </select>
                        </div>
                        
                        <!-- Additional Information -->
                        <div class="md:col-span-2">
                            <h4 class="text-lg font-semibold mb-4 text-white">üìã Informasi Tambahan</h4>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Berat (gram)</label>
                            <input type="number" id="productWeight" min="0" class="input-elegant w-full px-4 py-3 rounded-2xl" placeholder="200">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Dimensi (P x L x T cm)</label>
                            <input type="text" id="productDimensions" class="input-elegant w-full px-4 py-3 rounded-2xl" placeholder="15 x 7 x 0.8">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Supplier</label>
                            <select id="productSupplier" class="input-elegant w-full px-4 py-3 rounded-2xl">
                                <option value="">Pilih Supplier</option>
                                <option value="apple-tech">Apple Tech Indonesia</option>
                                <option value="samsung-dist">Samsung Distribution</option>
                                <option value="xiaomi-id">Xiaomi Indonesia</option>
                                <option value="local-supplier">Local Supplier</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Lokasi Gudang</label>
                            <select id="productWarehouse" class="input-elegant w-full px-4 py-3 rounded-2xl">
                                <option value="main">Gudang Utama</option>
                                <option value="store">Toko</option>
                                <option value="warehouse-a">Gudang A</option>
                                <option value="warehouse-b">Gudang B</option>
                            </select>
                        </div>
                        
                        <div class="md:col-span-2">
                            <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Tags (pisahkan dengan koma)</label>
                            <input type="text" id="productTags" class="input-elegant w-full px-4 py-3 rounded-2xl" placeholder="smartphone, premium, 5G, apple">
                        </div>
                    </div>

                    <div class="flex space-x-4 pt-4">
                        <button type="submit" class="btn-success flex-1 text-white font-bold py-4 px-6 rounded-2xl">
                            ‚úÖ Simpan Produk
                        </button>
                        <button type="button" onclick="closeAddProductModal()" class="btn-danger flex-1 text-white font-bold py-4 px-6 rounded-2xl">
                            ‚ùå Batal
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Edit Product Modal -->
    <div id="editProductModal" class="fixed inset-0 z-50 hidden modal-overlay flex items-center justify-center p-4">
        <div class="glass-effect rounded-3xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto">
            <div class="p-8">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-2xl font-bold" style="color: var(--text-primary)">‚úèÔ∏è Edit Produk</h3>
                    <button onclick="closeEditProductModal()" class="p-2 hover:bg-white/20 rounded-xl transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <form id="editProductForm" class="space-y-6">
                    <input type="hidden" id="editProductId">
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Basic Information -->
                        <div class="md:col-span-2">
                            <h4 class="text-lg font-semibold mb-4 text-white">üìã Informasi Dasar</h4>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Nama Produk *</label>
                            <input type="text" id="editProductName" required class="input-elegant w-full px-4 py-3 rounded-2xl">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Kategori *</label>
                            <select id="editProductCategory" required class="input-elegant w-full px-4 py-3 rounded-2xl">
                                <option value="">Pilih Kategori</option>
                                <option value="elektronik">üì± Elektronik</option>
                                <option value="fashion">üëï Fashion</option>
                                <option value="makanan">üçî Makanan & Minuman</option>
                                <option value="kesehatan">üíä Kesehatan & Kecantikan</option>
                                <option value="rumah">üè† Rumah & Taman</option>
                                <option value="olahraga">‚öΩ Olahraga</option>
                                <option value="buku">üìö Buku & Media</option>
                                <option value="mainan">üß∏ Mainan & Hobi</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Harga Jual *</label>
                            <input type="number" id="editProductPrice" required class="input-elegant w-full px-4 py-3 rounded-2xl">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Stok *</label>
                            <input type="number" id="editProductStock" required min="0" class="input-elegant w-full px-4 py-3 rounded-2xl">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Status</label>
                            <select id="editProductStatus" class="input-elegant w-full px-4 py-3 rounded-2xl">
                                <option value="active">‚úÖ Aktif</option>
                                <option value="inactive">‚ùå Tidak Aktif</option>
                            </select>
                        </div>
                    </div>

                    <div class="flex space-x-4 pt-4">
                        <button type="submit" class="btn-success flex-1 text-white font-bold py-4 px-6 rounded-2xl">
                            ‚úÖ Update Produk
                        </button>
                        <button type="button" onclick="closeEditProductModal()" class="btn-danger flex-1 text-white font-bold py-4 px-6 rounded-2xl">
                            ‚ùå Batal
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add User Modal -->
    <div id="addUserModal" class="fixed inset-0 z-50 hidden modal-overlay flex items-center justify-center p-4">
        <div class="glass-effect rounded-3xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto">
            <div class="p-8">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-2xl font-bold" style="color: var(--text-primary)">‚ûï Tambah User Baru</h3>
                    <button onclick="closeAddUserModal()" class="p-2 hover:bg-white/20 rounded-xl transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <form id="addUserForm" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Nama Lengkap *</label>
                            <input type="text" id="userFullName" required class="input-elegant w-full px-4 py-3 rounded-2xl" placeholder="John Doe">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Username *</label>
                            <input type="text" id="userUsername" required class="input-elegant w-full px-4 py-3 rounded-2xl" placeholder="johndoe">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Email</label>
                            <input type="email" id="userEmail" class="input-elegant w-full px-4 py-3 rounded-2xl" placeholder="john@example.com">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Nomor Telepon</label>
                            <input type="tel" id="userPhone" class="input-elegant w-full px-4 py-3 rounded-2xl" placeholder="08123456789">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Password *</label>
                            <input type="password" id="userPassword" required class="input-elegant w-full px-4 py-3 rounded-2xl" placeholder="Minimal 8 karakter">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Konfirmasi Password *</label>
                            <input type="password" id="userPasswordConfirm" required class="input-elegant w-full px-4 py-3 rounded-2xl" placeholder="Ulangi password">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Role *</label>
                            <select id="userRole" required class="input-elegant w-full px-4 py-3 rounded-2xl">
                                <option value="">Pilih Role</option>
                                <option value="admin">Admin - Full Access</option>
                                <option value="manager">Manager - Management Access</option>
                                <option value="cashier">Kasir - Transaction Access</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Status</label>
                            <select id="userStatus" class="input-elegant w-full px-4 py-3 rounded-2xl">
                                <option value="active">Aktif</option>
                                <option value="inactive">Tidak Aktif</option>
                            </select>
                        </div>
                    </div>

                    <div class="flex space-x-4 pt-4">
                        <button type="submit" class="btn-success flex-1 text-white font-bold py-4 px-6 rounded-2xl">
                            ‚úÖ Simpan User
                        </button>
                        <button type="button" onclick="closeAddUserModal()" class="btn-danger flex-1 text-white font-bold py-4 px-6 rounded-2xl">
                            ‚ùå Batal
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Permission Management Modal -->
    <div id="permissionModal" class="fixed inset-0 z-50 hidden modal-overlay flex items-center justify-center p-4">
        <div class="glass-effect rounded-3xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto">
            <div class="p-8">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-2xl font-bold" style="color: var(--text-primary)">üîê Kelola Hak Akses</h3>
                    <button onclick="closePermissionModal()" class="p-2 hover:bg-white/20 rounded-xl transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <!-- Admin Permissions -->
                    <div class="permission-card p-6 rounded-2xl">
                        <div class="flex items-center space-x-3 mb-6">
                            <div class="w-12 h-12 bg-gradient-to-r from-red-500 to-red-600 rounded-xl flex items-center justify-center">
                                <span class="text-2xl">üî¥</span>
                            </div>
                            <div>
                                <h4 class="text-lg font-bold text-white">Admin</h4>
                                <p class="text-sm text-gray-300">Full System Access</p>
                            </div>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-white">Kelola User</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked disabled>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-white">Kelola Produk</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked disabled>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-white">Lihat Laporan</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked disabled>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-white">Pengaturan Sistem</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked disabled>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-white">Transaksi Kasir</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked disabled>
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Manager Permissions -->
                    <div class="permission-card p-6 rounded-2xl">
                        <div class="flex items-center space-x-3 mb-6">
                            <div class="w-12 h-12 bg-gradient-to-r from-orange-500 to-orange-600 rounded-xl flex items-center justify-center">
                                <span class="text-2xl">üü†</span>
                            </div>
                            <div>
                                <h4 class="text-lg font-bold text-white">Manager</h4>
                                <p class="text-sm text-gray-300">Management Access</p>
                            </div>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-white">Kelola User</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="managerUserAccess">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-white">Kelola Produk</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked id="managerProductAccess">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-white">Lihat Laporan</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked id="managerReportAccess">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-white">Pengaturan Sistem</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="managerSettingsAccess">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-white">Transaksi Kasir</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked id="managerCashierAccess">
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Cashier Permissions -->
                    <div class="permission-card p-6 rounded-2xl">
                        <div class="flex items-center space-x-3 mb-6">
                            <div class="w-12 h-12 bg-gradient-to-r from-green-500 to-green-600 rounded-xl flex items-center justify-center">
                                <span class="text-2xl">üü¢</span>
                            </div>
                            <div>
                                <h4 class="text-lg font-bold text-white">Kasir</h4>
                                <p class="text-sm text-gray-300">Transaction Access</p>
                            </div>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-white">Kelola User</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" disabled>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-white">Kelola Produk</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="cashierProductAccess">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-white">Lihat Laporan</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="cashierReportAccess">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-white">Pengaturan Sistem</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" disabled>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-white">Transaksi Kasir</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked disabled>
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex justify-end space-x-4 mt-8">
                    <button onclick="savePermissions()" class="btn-success text-white px-8 py-3 rounded-2xl font-semibold">
                        ‚úÖ Simpan Perubahan
                    </button>
                    <button onclick="closePermissionModal()" class="btn-danger text-white px-8 py-3 rounded-2xl font-semibold">
                        ‚ùå Batal
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Import Products Modal -->
    <div id="importModal" class="fixed inset-0 z-50 hidden modal-overlay flex items-center justify-center p-4">
        <div class="glass-effect rounded-3xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto">
            <div class="p-8">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-2xl font-bold" style="color: var(--text-primary)">üì• Import Produk</h3>
                    <button onclick="closeImportModal()" class="p-2 hover:bg-white/20 rounded-xl transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <form id="importForm" onsubmit="handleFileImport(event)" class="space-y-6">
                    <!-- File Upload Section -->
                    <div class="glass-effect p-6 rounded-2xl">
                        <h4 class="text-lg font-semibold mb-4 text-white">üìÅ Pilih File Import</h4>
                        
                        <div class="border-2 border-dashed border-gray-300 rounded-2xl p-8 text-center">
                            <div class="text-6xl mb-4">üìÑ</div>
                            <p class="text-lg font-semibold mb-2">Drag & Drop file atau klik untuk browse</p>
                            <p class="text-sm text-gray-600 mb-4">Mendukung format: CSV, Excel (.xlsx, .xls)</p>
                            <input type="file" id="importFile" accept=".csv,.xlsx,.xls" class="hidden" onchange="updateFileName()">
                            <button type="button" onclick="document.getElementById('importFile').click()" class="btn-primary text-white px-6 py-3 rounded-2xl">
                                üìÅ Pilih File
                            </button>
                            <div id="fileName" class="mt-3 text-sm text-gray-600"></div>
                        </div>
                        
                        <div class="mt-4 flex justify-between items-center">
                            <button type="button" onclick="downloadTemplate()" class="text-blue-600 hover:text-blue-800 text-sm font-semibold">
                                üìã Download Template CSV
                            </button>
                            <div class="text-xs text-gray-500">
                                Max file size: 10MB
                            </div>
                        </div>
                    </div>

                    <!-- Import Options -->
                    <div class="glass-effect p-6 rounded-2xl">
                        <h4 class="text-lg font-semibold mb-4 text-white">‚öôÔ∏è Opsi Import</h4>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="flex items-center space-x-3">
                                    <input type="checkbox" id="skipDuplicates" checked class="rounded">
                                    <span class="text-sm">Skip produk duplikat (berdasarkan SKU)</span>
                                </label>
                            </div>
                            <div>
                                <label class="flex items-center space-x-3">
                                    <input type="checkbox" id="updateExisting" class="rounded">
                                    <span class="text-sm">Update produk yang sudah ada</span>
                                </label>
                            </div>
                            <div>
                                <label class="flex items-center space-x-3">
                                    <input type="checkbox" id="validateStock" checked class="rounded">
                                    <span class="text-sm">Validasi stok minimum</span>
                                </label>
                            </div>
                            <div>
                                <label class="flex items-center space-x-3">
                                    <input type="checkbox" id="autoGenerateSKU" checked class="rounded">
                                    <span class="text-sm">Auto-generate SKU jika kosong</span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="mt-4">
                            <label class="block text-sm font-semibold mb-2">Default Status Produk</label>
                            <select id="defaultStatus" class="input-elegant w-full px-4 py-2 rounded-xl">
                                <option value="active">Aktif</option>
                                <option value="inactive">Tidak Aktif</option>
                                <option value="draft">Draft</option>
                            </select>
                        </div>
                    </div>

                    <!-- Progress Bar -->
                    <div id="importProgress" class="hidden glass-effect p-6 rounded-2xl">
                        <h4 class="text-lg font-semibold mb-4 text-white">üìä Progress Import</h4>
                        <div class="w-full bg-gray-200 rounded-full h-4 mb-2">
                            <div class="progress-bar bg-gradient-to-r from-blue-500 to-purple-600 h-4 rounded-full transition-all duration-300" style="width: 0%"></div>
                        </div>
                        <p id="importProgressText" class="text-sm text-gray-600 text-center">Memproses file...</p>
                    </div>

                    <!-- Import Results -->
                    <div id="importResults" class="hidden"></div>

                    <!-- Action Buttons -->
                    <div class="flex space-x-4">
                        <button type="submit" class="btn-success flex-1 text-white font-bold py-4 px-6 rounded-2xl">
                            üì• Mulai Import
                        </button>
                        <button type="button" onclick="closeImportModal()" class="btn-danger flex-1 text-white font-bold py-4 px-6 rounded-2xl">
                            ‚ùå Batal
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Export Products Modal -->
    <div id="exportModal" class="fixed inset-0 z-50 hidden modal-overlay flex items-center justify-center p-4">
        <div class="glass-effect rounded-3xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto">
            <div class="p-8">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-2xl font-bold" style="color: var(--text-primary)">üì§ Export Produk</h3>
                    <button onclick="closeExportModal()" class="p-2 hover:bg-white/20 rounded-xl transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <form id="exportForm" onsubmit="handleExport(event)" class="space-y-6">
                    <!-- Export Format -->
                    <div class="glass-effect p-6 rounded-2xl">
                        <h4 class="text-lg font-semibold mb-4 text-white">üìã Format Export</h4>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <label class="flex items-center space-x-3 p-4 border border-gray-300 rounded-xl hover:bg-white/10 transition-colors cursor-pointer">
                                <input type="radio" name="exportFormat" id="exportFormat" value="csv" checked class="text-blue-600">
                                <div>
                                    <div class="font-semibold">üìä CSV</div>
                                    <div class="text-xs text-gray-600">Comma Separated Values</div>
                                </div>
                            </label>
                            <label class="flex items-center space-x-3 p-4 border border-gray-300 rounded-xl hover:bg-white/10 transition-colors cursor-pointer">
                                <input type="radio" name="exportFormat" value="xlsx" class="text-blue-600">
                                <div>
                                    <div class="font-semibold">üìà Excel</div>
                                    <div class="text-xs text-gray-600">Microsoft Excel</div>
                                </div>
                            </label>
                            <label class="flex items-center space-x-3 p-4 border border-gray-300 rounded-xl hover:bg-white/10 transition-colors cursor-pointer">
                                <input type="radio" name="exportFormat" value="json" class="text-blue-600">
                                <div>
                                    <div class="font-semibold">üîß JSON</div>
                                    <div class="text-xs text-gray-600">JavaScript Object</div>
                                </div>
                            </label>
                        </div>
                    </div>

                    <!-- Filter Options -->
                    <div class="glass-effect p-6 rounded-2xl">
                        <h4 class="text-lg font-semibold mb-4 text-white">üîç Filter Data</h4>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-semibold mb-2">Rentang Tanggal</label>
                                <select id="exportDateRange" class="input-elegant w-full px-4 py-2 rounded-xl">
                                    <option value="all">Semua Data</option>
                                    <option value="today">Hari Ini</option>
                                    <option value="week">7 Hari Terakhir</option>
                                    <option value="month">30 Hari Terakhir</option>
                                    <option value="year">1 Tahun Terakhir</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-semibold mb-2">Status Produk</label>
                                <select id="exportStatus" class="input-elegant w-full px-4 py-2 rounded-xl">
                                    <option value="all">Semua Status</option>
                                    <option value="active">Hanya Aktif</option>
                                    <option value="inactive">Hanya Tidak Aktif</option>
                                    <option value="draft">Hanya Draft</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="mt-4">
                            <label class="block text-sm font-semibold mb-3">Kategori Produk</label>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" name="exportCategories" value="all" checked>
                                    <span class="text-sm">Semua</span>
                                </label>
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" name="exportCategories" value="elektronik">
                                    <span class="text-sm">üì± Elektronik</span>
                                </label>
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" name="exportCategories" value="fashion">
                                    <span class="text-sm">üëï Fashion</span>
                                </label>
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" name="exportCategories" value="makanan">
                                    <span class="text-sm">üçî Makanan</span>
                                </label>
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" name="exportCategories" value="kesehatan">
                                    <span class="text-sm">üíä Kesehatan</span>
                                </label>
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" name="exportCategories" value="rumah">
                                    <span class="text-sm">üè† Rumah</span>
                                </label>
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" name="exportCategories" value="olahraga">
                                    <span class="text-sm">‚öΩ Olahraga</span>
                                </label>
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" name="exportCategories" value="buku">
                                    <span class="text-sm">üìö Buku</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Additional Data -->
                    <div class="glass-effect p-6 rounded-2xl">
                        <h4 class="text-lg font-semibold mb-4 text-white">üìä Data Tambahan</h4>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <label class="flex items-center space-x-3">
                                <input type="checkbox" id="includeImages" class="rounded">
                                <span class="text-sm">Include Images URL</span>
                            </label>
                            <label class="flex items-center space-x-3">
                                <input type="checkbox" id="includeSupplier" class="rounded">
                                <span class="text-sm">Include Supplier Info</span>
                            </label>
                            <label class="flex items-center space-x-3">
                                <input type="checkbox" id="includeAnalytics" class="rounded">
                                <span class="text-sm">Include Sales Analytics</span>
                            </label>
                        </div>
                    </div>

                    <!-- Progress Bar -->
                    <div id="exportProgress" class="hidden glass-effect p-6 rounded-2xl">
                        <h4 class="text-lg font-semibold mb-4 text-white">üìä Progress Export</h4>
                        <div class="w-full bg-gray-200 rounded-full h-4 mb-2">
                            <div class="progress-bar bg-gradient-to-r from-green-500 to-blue-600 h-4 rounded-full transition-all duration-300" style="width: 0%"></div>
                        </div>
                        <p id="exportProgressText" class="text-sm text-gray-600 text-center">Menyiapkan data export...</p>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex space-x-4">
                        <button type="submit" class="btn-success flex-1 text-white font-bold py-4 px-6 rounded-2xl">
                            üì§ Export Data
                        </button>
                        <button type="button" onclick="closeExportModal()" class="btn-danger flex-1 text-white font-bold py-4 px-6 rounded-2xl">
                            ‚ùå Batal
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Category & Tag Management Modal -->
    <div id="categoryTagModal" class="fixed inset-0 z-50 hidden modal-overlay flex items-center justify-center p-4">
        <div class="glass-effect rounded-3xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-y-auto">
            <div class="p-8">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-2xl font-bold" style="color: var(--text-primary)">üè∑Ô∏è Kelola Kategori & Tag</h3>
                    <button onclick="closeCategoryTagModal()" class="p-2 hover:bg-white/20 rounded-xl transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Category Management -->
                    <div class="glass-effect p-6 rounded-2xl">
                        <div class="flex items-center justify-between mb-6">
                            <h4 class="text-xl font-bold text-white">üìÇ Manajemen Kategori</h4>
                            <button onclick="openAddCategoryForm()" class="btn-success text-white px-4 py-2 rounded-xl text-sm">
                                ‚ûï Tambah Kategori
                            </button>
                        </div>

                        <!-- Add Category Form -->
                        <div id="addCategoryForm" class="hidden mb-6 p-4 bg-white/10 rounded-xl">
                            <form onsubmit="addNewCategory(event)" class="space-y-4">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-semibold mb-2 text-white">Nama Kategori *</label>
                                        <input type="text" id="newCategoryName" required class="input-elegant w-full px-3 py-2 rounded-xl" placeholder="Elektronik Gaming">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-semibold mb-2 text-white">Icon Emoji</label>
                                        <input type="text" id="newCategoryIcon" class="input-elegant w-full px-3 py-2 rounded-xl" placeholder="üéÆ" maxlength="2">
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold mb-2 text-white">Deskripsi</label>
                                    <textarea id="newCategoryDescription" rows="2" class="input-elegant w-full px-3 py-2 rounded-xl" placeholder="Kategori untuk produk gaming dan aksesoris"></textarea>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-semibold mb-2 text-white">Parent Kategori</label>
                                        <select id="newCategoryParent" class="input-elegant w-full px-3 py-2 rounded-xl">
                                            <option value="">Kategori Utama</option>
                                            <option value="elektronik">üì± Elektronik</option>
                                            <option value="fashion">üëï Fashion</option>
                                            <option value="rumah">üè† Rumah & Taman</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-semibold mb-2 text-white">Status</label>
                                        <select id="newCategoryStatus" class="input-elegant w-full px-3 py-2 rounded-xl">
                                            <option value="active">‚úÖ Aktif</option>
                                            <option value="inactive">‚ùå Tidak Aktif</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button type="submit" class="btn-success text-white px-4 py-2 rounded-xl text-sm">‚úÖ Simpan</button>
                                    <button type="button" onclick="closeAddCategoryForm()" class="glass-effect px-4 py-2 rounded-xl text-sm hover:bg-white/30">‚ùå Batal</button>
                                </div>
                            </form>
                        </div>

                        <!-- Category List -->
                        <div class="space-y-3 max-h-96 overflow-y-auto" id="categoryList">
                            <!-- Categories will be populated here -->
                        </div>
                    </div>

                    <!-- Tag Management -->
                    <div class="glass-effect p-6 rounded-2xl">
                        <div class="flex items-center justify-between mb-6">
                            <h4 class="text-xl font-bold text-white">üè∑Ô∏è Manajemen Tag</h4>
                            <button onclick="openAddTagForm()" class="btn-success text-white px-4 py-2 rounded-xl text-sm">
                                ‚ûï Tambah Tag
                            </button>
                        </div>

                        <!-- Add Tag Form -->
                        <div id="addTagForm" class="hidden mb-6 p-4 bg-white/10 rounded-xl">
                            <form onsubmit="addNewTag(event)" class="space-y-4">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-semibold mb-2 text-white">Nama Tag *</label>
                                        <input type="text" id="newTagName" required class="input-elegant w-full px-3 py-2 rounded-xl" placeholder="premium">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-semibold mb-2 text-white">Warna</label>
                                        <select id="newTagColor" class="input-elegant w-full px-3 py-2 rounded-xl">
                                            <option value="blue">üîµ Biru</option>
                                            <option value="green">üü¢ Hijau</option>
                                            <option value="red">üî¥ Merah</option>
                                            <option value="yellow">üü° Kuning</option>
                                            <option value="purple">üü£ Ungu</option>
                                            <option value="orange">üü† Orange</option>
                                        </select>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold mb-2 text-white">Deskripsi</label>
                                    <input type="text" id="newTagDescription" class="input-elegant w-full px-3 py-2 rounded-xl" placeholder="Tag untuk produk premium">
                                </div>
                                <div class="flex space-x-2">
                                    <button type="submit" class="btn-success text-white px-4 py-2 rounded-xl text-sm">‚úÖ Simpan</button>
                                    <button type="button" onclick="closeAddTagForm()" class="glass-effect px-4 py-2 rounded-xl text-sm hover:bg-white/30">‚ùå Batal</button>
                                </div>
                            </form>
                        </div>

                        <!-- Tag List -->
                        <div class="space-y-2 max-h-96 overflow-y-auto" id="tagList">
                            <!-- Tags will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Category Analytics -->
                <div class="mt-8 glass-effect p-6 rounded-2xl">
                    <h4 class="text-xl font-bold mb-4 text-white">üìä Analytics Kategori & Tag</h4>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-blue-400" id="totalCategories">8</div>
                            <div class="text-sm text-gray-300">Total Kategori</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-green-400" id="activeTags">24</div>
                            <div class="text-sm text-gray-300">Tag Aktif</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-purple-400" id="mostUsedCategory">Elektronik</div>
                            <div class="text-sm text-gray-300">Kategori Terpopuler</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-orange-400" id="categoryGrowth">+12%</div>
                            <div class="text-sm text-gray-300">Pertumbuhan Bulan Ini</div>
                        </div>
                    </div>
                </div>

                <div class="flex justify-end space-x-4 mt-8">
                    <button onclick="exportCategoryData()" class="glass-effect text-white px-6 py-3 rounded-2xl font-semibold hover:bg-white/30 transition-all">
                        üìä Export Data
                    </button>
                    <button onclick="closeCategoryTagModal()" class="btn-danger text-white px-6 py-3 rounded-2xl font-semibold">
                        ‚ùå Tutup
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Pricing & Discount Management Modal -->
    <div id="pricingDiscountModal" class="fixed inset-0 z-50 hidden modal-overlay flex items-center justify-center p-4">
        <div class="glass-effect rounded-3xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-y-auto">
            <div class="p-8">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-2xl font-bold" style="color: var(--text-primary)">üí∞ Pricing & Discount Management</h3>
                    <button onclick="closePricingDiscountModal()" class="p-2 hover:bg-white/20 rounded-xl transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Dynamic Pricing -->
                    <div class="glass-effect p-6 rounded-2xl">
                        <h4 class="text-xl font-bold mb-6 text-white">üìà Dynamic Pricing</h4>
                        
                        <!-- Pricing Rules -->
                        <div class="mb-6">
                            <div class="flex items-center justify-between mb-4">
                                <h5 class="font-semibold text-white">Aturan Pricing</h5>
                                <button onclick="addPricingRule()" class="btn-success text-white px-3 py-1 rounded-lg text-sm">‚ûï Tambah</button>
                            </div>
                            
                            <div class="space-y-3" id="pricingRulesList">
                                <div class="p-3 bg-white/10 rounded-xl">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-semibold text-sm">Volume Discount</span>
                                        <div class="flex space-x-1">
                                            <button class="p-1 text-blue-400 hover:bg-blue-100/20 rounded">‚úèÔ∏è</button>
                                            <button class="p-1 text-red-400 hover:bg-red-100/20 rounded">üóëÔ∏è</button>
                                        </div>
                                    </div>
                                    <div class="text-xs text-gray-300">
                                        <div>Kondisi: Pembelian ‚â• 10 unit</div>
                                        <div>Diskon: 5% otomatis</div>
                                        <div>Status: <span class="text-green-400">‚úÖ Aktif</span></div>
                                    </div>
                                </div>
                                
                                <div class="p-3 bg-white/10 rounded-xl">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-semibold text-sm">Member VIP</span>
                                        <div class="flex space-x-1">
                                            <button class="p-1 text-blue-400 hover:bg-blue-100/20 rounded">‚úèÔ∏è</button>
                                            <button class="p-1 text-red-400 hover:bg-red-100/20 rounded">üóëÔ∏è</button>
                                        </div>
                                    </div>
                                    <div class="text-xs text-gray-300">
                                        <div>Kondisi: Customer VIP</div>
                                        <div>Diskon: 15% semua produk</div>
                                        <div>Status: <span class="text-green-400">‚úÖ Aktif</span></div>
                                    </div>
                                </div>
                                
                                <div class="p-3 bg-white/10 rounded-xl">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-semibold text-sm">Flash Sale Weekend</span>
                                        <div class="flex space-x-1">
                                            <button class="p-1 text-blue-400 hover:bg-blue-100/20 rounded">‚úèÔ∏è</button>
                                            <button class="p-1 text-red-400 hover:bg-red-100/20 rounded">üóëÔ∏è</button>
                                        </div>
                                    </div>
                                    <div class="text-xs text-gray-300">
                                        <div>Kondisi: Sabtu-Minggu, 10:00-16:00</div>
                                        <div>Diskon: 20% kategori elektronik</div>
                                        <div>Status: <span class="text-orange-400">‚è∞ Terjadwal</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Price Optimization -->
                        <div class="mb-6">
                            <h5 class="font-semibold mb-4 text-white">üéØ Optimasi Harga</h5>
                            <div class="grid grid-cols-2 gap-4">
                                <div class="text-center p-3 bg-white/10 rounded-xl">
                                    <div class="text-lg font-bold text-green-400">32.5%</div>
                                    <div class="text-xs text-gray-300">Avg Margin</div>
                                </div>
                                <div class="text-center p-3 bg-white/10 rounded-xl">
                                    <div class="text-lg font-bold text-blue-400">4.2x</div>
                                    <div class="text-xs text-gray-300">Price Elasticity</div>
                                </div>
                                <div class="text-center p-3 bg-white/10 rounded-xl">
                                    <div class="text-lg font-bold text-purple-400">+8.5%</div>
                                    <div class="text-xs text-gray-300">Revenue Impact</div>
                                </div>
                                <div class="text-center p-3 bg-white/10 rounded-xl">
                                    <div class="text-lg font-bold text-orange-400">156</div>
                                    <div class="text-xs text-gray-300">Auto Adjustments</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Discount Management -->
                    <div class="glass-effect p-6 rounded-2xl">
                        <h4 class="text-xl font-bold mb-6 text-white">üéÅ Discount Management</h4>
                        
                        <!-- Active Discounts -->
                        <div class="mb-6">
                            <div class="flex items-center justify-between mb-4">
                                <h5 class="font-semibold text-white">Diskon Aktif</h5>
                                <button onclick="createNewDiscount()" class="btn-success text-white px-3 py-1 rounded-lg text-sm">‚ûï Buat Diskon</button>
                            </div>
                            
                            <div class="space-y-3" id="activeDiscountsList">
                                <div class="p-3 bg-gradient-to-r from-green-500/20 to-green-600/20 rounded-xl border border-green-400/30">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-semibold text-sm">WELCOME10</span>
                                        <div class="flex items-center space-x-2">
                                            <span class="px-2 py-1 bg-green-500 text-white rounded-full text-xs">10%</span>
                                            <button class="p-1 text-blue-400 hover:bg-blue-100/20 rounded">‚úèÔ∏è</button>
                                            <button class="p-1 text-red-400 hover:bg-red-100/20 rounded">üóëÔ∏è</button>
                                        </div>
                                    </div>
                                    <div class="text-xs text-gray-300">
                                        <div>Tipe: Percentage ‚Ä¢ Berlaku: Semua produk</div>
                                        <div>Digunakan: 45 kali ‚Ä¢ Sisa: 55 kali</div>
                                        <div>Expired: 31 Des 2024</div>
                                    </div>
                                </div>
                                
                                <div class="p-3 bg-gradient-to-r from-blue-500/20 to-blue-600/20 rounded-xl border border-blue-400/30">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-semibold text-sm">FLASH50</span>
                                        <div class="flex items-center space-x-2">
                                            <span class="px-2 py-1 bg-blue-500 text-white rounded-full text-xs">50K</span>
                                            <button class="p-1 text-blue-400 hover:bg-blue-100/20 rounded">‚úèÔ∏è</button>
                                            <button class="p-1 text-red-400 hover:bg-red-100/20 rounded">üóëÔ∏è</button>
                                        </div>
                                    </div>
                                    <div class="text-xs text-gray-300">
                                        <div>Tipe: Fixed Amount ‚Ä¢ Min: Rp 500K</div>
                                        <div>Digunakan: 23 kali ‚Ä¢ Sisa: Unlimited</div>
                                        <div>Expired: 25 Jan 2024</div>
                                    </div>
                                </div>
                                
                                <div class="p-3 bg-gradient-to-r from-purple-500/20 to-purple-600/20 rounded-xl border border-purple-400/30">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-semibold text-sm">LOYALTY25</span>
                                        <div class="flex items-center space-x-2">
                                            <span class="px-2 py-1 bg-purple-500 text-white rounded-full text-xs">25%</span>
                                            <button class="p-1 text-blue-400 hover:bg-blue-100/20 rounded">‚úèÔ∏è</button>
                                            <button class="p-1 text-red-400 hover:bg-red-100/20 rounded">üóëÔ∏è</button>
                                        </div>
                                    </div>
                                    <div class="text-xs text-gray-300">
                                        <div>Tipe: Member Only ‚Ä¢ Kategori: Elektronik</div>
                                        <div>Digunakan: 12 kali ‚Ä¢ Sisa: 88 kali</div>
                                        <div>Expired: 15 Feb 2024</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Discount Analytics -->
                        <div class="mb-6">
                            <h5 class="font-semibold mb-4 text-white">üìä Analytics Diskon</h5>
                            <div class="grid grid-cols-2 gap-4">
                                <div class="text-center p-3 bg-white/10 rounded-xl">
                                    <div class="text-lg font-bold text-green-400">Rp 2.5M</div>
                                    <div class="text-xs text-gray-300">Total Savings</div>
                                </div>
                                <div class="text-center p-3 bg-white/10 rounded-xl">
                                    <div class="text-lg font-bold text-blue-400">156</div>
                                    <div class="text-xs text-gray-300">Kode Digunakan</div>
                                </div>
                                <div class="text-center p-3 bg-white/10 rounded-xl">
                                    <div class="text-lg font-bold text-purple-400">68%</div>
                                    <div class="text-xs text-gray-300">Conversion Rate</div>
                                </div>
                                <div class="text-center p-3 bg-white/10 rounded-xl">
                                    <div class="text-lg font-bold text-orange-400">4.2</div>
                                    <div class="text-xs text-gray-300">Avg Usage/Customer</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Bulk Price Update -->
                <div class="mt-8 glass-effect p-6 rounded-2xl">
                    <h4 class="text-xl font-bold mb-4 text-white">‚ö° Bulk Price Update</h4>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <div>
                            <label class="block text-sm font-semibold mb-2 text-white">Kategori</label>
                            <select id="bulkPriceCategory" class="input-elegant w-full px-3 py-2 rounded-xl">
                                <option value="">Semua Kategori</option>
                                <option value="elektronik">üì± Elektronik</option>
                                <option value="fashion">üëï Fashion</option>
                                <option value="makanan">üçî Makanan</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold mb-2 text-white">Aksi</label>
                            <select id="bulkPriceAction" class="input-elegant w-full px-3 py-2 rounded-xl">
                                <option value="increase">Naikan (%)</option>
                                <option value="decrease">Turunkan (%)</option>
                                <option value="margin">Set Margin (%)</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold mb-2 text-white">Nilai</label>
                            <input type="number" id="bulkPriceValue" class="input-elegant w-full px-3 py-2 rounded-xl" placeholder="10">
                        </div>
                        <div class="flex items-end">
                            <button onclick="applyBulkPriceUpdate()" class="btn-primary text-white px-4 py-2 rounded-xl w-full">
                                üöÄ Terapkan
                            </button>
                        </div>
                    </div>
                </div>

                <div class="flex justify-end space-x-4 mt-8">
                    <button onclick="exportPricingData()" class="glass-effect text-white px-6 py-3 rounded-2xl font-semibold hover:bg-white/30 transition-all">
                        üìä Export Data
                    </button>
                    <button onclick="closePricingDiscountModal()" class="btn-danger text-white px-6 py-3 rounded-2xl font-semibold">
                        ‚ùå Tutup
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bulk Edit Modal -->
    <div id="bulkEditModal" class="fixed inset-0 z-50 hidden modal-overlay flex items-center justify-center p-4">
        <div class="glass-effect rounded-3xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto">
            <div class="p-8">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-2xl font-bold" style="color: var(--text-primary)">‚úèÔ∏è Edit Massal Produk</h3>
                    <button onclick="closeBulkEditModal()" class="p-2 hover:bg-white/20 rounded-xl transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <form id="bulkEditForm" onsubmit="handleBulkEdit(event)" class="space-y-6">
                    <!-- Product Selection -->
                    <div class="glass-effect p-6 rounded-2xl">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="text-lg font-semibold text-white">üì¶ Pilih Produk</h4>
                            <div class="text-sm text-gray-300">
                                Terpilih: <span id="selectedCount" class="font-bold text-blue-400">0</span> produk
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <label class="flex items-center space-x-3">
                                <input type="checkbox" id="selectAllProducts" onchange="selectAllProducts()" class="rounded">
                                <span class="font-semibold">Pilih Semua Produk</span>
                            </label>
                        </div>
                        
                        <div class="max-h-64 overflow-y-auto border border-gray-300 rounded-xl p-4">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3" id="bulkProductList">
                                <!-- Products will be populated here -->
                            </div>
                        </div>
                    </div>

                    <!-- Bulk Operations -->
                    <div class="glass-effect p-6 rounded-2xl">
                        <h4 class="text-lg font-semibold mb-4 text-white">‚öôÔ∏è Operasi Massal</h4>
                        
                        <div class="mb-4">
                            <label class="block text-sm font-semibold mb-2">Pilih Operasi</label>
                            <select id="bulkOperation" onchange="showBulkOperationFields()" class="input-elegant w-full px-4 py-3 rounded-xl">
                                <option value="">Pilih operasi...</option>
                                <option value="updatePrice">üí∞ Update Harga</option>
                                <option value="updateStock">üì¶ Update Stok</option>
                                <option value="updateCategory">üè∑Ô∏è Update Kategori</option>
                                <option value="updateStatus">üîÑ Update Status</option>
                                <option value="applyDiscount">üéØ Terapkan Diskon</option>
                            </select>
                        </div>

                        <!-- Price Update Fields -->
                        <div id="updatePriceFields" class="bulk-operation-field hidden space-y-4">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-semibold mb-2">Aksi Harga</label>
                                    <select id="priceAction" class="input-elegant w-full px-4 py-2 rounded-xl">
                                        <option value="increase">Naikan (%)</option>
                                        <option value="decrease">Turunkan (%)</option>
                                        <option value="set">Set Harga Tetap</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold mb-2">Nilai</label>
                                    <input type="number" id="priceValue" class="input-elegant w-full px-4 py-2 rounded-xl" placeholder="Masukkan nilai">
                                </div>
                            </div>
                        </div>

                        <!-- Stock Update Fields -->
                        <div id="updateStockFields" class="bulk-operation-field hidden space-y-4">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-semibold mb-2">Aksi Stok</label>
                                    <select id="stockAction" class="input-elegant w-full px-4 py-2 rounded-xl">
                                        <option value="add">Tambah Stok</option>
                                        <option value="subtract">Kurangi Stok</option>
                                        <option value="set">Set Stok Tetap</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold mb-2">Jumlah</label>
                                    <input type="number" id="stockValue" class="input-elegant w-full px-4 py-2 rounded-xl" placeholder="Masukkan jumlah">
                                </div>
                            </div>
                        </div>

                        <!-- Category Update Fields -->
                        <div id="updateCategoryFields" class="bulk-operation-field hidden">
                            <label class="block text-sm font-semibold mb-2">Kategori Baru</label>
                            <select id="newCategory" class="input-elegant w-full px-4 py-2 rounded-xl">
                                <option value="">Pilih kategori...</option>
                                <option value="elektronik">üì± Elektronik</option>
                                <option value="fashion">üëï Fashion</option>
                                <option value="makanan">üçî Makanan & Minuman</option>
                                <option value="kesehatan">üíä Kesehatan & Kecantikan</option>
                                <option value="rumah">üè† Rumah & Taman</option>
                                <option value="olahraga">‚öΩ Olahraga</option>
                                <option value="buku">üìö Buku & Media</option>
                                <option value="mainan">üß∏ Mainan & Hobi</option>
                            </select>
                        </div>

                        <!-- Status Update Fields -->
                        <div id="updateStatusFields" class="bulk-operation-field hidden">
                            <label class="block text-sm font-semibold mb-2">Status Baru</label>
                            <select id="newStatus" class="input-elegant w-full px-4 py-2 rounded-xl">
                                <option value="">Pilih status...</option>
                                <option value="active">‚úÖ Aktif</option>
                                <option value="inactive">‚ùå Tidak Aktif</option>
                                <option value="draft">üìù Draft</option>
                            </select>
                        </div>

                        <!-- Discount Fields -->
                        <div id="applyDiscountFields" class="bulk-operation-field hidden">
                            <label class="block text-sm font-semibold mb-2">Persentase Diskon (%)</label>
                            <input type="number" id="discountValue" min="0" max="100" class="input-elegant w-full px-4 py-2 rounded-xl" placeholder="Masukkan persentase diskon">
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex space-x-4">
                        <button type="submit" class="btn-success flex-1 text-white font-bold py-4 px-6 rounded-2xl">
                            ‚úÖ Terapkan Perubahan
                        </button>
                        <button type="button" onclick="closeBulkEditModal()" class="btn-danger flex-1 text-white font-bold py-4 px-6 rounded-2xl">
                            ‚ùå Batal
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Payment Modal -->
    <div id="paymentModal" class="fixed inset-0 z-50 hidden modal-overlay flex items-center justify-center p-4">
        <div class="glass-effect rounded-3xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto">
            <div class="p-8">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-2xl font-bold" style="color: var(--text-primary)">üí≥ Pembayaran</h3>
                    <button onclick="closePaymentModal()" class="p-2 hover:bg-white/20 rounded-xl transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <div class="space-y-6">
                    <!-- Payment Summary -->
                    <div class="glass-effect p-4 rounded-2xl text-center">
                        <p class="text-lg font-semibold mb-2">Total Pembayaran</p>
                        <p class="text-3xl font-bold text-green-600" id="paymentTotal">Rp 0</p>
                        <div class="text-sm text-gray-600 mt-2">
                            <span>Subtotal: <span id="paymentSubtotal">Rp 0</span></span>
                            <span class="mx-2">|</span>
                            <span>Diskon: <span id="paymentDiscount">Rp 0</span></span>
                            <span class="mx-2">|</span>
                            <span>Pajak: <span id="paymentTax">Rp 0</span></span>
                        </div>
                    </div>

                    <!-- Payment Methods -->
                    <div>
                        <label class="block text-sm font-semibold mb-3" style="color: var(--text-primary)">Pilih Metode Pembayaran</label>
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                            <button onclick="selectPaymentMethod('cash')" class="payment-method-btn glass-effect p-4 rounded-2xl text-center hover:bg-white/30 transition-all" data-method="cash">
                                <div class="text-3xl mb-2">üíµ</div>
                                <div class="text-sm font-semibold">Tunai</div>
                            </button>
                            <button onclick="selectPaymentMethod('debit')" class="payment-method-btn glass-effect p-4 rounded-2xl text-center hover:bg-white/30 transition-all" data-method="debit">
                                <div class="text-3xl mb-2">üí≥</div>
                                <div class="text-sm font-semibold">Kartu Debit</div>
                            </button>
                            <button onclick="selectPaymentMethod('credit')" class="payment-method-btn glass-effect p-4 rounded-2xl text-center hover:bg-white/30 transition-all" data-method="credit">
                                <div class="text-3xl mb-2">üíé</div>
                                <div class="text-sm font-semibold">Kartu Kredit</div>
                            </button>
                            <button onclick="selectPaymentMethod('qris')" class="payment-method-btn glass-effect p-4 rounded-2xl text-center hover:bg-white/30 transition-all" data-method="qris">
                                <div class="text-3xl mb-2">üì±</div>
                                <div class="text-sm font-semibold">QRIS</div>
                            </button>
                            <button onclick="selectPaymentMethod('gopay')" class="payment-method-btn glass-effect p-4 rounded-2xl text-center hover:bg-white/30 transition-all" data-method="gopay">
                                <div class="text-3xl mb-2">üü¢</div>
                                <div class="text-sm font-semibold">GoPay</div>
                            </button>
                            <button onclick="selectPaymentMethod('ovo')" class="payment-method-btn glass-effect p-4 rounded-2xl text-center hover:bg-white/30 transition-all" data-method="ovo">
                                <div class="text-3xl mb-2">üü£</div>
                                <div class="text-sm font-semibold">OVO</div>
                            </button>
                            <button onclick="selectPaymentMethod('dana')" class="payment-method-btn glass-effect p-4 rounded-2xl text-center hover:bg-white/30 transition-all" data-method="dana">
                                <div class="text-3xl mb-2">üîµ</div>
                                <div class="text-sm font-semibold">DANA</div>
                            </button>
                            <button onclick="selectPaymentMethod('shopeepay')" class="payment-method-btn glass-effect p-4 rounded-2xl text-center hover:bg-white/30 transition-all" data-method="shopeepay">
                                <div class="text-3xl mb-2">üü†</div>
                                <div class="text-sm font-semibold">ShopeePay</div>
                            </button>
                            <button onclick="selectPaymentMethod('linkaja')" class="payment-method-btn glass-effect p-4 rounded-2xl text-center hover:bg-white/30 transition-all" data-method="linkaja">
                                <div class="text-3xl mb-2">üî¥</div>
                                <div class="text-sm font-semibold">LinkAja</div>
                            </button>
                            <button onclick="selectPaymentMethod('bca')" class="payment-method-btn glass-effect p-4 rounded-2xl text-center hover:bg-white/30 transition-all" data-method="bca">
                                <div class="text-3xl mb-2">üè¶</div>
                                <div class="text-sm font-semibold">BCA</div>
                            </button>
                            <button onclick="selectPaymentMethod('mandiri')" class="payment-method-btn glass-effect p-4 rounded-2xl text-center hover:bg-white/30 transition-all" data-method="mandiri">
                                <div class="text-3xl mb-2">üèõÔ∏è</div>
                                <div class="text-sm font-semibold">Mandiri</div>
                            </button>
                            <button onclick="selectPaymentMethod('bni')" class="payment-method-btn glass-effect p-4 rounded-2xl text-center hover:bg-white/30 transition-all" data-method="bni">
                                <div class="text-3xl mb-2">üè¢</div>
                                <div class="text-sm font-semibold">BNI</div>
                            </button>
                        </div>
                    </div>

                    <!-- Payment Details -->
                    <div id="paymentDetails" class="hidden">
                        <div id="cashPayment" class="payment-detail hidden">
                            <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Jumlah Bayar Tunai</label>
                            <input type="number" id="cashAmount" class="input-elegant w-full px-4 py-3 rounded-2xl" placeholder="Masukkan jumlah bayar">
                            <div class="grid grid-cols-3 gap-2 mt-3">
                                <button onclick="setCashAmount('exact')" class="glass-effect px-3 py-2 rounded-xl text-sm hover:bg-white/30 transition-all">Pas</button>
                                <button onclick="setCashAmount('round')" class="glass-effect px-3 py-2 rounded-xl text-sm hover:bg-white/30 transition-all">Bulatkan</button>
                                <button onclick="setCashAmount('custom')" class="glass-effect px-3 py-2 rounded-xl text-sm hover:bg-white/30 transition-all">Custom</button>
                            </div>
                            <div id="changeAmount" class="hidden mt-4 p-3 bg-green-100 rounded-xl">
                                <p class="text-sm text-green-800">Kembalian:</p>
                                <p class="text-xl font-bold text-green-600" id="changeValue">Rp 0</p>
                            </div>
                        </div>

                        <div id="cardPayment" class="payment-detail hidden">
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Nomor Kartu</label>
                                    <input type="text" id="cardNumber" class="input-elegant w-full px-4 py-3 rounded-2xl" placeholder="1234 5678 9012 3456" maxlength="19">
                                </div>
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Expired</label>
                                        <input type="text" id="cardExpiry" class="input-elegant w-full px-4 py-3 rounded-2xl" placeholder="MM/YY" maxlength="5">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">CVV</label>
                                        <input type="text" id="cardCvv" class="input-elegant w-full px-4 py-3 rounded-2xl" placeholder="123" maxlength="4">
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Nama Pemegang Kartu</label>
                                    <input type="text" id="cardHolder" class="input-elegant w-full px-4 py-3 rounded-2xl" placeholder="JOHN DOE">
                                </div>
                            </div>
                        </div>

                        <div id="digitalPayment" class="payment-detail hidden">
                            <div class="text-center">
                                <div class="w-48 h-48 mx-auto bg-white rounded-2xl flex items-center justify-center mb-4">
                                    <div id="qrCode" class="text-6xl">üì±</div>
                                </div>
                                <p class="text-sm text-gray-600 mb-2">Scan QR Code dengan aplikasi <span id="selectedApp">digital wallet</span></p>
                                <p class="text-xs text-gray-500">Atau masukkan nomor HP untuk notifikasi pembayaran</p>
                                <input type="tel" id="phoneNumber" class="input-elegant w-full px-4 py-3 rounded-2xl mt-3" placeholder="08123456789">
                            </div>
                        </div>

                        <div id="bankTransfer" class="payment-detail hidden">
                            <div class="space-y-4">
                                <div class="glass-effect p-4 rounded-2xl">
                                    <h4 class="font-semibold mb-2">Informasi Transfer</h4>
                                    <div class="space-y-2 text-sm">
                                        <div class="flex justify-between">
                                            <span>Bank:</span>
                                            <span id="bankName">-</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span>No. Rekening:</span>
                                            <span id="accountNumber">-</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span>Atas Nama:</span>
                                            <span>ELITEPOS STORE</span>
                                        </div>
                                        <div class="flex justify-between font-bold">
                                            <span>Jumlah Transfer:</span>
                                            <span id="transferAmount">Rp 0</span>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold mb-2" style="color: var(--text-primary)">Nama Pengirim</label>
                                    <input type="text" id="senderName" class="input-elegant w-full px-4 py-3 rounded-2xl" placeholder="Nama sesuai rekening">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Split Payment -->
                    <div class="border-t pt-4">
                        <div class="flex items-center justify-between mb-3">
                            <label class="text-sm font-semibold" style="color: var(--text-primary)">Split Payment</label>
                            <label class="toggle-switch">
                                <input type="checkbox" id="splitPayment" onchange="toggleSplitPayment()">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div id="splitPaymentDetails" class="hidden space-y-3">
                            <div class="grid grid-cols-2 gap-3">
                                <div>
                                    <label class="block text-xs font-semibold mb-1">Metode 1</label>
                                    <select id="splitMethod1" class="input-elegant w-full px-3 py-2 rounded-xl text-sm">
                                        <option value="cash">Tunai</option>
                                        <option value="card">Kartu</option>
                                        <option value="digital">Digital</option>
                                    </select>
                                    <input type="number" id="splitAmount1" class="input-elegant w-full px-3 py-2 rounded-xl text-sm mt-1" placeholder="Jumlah">
                                </div>
                                <div>
                                    <label class="block text-xs font-semibold mb-1">Metode 2</label>
                                    <select id="splitMethod2" class="input-elegant w-full px-3 py-2 rounded-xl text-sm">
                                        <option value="cash">Tunai</option>
                                        <option value="card">Kartu</option>
                                        <option value="digital">Digital</option>
                                    </select>
                                    <input type="number" id="splitAmount2" class="input-elegant w-full px-3 py-2 rounded-xl text-sm mt-1" placeholder="Jumlah">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex space-x-4">
                        <button onclick="processPayment()" class="btn-success flex-1 text-white font-bold py-4 px-6 rounded-2xl">
                            ‚úÖ Proses Pembayaran
                        </button>
                        <button onclick="closePaymentModal()" class="btn-danger flex-1 text-white font-bold py-4 px-6 rounded-2xl">
                            ‚ùå Batal
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentUser = null;
        let currentRole = null;
        let loginTime = null;
        let isDarkMode = false;
        let cart = [];
        let currentDiscount = { type: null, value: 0, description: '' };
        let selectedPaymentMethod = null;
        let users = [
            { id: 1, fullName: 'Admin System', username: 'admin', email: 'admin@elitepos.com', phone: '08123456789', role: 'admin', status: 'active', lastLogin: '2024-01-15 09:30:00' },
            { id: 2, fullName: 'Manager Store', username: 'manager', email: 'manager@elitepos.com', phone: '08123456788', role: 'manager', status: 'active', lastLogin: '2024-01-15 08:45:00' },
            { id: 3, fullName: 'Kasir Satu', username: 'kasir1', email: 'kasir1@elitepos.com', phone: '08123456787', role: 'cashier', status: 'active', lastLogin: '2024-01-15 07:15:00' },
            { id: 4, fullName: 'Kasir Dua', username: 'kasir2', email: 'kasir2@elitepos.com', phone: '08123456786', role: 'cashier', status: 'inactive', lastLogin: '2024-01-14 16:30:00' }
        ];

        let products = [
            { id: 1, name: 'iPhone 15 Pro', category: 'elektronik', price: 18999000, stock: 25, status: 'active', image: 'üì±' },
            { id: 2, name: 'MacBook Air M3', category: 'elektronik', price: 16999000, stock: 15, status: 'active', image: 'üíª' },
            { id: 3, name: 'AirPods Pro', category: 'elektronik', price: 3999000, stock: 50, status: 'active', image: 'üéß' },
            { id: 4, name: 'Samsung Galaxy S24', category: 'elektronik', price: 12999000, stock: 30, status: 'active', image: 'üì±' },
            { id: 5, name: 'iPad Pro', category: 'elektronik', price: 15999000, stock: 20, status: 'active', image: 'üì±' },
            { id: 6, name: 'Apple Watch', category: 'elektronik', price: 5999000, stock: 35, status: 'active', image: '‚åö' },
            { id: 7, name: 'Nike Air Max', category: 'fashion', price: 2499000, stock: 40, status: 'active', image: 'üëü' },
            { id: 8, name: 'Adidas Ultraboost', category: 'fashion', price: 2799000, stock: 25, status: 'active', image: 'üëü' }
        ];

        // Discount codes database
        let discountCodes = {
            'WELCOME10': { type: 'percentage', value: 10, description: 'Welcome Discount 10%' },
            'SAVE20': { type: 'percentage', value: 20, description: 'Save 20% Discount' },
            'NEWUSER': { type: 'percentage', value: 15, description: 'New User Discount 15%' },
            'FLASH50': { type: 'fixed', value: 50000, description: 'Flash Sale 50K Off' },
            'MEGA100': { type: 'fixed', value: 100000, description: 'Mega Sale 100K Off' },
            'STUDENT': { type: 'percentage', value: 12, description: 'Student Discount 12%' },
            'WEEKEND': { type: 'percentage', value: 8, description: 'Weekend Special 8%' },
            'LOYALTY25': { type: 'percentage', value: 25, description: 'Loyalty Member 25%' }
        };

        // Payment method configurations
        let paymentMethods = {
            cash: { name: 'Tunai', icon: 'üíµ', requiresInput: true },
            debit: { name: 'Kartu Debit', icon: 'üí≥', requiresInput: true },
            credit: { name: 'Kartu Kredit', icon: 'üíé', requiresInput: true },
            qris: { name: 'QRIS', icon: 'üì±', requiresInput: false },
            gopay: { name: 'GoPay', icon: 'üü¢', requiresInput: false },
            ovo: { name: 'OVO', icon: 'üü£', requiresInput: false },
            dana: { name: 'DANA', icon: 'üîµ', requiresInput: false },
            shopeepay: { name: 'ShopeePay', icon: 'üü†', requiresInput: false },
            linkaja: { name: 'LinkAja', icon: 'üî¥', requiresInput: false },
            bca: { name: 'BCA Transfer', icon: 'üè¶', account: '1234567890' },
            mandiri: { name: 'Mandiri Transfer', icon: 'üèõÔ∏è', account: '0987654321' },
            bni: { name: 'BNI Transfer', icon: 'üè¢', account: '5555666677' }
        };

        // Initialize application
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, initializing app...');
            
            // Setup event listeners first
            setupEventListeners();
            
            // Initialize other components
            updateDateTime();
            setInterval(updateDateTime, 1000);
            populateUserTable();
            updateUserStats();
            populateProductGrid();
            populateProductTable();
            populateBulkProductList();
            
            // Debug login
            debugLogin();
            
            // Debug delete function
            console.log('Delete function available:', typeof deleteProduct);
            
            console.log('App initialization complete');
        });

        // Global debug function to test delete
        window.testDelete = function(id) {
            console.log('Testing delete for ID:', id);
            deleteProduct(id);
        };

        // Make sure deleteProduct is globally accessible
        window.deleteProduct = deleteProduct;

        function updateFileName() {
            const fileInput = document.getElementById('importFile');
            const fileName = document.getElementById('fileName');
            
            if (fileInput.files.length > 0) {
                const file = fileInput.files[0];
                fileName.textContent = `File terpilih: ${file.name} (${(file.size / 1024 / 1024).toFixed(2)} MB)`;
                fileName.classList.remove('text-gray-600');
                fileName.classList.add('text-green-600', 'font-semibold');
            } else {
                fileName.textContent = '';
            }
        }

        function populateBulkProductList() {
            const container = document.getElementById('bulkProductList');
            if (!container) return;
            
            container.innerHTML = '';
            
            products.forEach(product => {
                const productItem = document.createElement('label');
                productItem.className = 'flex items-center space-x-3 p-3 border border-gray-300 rounded-xl hover:bg-white/10 transition-colors cursor-pointer';
                productItem.innerHTML = `
                    <input type="checkbox" name="bulkProducts" value="${product.id}" onchange="updateBulkSelection()" class="rounded">
                    <div class="flex items-center space-x-3 flex-1">
                        <span class="text-2xl">${product.image}</span>
                        <div class="flex-1">
                            <div class="font-semibold text-sm">${product.name}</div>
                            <div class="text-xs text-gray-600">${product.category} ‚Ä¢ Rp ${product.price.toLocaleString()}</div>
                        </div>
                    </div>
                `;
                container.appendChild(productItem);
            });
        }

        function setupEventListeners() {
            // Login form
            const loginForm = document.getElementById('loginForm');
            if (loginForm) {
                loginForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    handleLogin(e);
                });
            }
            
            // Add user form
            const addUserForm = document.getElementById('addUserForm');
            if (addUserForm) {
                addUserForm.addEventListener('submit', handleAddUser);
            }
            
            // Add product form
            const addProductForm = document.getElementById('addProductForm');
            if (addProductForm) {
                addProductForm.addEventListener('submit', handleAddProduct);
            }
            
            // Edit product form
            const editProductForm = document.getElementById('editProductForm');
            if (editProductForm) {
                editProductForm.addEventListener('submit', handleEditProduct);
            }
            
            // Auto-calculate profit margin
            const costPriceInput = document.getElementById('productCostPrice');
            const sellPriceInput = document.getElementById('productSellPrice');
            if (costPriceInput && sellPriceInput) {
                costPriceInput.addEventListener('input', calculateProfitMargin);
                sellPriceInput.addEventListener('input', calculateProfitMargin);
            }
            
            // Search and filter
            const userSearch = document.getElementById('userSearch');
            if (userSearch) {
                userSearch.addEventListener('input', filterUsers);
            }
            
            const roleFilter = document.getElementById('roleFilter');
            if (roleFilter) {
                roleFilter.addEventListener('change', filterUsers);
            }
            
            // Product search
            const productSearch = document.getElementById('productSearch');
            if (productSearch) {
                productSearch.addEventListener('input', filterProducts);
            }
            
            const categoryFilter = document.getElementById('categoryFilter');
            if (categoryFilter) {
                categoryFilter.addEventListener('change', filterProducts);
            }
            
            // Payment amount calculation
            const paymentAmount = document.getElementById('paymentAmount');
            if (paymentAmount) {
                paymentAmount.addEventListener('input', calculateChange);
            }
            
            // Menu toggle
            const menuToggle = document.getElementById('menuToggle');
            if (menuToggle) {
                menuToggle.addEventListener('click', toggleSidebar);
            }
            
            const overlay = document.getElementById('overlay');
            if (overlay) {
                overlay.addEventListener('click', closeSidebar);
            }
        }

        // Demo accounts
        const demoAccounts = {
            'admin': { password: 'admin123', role: 'admin', fullName: 'Administrator' },
            'manager': { password: 'manager123', role: 'manager', fullName: 'Manager Store' },
            'kasir': { password: 'kasir123', role: 'cashier', fullName: 'Kasir Utama' }
        };

        // Debug function for login
        function debugLogin() {
            console.log('Demo accounts:', demoAccounts);
            console.log('Login form exists:', !!document.getElementById('loginForm'));
        }

        // Login functionality
        function handleLogin(e) {
            console.log('handleLogin called');
            e.preventDefault();
            
            const username = document.getElementById('loginUsername').value.trim();
            const password = document.getElementById('loginPassword').value.trim();
            const role = document.getElementById('loginRole').value;
            
            console.log('Login attempt:', { username, password, role });
            
            // Validate required fields
            if (!username || !password || !role) {
                alert('Mohon lengkapi semua field login');
                return false;
            }
            
            // Check demo accounts
            const demoAccount = demoAccounts[username.toLowerCase()];
            console.log('Demo account found:', demoAccount);
            
            if (demoAccount && demoAccount.password === password && demoAccount.role === role) {
                console.log('Login successful');
                
                // Valid demo account
                currentUser = demoAccount.fullName;
                currentRole = role;
                loginTime = new Date();
                
                // Update UI
                document.getElementById('currentUser').textContent = currentUser;
                document.getElementById('currentRole').textContent = role.toUpperCase();
                document.getElementById('sidebarCurrentUser').textContent = currentUser;
                document.getElementById('sidebarCurrentRole').textContent = role.toUpperCase();
                document.getElementById('sidebarLoginTime').textContent = loginTime.toLocaleString();
                
                // Show main app
                document.getElementById('loginScreen').classList.add('hidden');
                document.getElementById('mainApp').classList.remove('hidden');
                
                // Show success notification
                setTimeout(() => {
                    alert('Login berhasil! Selamat datang ' + currentUser);
                }, 100);
                
                return false;
            } else {
                console.log('Login failed');
                alert('Username, password, atau role tidak valid. Silakan gunakan akun demo yang tersedia.');
                return false;
            }
        }

        // Notification system
        function showNotification(message, type = 'info') {
            // Simple alert for now - can be enhanced later
            alert(message);
        }

        function togglePassword() {
            const passwordField = document.getElementById('loginPassword');
            const toggleIcon = document.getElementById('passwordToggleIcon');
            
            if (passwordField.type === 'password') {
                passwordField.type = 'text';
                toggleIcon.textContent = 'üôà';
            } else {
                passwordField.type = 'password';
                toggleIcon.textContent = 'üëÅÔ∏è';
            }
        }

        function showForgotPassword() {
            showNotification('Fitur reset password akan segera tersedia', 'info');
        }

        // Dark mode toggle
        function toggleDarkMode() {
            isDarkMode = !isDarkMode;
            document.body.classList.toggle('dark-mode');
            document.getElementById('darkModeIcon').textContent = isDarkMode ? '‚òÄÔ∏è' : 'üåô';
            showNotification(isDarkMode ? 'Dark mode diaktifkan' : 'Light mode diaktifkan', 'info');
        }

        // Notification toggle
        function toggleNotifications() {
            const dropdown = document.getElementById('notificationDropdown');
            dropdown.classList.toggle('hidden');
            
            // Close dropdown when clicking outside
            if (!dropdown.classList.contains('hidden')) {
                setTimeout(() => {
                    document.addEventListener('click', function closeDropdown(e) {
                        if (!e.target.closest('#notificationDropdown') && !e.target.closest('button[onclick="toggleNotifications()"]')) {
                            dropdown.classList.add('hidden');
                            document.removeEventListener('click', closeDropdown);
                        }
                    });
                }, 100);
            }
        }

        function markAllAsRead() {
            document.getElementById('notificationCount').textContent = '0';
            document.getElementById('notificationCount').style.display = 'none';
            
            // Remove red dots from notifications
            const redDots = document.querySelectorAll('.notification-item .bg-red-500, .notification-item .bg-green-500, .notification-item .bg-blue-500');
            redDots.forEach(dot => dot.style.display = 'none');
            
            showNotification('Semua notifikasi telah ditandai sebagai dibaca', 'success');
            document.getElementById('notificationDropdown').classList.add('hidden');
        }

        function clearAllNotifications() {
            if (confirm('üóëÔ∏è HAPUS SEMUA NOTIFIKASI\n\nApakah Anda yakin ingin menghapus semua notifikasi?\n\n‚ö†Ô∏è Tindakan ini tidak dapat dibatalkan.')) {
                // Hide notification badge
                const notificationBadge = document.getElementById('notificationCount');
                notificationBadge.textContent = '0';
                notificationBadge.style.display = 'none';
                
                // Clear all notification content and show empty state
                const notificationContainer = document.querySelector('#notificationDropdown .p-2');
                notificationContainer.innerHTML = `
                    <div class="p-8 text-center text-gray-500">
                        <div class="text-6xl mb-4">üì≠</div>
                        <h3 class="text-lg font-semibold mb-2">Tidak Ada Notifikasi</h3>
                        <p class="text-sm">Semua notifikasi telah dihapus</p>
                        <div class="mt-4 text-xs text-gray-400">
                            Notifikasi baru akan muncul di sini
                        </div>
                    </div>
                `;
                
                // Update header text
                const headerText = document.querySelector('#notificationDropdown .border-b p');
                if (headerText) {
                    headerText.textContent = 'Tidak ada notifikasi';
                }
                
                // Show success message
                setTimeout(() => {
                    alert('‚úÖ BERHASIL DIHAPUS\n\nSemua notifikasi telah dihapus dari sistem.\n\nüìä Status:\n‚Ä¢ Total notifikasi dihapus: 5\n‚Ä¢ Waktu: ' + new Date().toLocaleString() + '\n‚Ä¢ User: ' + (currentUser || 'System'));
                }, 100);
                
                // Close dropdown
                document.getElementById('notificationDropdown').classList.add('hidden');
                
                console.log('‚úÖ All notifications cleared by user:', currentUser);
            } else {
                console.log('‚ùå Clear all notifications cancelled by user');
            }
        }

        // Navigation functions
        function showSection(sectionName) {
            // Hide all sections
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => {
                section.classList.add('hidden');
            });
            
            // Show selected section
            const targetSection = document.getElementById(sectionName + 'Section');
            if (targetSection) {
                targetSection.classList.remove('hidden');
            }
            
            // Update active nav button
            const navButtons = document.querySelectorAll('.nav-btn');
            navButtons.forEach(btn => {
                btn.classList.remove('nav-btn-active');
            });
            
            // Close sidebar on mobile
            closeSidebar();
        }

        // Sidebar functions
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('overlay');
            
            if (sidebar.classList.contains('sidebar-hidden')) {
                sidebar.classList.remove('sidebar-hidden');
                overlay.classList.remove('hidden');
            } else {
                sidebar.classList.add('sidebar-hidden');
                overlay.classList.add('hidden');
            }
        }

        function closeSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('overlay');
            
            sidebar.classList.add('sidebar-hidden');
            overlay.classList.add('hidden');
        }

        // Logout function
        function confirmLogout() {
            if (confirm('Apakah Anda yakin ingin logout?')) {
                logout();
            }
        }

        function logout() {
            currentUser = null;
            currentRole = null;
            loginTime = null;
            
            // Show login screen
            document.getElementById('loginScreen').classList.remove('hidden');
            document.getElementById('mainApp').classList.add('hidden');
            
            // Clear form
            document.getElementById('loginForm').reset();
            
            showNotification('Logout berhasil', 'success');
        }

        // Product management
        function populateProductGrid() {
            const grid = document.getElementById('productGrid');
            grid.innerHTML = '';
            
            products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card glass-effect p-4 rounded-2xl text-center';
                productCard.innerHTML = `
                    <div class="text-4xl mb-3">${product.image}</div>
                    <h4 class="font-semibold text-sm mb-2" style="color: var(--text-primary)">${product.name}</h4>
                    <p class="text-xs text-gray-600 mb-2">${product.category}</p>
                    <p class="font-bold text-green-600 mb-3">Rp ${product.price.toLocaleString()}</p>
                    <p class="text-xs text-gray-500 mb-3">Stok: ${product.stock}</p>
                    <button onclick="addToCart(${product.id})" class="btn-primary w-full text-white text-xs py-2 px-3 rounded-xl">
                        Tambah ke Keranjang
                    </button>
                `;
                grid.appendChild(productCard);
            });
        }

        function populateProductTable() {
            console.log('üîÑ populateProductTable called, products count:', products.length);
            
            const tbody = document.getElementById('productTableBody');
            if (!tbody) {
                console.error('‚ùå productTableBody element not found');
                return;
            }
            
            tbody.innerHTML = '';
            
            if (products.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="6" class="py-8 text-center text-gray-500">
                            <div class="text-4xl mb-2">üì¶</div>
                            <div>Tidak ada produk yang tersedia</div>
                        </td>
                    </tr>
                `;
                return;
            }
            
            products.forEach((product, index) => {
                console.log(`üì¶ Creating row for product ${index + 1}:`, product.name, 'ID:', product.id);
                
                const row = document.createElement('tr');
                row.className = 'border-b border-gray-100 hover:bg-white/10 transition-colors';
                row.setAttribute('data-product-id', product.id);
                
                const statusBadge = product.status === 'active' 
                    ? '<span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-semibold">Aktif</span>'
                    : '<span class="px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs font-semibold">Tidak Aktif</span>';
                
                const stockStatus = product.stock <= (product.minStock || 10) ? 'text-red-600' : 'text-green-600';
                const stockWarning = product.stock <= (product.minStock || 10) ? '‚ö†Ô∏è ' : '';
                
                row.innerHTML = `
                    <td class="py-4 px-4">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                                <span class="text-xl">${product.image}</span>
                            </div>
                            <div>
                                <div class="font-semibold text-gray-800">${product.name}</div>
                                <div class="text-sm text-gray-600">SKU: ${product.sku || product.id}</div>
                            </div>
                        </div>
                    </td>
                    <td class="py-4 px-4">
                        <span class="px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-semibold">${product.category.toUpperCase()}</span>
                    </td>
                    <td class="py-4 px-4">
                        <div class="font-bold text-green-600">Rp ${product.price.toLocaleString()}</div>
                        ${product.discount > 0 ? `<div class="text-xs text-orange-600">Diskon ${product.discount}%</div>` : ''}
                    </td>
                    <td class="py-4 px-4">
                        <div class="font-semibold ${stockStatus}">${stockWarning}${product.stock} ${product.unit || 'pcs'}</div>
                        ${product.minStock ? `<div class="text-xs text-gray-500">Min: ${product.minStock}</div>` : ''}
                    </td>
                    <td class="py-4 px-4">${statusBadge}</td>
                    <td class="py-4 px-4">
                        <div class="flex space-x-1">
                            <button onclick="editProduct(${product.id})" class="p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors" title="Edit Produk">
                                ‚úèÔ∏è
                            </button>
                            <button onclick="duplicateProduct(${product.id})" class="p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors" title="Duplikasi Produk">
                                üìã
                            </button>
                            <button onclick="toggleProductStatus(${product.id})" class="p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors" title="${product.status === 'active' ? 'Nonaktifkan' : 'Aktifkan'}">
                                ${product.status === 'active' ? 'üîí' : 'üîì'}
                            </button>
                            <button onclick="window.deleteProduct(${product.id})" class="px-3 py-1 bg-red-500 hover:bg-red-600 text-white text-xs rounded-lg transition-colors font-semibold" title="Hapus Produk">
                                Hapus Produk
                            </button>
                        </div>
                    </td>
                `;
                
                tbody.appendChild(row);
            });
            
            console.log('‚úÖ Product table populated with', products.length, 'products');
        }

        function filterProductTable() {
            const searchTerm = document.getElementById('productTableSearch').value.toLowerCase();
            const categoryFilter = document.getElementById('productTableCategory').value;
            
            const filteredProducts = products.filter(product => {
                const matchesSearch = product.name.toLowerCase().includes(searchTerm) || 
                                    (product.sku && product.sku.toLowerCase().includes(searchTerm)) ||
                                    (product.brand && product.brand.toLowerCase().includes(searchTerm));
                const matchesCategory = !categoryFilter || product.category === categoryFilter;
                return matchesSearch && matchesCategory;
            });
            
            const tbody = document.getElementById('productTableBody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            if (filteredProducts.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="6" class="py-8 text-center text-gray-500">
                            <div class="text-4xl mb-2">üì¶</div>
                            <div>Tidak ada produk yang ditemukan</div>
                        </td>
                    </tr>
                `;
                return;
            }
            
            filteredProducts.forEach(product => {
                const row = document.createElement('tr');
                row.className = 'border-b border-gray-100 hover:bg-white/10 transition-colors';
                
                const statusBadge = product.status === 'active' 
                    ? '<span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-semibold">Aktif</span>'
                    : '<span class="px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs font-semibold">Tidak Aktif</span>';
                
                const stockStatus = product.stock <= (product.minStock || 10) ? 'text-red-600' : 'text-green-600';
                const stockWarning = product.stock <= (product.minStock || 10) ? '‚ö†Ô∏è ' : '';
                
                row.innerHTML = `
                    <td class="py-4 px-4">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                                <span class="text-xl">${product.image}</span>
                            </div>
                            <div>
                                <div class="font-semibold text-gray-800">${product.name}</div>
                                <div class="text-sm text-gray-600">SKU: ${product.sku || product.id}</div>
                            </div>
                        </div>
                    </td>
                    <td class="py-4 px-4">
                        <span class="px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-semibold">${product.category.toUpperCase()}</span>
                    </td>
                    <td class="py-4 px-4">
                        <div class="font-bold text-green-600">Rp ${product.price.toLocaleString()}</div>
                        ${product.discount > 0 ? `<div class="text-xs text-orange-600">Diskon ${product.discount}%</div>` : ''}
                    </td>
                    <td class="py-4 px-4">
                        <div class="font-semibold ${stockStatus}">${stockWarning}${product.stock} ${product.unit || 'pcs'}</div>
                        ${product.minStock ? `<div class="text-xs text-gray-500">Min: ${product.minStock}</div>` : ''}
                    </td>
                    <td class="py-4 px-4">${statusBadge}</td>
                    <td class="py-4 px-4">
                        <div class="flex space-x-1">
                            <button onclick="editProduct(${product.id})" class="p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors" title="Edit Produk">
                                ‚úèÔ∏è
                            </button>
                            <button onclick="duplicateProduct(${product.id})" class="p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors" title="Duplikasi Produk">
                                üìã
                            </button>
                            <button onclick="toggleProductStatus(${product.id})" class="p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors" title="${product.status === 'active' ? 'Nonaktifkan' : 'Aktifkan'}">
                                ${product.status === 'active' ? 'üîí' : 'üîì'}
                            </button>
                            <button onclick="deleteProduct(${product.id})" class="px-3 py-1 bg-red-500 hover:bg-red-600 text-white text-xs rounded-lg transition-colors font-semibold" title="Hapus Produk">
                                Hapus Produk
                            </button>

                        </div>
                    </td>
                `;
                
                tbody.appendChild(row);
            });
        }

        function filterProducts() {
            const searchTerm = document.getElementById('productSearch').value.toLowerCase();
            const categoryFilter = document.getElementById('categoryFilter').value;
            
            const filteredProducts = products.filter(product => {
                const matchesSearch = product.name.toLowerCase().includes(searchTerm);
                const matchesCategory = !categoryFilter || product.category === categoryFilter;
                return matchesSearch && matchesCategory;
            });
            
            // Update product grid
            const grid = document.getElementById('productGrid');
            grid.innerHTML = '';
            
            filteredProducts.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card glass-effect p-4 rounded-2xl text-center';
                productCard.innerHTML = `
                    <div class="text-4xl mb-3">${product.image}</div>
                    <h4 class="font-semibold text-sm mb-2" style="color: var(--text-primary)">${product.name}</h4>
                    <p class="text-xs text-gray-600 mb-2">${product.category}</p>
                    <p class="font-bold text-green-600 mb-3">Rp ${product.price.toLocaleString()}</p>
                    <p class="text-xs text-gray-500 mb-3">Stok: ${product.stock}</p>
                    <button onclick="addToCart(${product.id})" class="btn-primary w-full text-white text-xs py-2 px-3 rounded-xl">
                        Tambah ke Keranjang
                    </button>
                `;
                grid.appendChild(productCard);
            });
        }

        // Cart functionality
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            const existingItem = cart.find(item => item.id === productId);
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    id: product.id,
                    name: product.name,
                    price: product.price,
                    image: product.image,
                    quantity: 1
                });
            }
            
            updateCartDisplay();
            showNotification(`${product.name} ditambahkan ke keranjang`, 'success');
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCartDisplay();
        }

        function updateCartQuantity(productId, change) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    removeFromCart(productId);
                } else {
                    updateCartDisplay();
                }
            }
        }

        function updateCartDisplay() {
            const cartItems = document.getElementById('cartItems');
            cartItems.innerHTML = '';
            
            if (cart.length === 0) {
                cartItems.innerHTML = '<p class="text-gray-500 text-center py-4">Keranjang kosong</p>';
            } else {
                cart.forEach(item => {
                    const cartItem = document.createElement('div');
                    cartItem.className = 'cart-item flex items-center justify-between p-3 bg-white/10 rounded-xl';
                    cartItem.innerHTML = `
                        <div class="flex items-center space-x-3">
                            <span class="text-2xl">${item.image}</span>
                            <div>
                                <div class="font-semibold text-sm">${item.name}</div>
                                <div class="text-xs text-gray-600">Rp ${item.price.toLocaleString()}</div>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button onclick="updateCartQuantity(${item.id}, -1)" class="w-6 h-6 bg-red-500 text-white rounded-full text-xs">-</button>
                            <span class="text-sm font-semibold">${item.quantity}</span>
                            <button onclick="updateCartQuantity(${item.id}, 1)" class="w-6 h-6 bg-green-500 text-white rounded-full text-xs">+</button>
                        </div>
                    `;
                    cartItems.appendChild(cartItem);
                });
            }
            
            // Calculate totals with discount
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            let discountAmount = 0;
            
            if (currentDiscount.type === 'percentage') {
                discountAmount = subtotal * (currentDiscount.value / 100);
            } else if (currentDiscount.type === 'fixed') {
                discountAmount = Math.min(currentDiscount.value, subtotal);
            }
            
            const discountedSubtotal = subtotal - discountAmount;
            const tax = discountedSubtotal * 0.1;
            const total = discountedSubtotal + tax;
            
            document.getElementById('subtotal').textContent = `Rp ${subtotal.toLocaleString()}`;
            document.getElementById('tax').textContent = `Rp ${tax.toLocaleString()}`;
            document.getElementById('total').textContent = `Rp ${total.toLocaleString()}`;
            
            // Show/hide discount row
            const discountRow = document.getElementById('discountRow');
            const discountAmountEl = document.getElementById('discountAmount');
            
            if (discountAmount > 0) {
                discountRow.classList.remove('hidden');
                discountAmountEl.textContent = `- Rp ${discountAmount.toLocaleString()}`;
            } else {
                discountRow.classList.add('hidden');
            }
        }

        // Discount functions
        function applyDiscount(type, value) {
            currentDiscount = {
                type: type,
                value: value,
                description: type === 'percentage' ? `${value}% Discount` : `Rp ${value.toLocaleString()} Off`
            };
            updateCartDisplay();
            showNotification(`Diskon ${currentDiscount.description} berhasil diterapkan!`, 'success');
        }

        function applyDiscountCode() {
            const code = document.getElementById('discountCode').value.toUpperCase().trim();
            
            if (!code) {
                showNotification('Masukkan kode promo terlebih dahulu', 'error');
                return;
            }
            
            if (discountCodes[code]) {
                const discount = discountCodes[code];
                currentDiscount = {
                    type: discount.type,
                    value: discount.value,
                    description: discount.description
                };
                updateCartDisplay();
                showNotification(`Kode promo "${code}" berhasil diterapkan!`, 'success');
                document.getElementById('discountCode').value = '';
            } else {
                showNotification('Kode promo tidak valid atau sudah expired', 'error');
            }
        }

        function applyMemberDiscount() {
            const memberType = document.getElementById('memberDiscount').value;
            
            if (!memberType) {
                clearDiscount();
                return;
            }
            
            const discountValues = {
                silver: 5,
                gold: 10,
                platinum: 15,
                vip: 20
            };
            
            const discountValue = discountValues[memberType];
            currentDiscount = {
                type: 'percentage',
                value: discountValue,
                description: `Member ${memberType.toUpperCase()} ${discountValue}%`
            };
            
            updateCartDisplay();
            showNotification(`Diskon member ${memberType.toUpperCase()} ${discountValue}% diterapkan!`, 'success');
        }

        function clearDiscount() {
            currentDiscount = { type: null, value: 0, description: '' };
            document.getElementById('discountCode').value = '';
            document.getElementById('memberDiscount').value = '';
            updateCartDisplay();
            showNotification('Diskon dihapus', 'info');
        }

        function clearCart() {
            cart = [];
            updateCartDisplay();
            showNotification('Keranjang dikosongkan', 'info');
        }

        // Payment functionality
        function openPaymentModal() {
            if (cart.length === 0) {
                showNotification('Keranjang masih kosong', 'error');
                return;
            }
            
            // Calculate totals with discount
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            let discountAmount = 0;
            
            if (currentDiscount.type === 'percentage') {
                discountAmount = subtotal * (currentDiscount.value / 100);
            } else if (currentDiscount.type === 'fixed') {
                discountAmount = Math.min(currentDiscount.value, subtotal);
            }
            
            const discountedSubtotal = subtotal - discountAmount;
            const tax = discountedSubtotal * 0.1;
            const total = discountedSubtotal + tax;
            
            // Update payment modal
            document.getElementById('paymentTotal').textContent = `Rp ${total.toLocaleString()}`;
            document.getElementById('paymentSubtotal').textContent = `Rp ${subtotal.toLocaleString()}`;
            document.getElementById('paymentDiscount').textContent = `Rp ${discountAmount.toLocaleString()}`;
            document.getElementById('paymentTax').textContent = `Rp ${tax.toLocaleString()}`;
            
            // Reset payment method selection
            selectedPaymentMethod = null;
            document.querySelectorAll('.payment-method-btn').forEach(btn => {
                btn.classList.remove('bg-blue-500', 'text-white');
                btn.classList.add('glass-effect');
            });
            document.getElementById('paymentDetails').classList.add('hidden');
            
            document.getElementById('paymentModal').classList.remove('hidden');
        }

        function closePaymentModal() {
            document.getElementById('paymentModal').classList.add('hidden');
            selectedPaymentMethod = null;
            
            // Reset all payment forms
            document.getElementById('cashAmount').value = '';
            document.getElementById('changeAmount').classList.add('hidden');
            document.getElementById('cardNumber').value = '';
            document.getElementById('cardExpiry').value = '';
            document.getElementById('cardCvv').value = '';
            document.getElementById('cardHolder').value = '';
            document.getElementById('phoneNumber').value = '';
            document.getElementById('senderName').value = '';
            document.getElementById('splitPayment').checked = false;
            document.getElementById('splitPaymentDetails').classList.add('hidden');
        }

        function selectPaymentMethod(method) {
            selectedPaymentMethod = method;
            
            // Update button styles
            document.querySelectorAll('.payment-method-btn').forEach(btn => {
                btn.classList.remove('bg-blue-500', 'text-white');
                btn.classList.add('glass-effect');
            });
            
            const selectedBtn = document.querySelector(`[data-method="${method}"]`);
            selectedBtn.classList.remove('glass-effect');
            selectedBtn.classList.add('bg-blue-500', 'text-white');
            
            // Show payment details
            document.getElementById('paymentDetails').classList.remove('hidden');
            
            // Hide all payment detail sections
            document.querySelectorAll('.payment-detail').forEach(detail => {
                detail.classList.add('hidden');
            });
            
            // Show relevant payment detail section
            if (method === 'cash') {
                document.getElementById('cashPayment').classList.remove('hidden');
            } else if (method === 'debit' || method === 'credit') {
                document.getElementById('cardPayment').classList.remove('hidden');
            } else if (['qris', 'gopay', 'ovo', 'dana', 'shopeepay', 'linkaja'].includes(method)) {
                document.getElementById('digitalPayment').classList.remove('hidden');
                document.getElementById('selectedApp').textContent = paymentMethods[method].name;
                document.getElementById('qrCode').textContent = paymentMethods[method].icon;
            } else if (['bca', 'mandiri', 'bni'].includes(method)) {
                document.getElementById('bankTransfer').classList.remove('hidden');
                document.getElementById('bankName').textContent = paymentMethods[method].name;
                document.getElementById('accountNumber').textContent = paymentMethods[method].account;
                
                const total = calculateFinalTotal();
                document.getElementById('transferAmount').textContent = `Rp ${total.toLocaleString()}`;
            }
        }

        function setCashAmount(type) {
            const total = calculateFinalTotal();
            const cashAmountInput = document.getElementById('cashAmount');
            
            if (type === 'exact') {
                cashAmountInput.value = total;
            } else if (type === 'round') {
                const rounded = Math.ceil(total / 1000) * 1000;
                cashAmountInput.value = rounded;
            } else if (type === 'custom') {
                cashAmountInput.focus();
                return;
            }
            
            calculateCashChange();
        }

        function calculateCashChange() {
            const total = calculateFinalTotal();
            const paid = parseFloat(document.getElementById('cashAmount').value) || 0;
            const change = paid - total;
            
            if (change >= 0) {
                document.getElementById('changeAmount').classList.remove('hidden');
                document.getElementById('changeValue').textContent = `Rp ${change.toLocaleString()}`;
            } else {
                document.getElementById('changeAmount').classList.add('hidden');
            }
        }

        function calculateFinalTotal() {
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            let discountAmount = 0;
            
            if (currentDiscount.type === 'percentage') {
                discountAmount = subtotal * (currentDiscount.value / 100);
            } else if (currentDiscount.type === 'fixed') {
                discountAmount = Math.min(currentDiscount.value, subtotal);
            }
            
            const discountedSubtotal = subtotal - discountAmount;
            const tax = discountedSubtotal * 0.1;
            return discountedSubtotal + tax;
        }

        function toggleSplitPayment() {
            const splitPayment = document.getElementById('splitPayment');
            const splitDetails = document.getElementById('splitPaymentDetails');
            
            if (splitPayment.checked) {
                splitDetails.classList.remove('hidden');
            } else {
                splitDetails.classList.add('hidden');
            }
        }

        function processPayment() {
            if (!selectedPaymentMethod) {
                showNotification('Pilih metode pembayaran terlebih dahulu', 'error');
                return;
            }
            
            const total = calculateFinalTotal();
            
            // Validate payment based on method
            if (selectedPaymentMethod === 'cash') {
                const paid = parseFloat(document.getElementById('cashAmount').value) || 0;
                if (paid < total) {
                    showNotification('Jumlah bayar kurang dari total', 'error');
                    return;
                }
            } else if (selectedPaymentMethod === 'debit' || selectedPaymentMethod === 'credit') {
                const cardNumber = document.getElementById('cardNumber').value;
                const cardExpiry = document.getElementById('cardExpiry').value;
                const cardCvv = document.getElementById('cardCvv').value;
                const cardHolder = document.getElementById('cardHolder').value;
                
                if (!cardNumber || !cardExpiry || !cardCvv || !cardHolder) {
                    showNotification('Lengkapi semua data kartu', 'error');
                    return;
                }
            } else if (['bca', 'mandiri', 'bni'].includes(selectedPaymentMethod)) {
                const senderName = document.getElementById('senderName').value;
                if (!senderName) {
                    showNotification('Masukkan nama pengirim transfer', 'error');
                    return;
                }
            }
            
            // Process payment
            showNotification(`Pembayaran via ${paymentMethods[selectedPaymentMethod].name} berhasil diproses!`, 'success');
            
            // Generate receipt
            generateReceipt();
            
            // Clear cart and close modal
            clearCart();
            clearDiscount();
            closePaymentModal();
        }

        // Add event listener for cash amount input
        document.addEventListener('DOMContentLoaded', function() {
            const cashAmountInput = document.getElementById('cashAmount');
            if (cashAmountInput) {
                cashAmountInput.addEventListener('input', calculateCashChange);
            }
        });

        function generateReceipt() {
            const receiptWindow = window.open('', '_blank');
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            let discountAmount = 0;
            if (currentDiscount.type === 'percentage') {
                discountAmount = subtotal * (currentDiscount.value / 100);
            } else if (currentDiscount.type === 'fixed') {
                discountAmount = Math.min(currentDiscount.value, subtotal);
            }
            
            const discountedSubtotal = subtotal - discountAmount;
            const tax = discountedSubtotal * 0.1;
            const grandTotal = discountedSubtotal + tax;
            
            let receiptHTML = `
                <html>
                <head>
                    <title>Receipt - ElitePOS</title>
                    <style>
                        body { font-family: 'Courier New', monospace; font-size: 12px; margin: 20px; }
                        .header { text-align: center; margin-bottom: 20px; }
                        .line { border-bottom: 1px dashed #000; margin: 10px 0; }
                        .total { font-weight: bold; }
                        .discount { color: #d00; }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h2>ELITEPOS STORE</h2>
                        <p>Jl. Teknologi No. 123<br>Jakarta, Indonesia<br>Tel: (021) 123-4567</p>
                    </div>
                    <div class="line"></div>
                    <p>Tanggal: ${new Date().toLocaleString()}<br>
                    Kasir: ${currentUser}<br>
                    No. Transaksi: TRX${Date.now()}<br>
                    Metode Bayar: ${selectedPaymentMethod ? paymentMethods[selectedPaymentMethod].name : 'Tunai'}</p>
                    <div class="line"></div>
            `;
            
            cart.forEach(item => {
                receiptHTML += `
                    <p>${item.name}<br>
                    ${item.quantity} x Rp ${item.price.toLocaleString()} = Rp ${(item.price * item.quantity).toLocaleString()}</p>
                `;
            });
            
            receiptHTML += `
                    <div class="line"></div>
                    <p>Subtotal: Rp ${subtotal.toLocaleString()}<br>
            `;
            
            if (discountAmount > 0) {
                receiptHTML += `<span class="discount">Diskon (${currentDiscount.description}): -Rp ${discountAmount.toLocaleString()}</span><br>`;
            }
            
            receiptHTML += `
                    Pajak (10%): Rp ${tax.toLocaleString()}<br>
                    <span class="total">TOTAL: Rp ${grandTotal.toLocaleString()}</span></p>
            `;
            
            if (selectedPaymentMethod === 'cash') {
                const paid = parseFloat(document.getElementById('cashAmount').value) || 0;
                const change = paid - grandTotal;
                receiptHTML += `
                    <p>Bayar: Rp ${paid.toLocaleString()}<br>
                    Kembalian: Rp ${change.toLocaleString()}</p>
                `;
            }
            
            receiptHTML += `
                    <div class="line"></div>
                    <p style="text-align: center;">Terima kasih atas kunjungan Anda!<br>
                    Barang yang sudah dibeli tidak dapat dikembalikan<br><br>
                    üíé ElitePOS Version 71 üíé<br>
                    Ultimate Enterprise Edition</p>
                </body>
                </html>
            `;
            
            receiptWindow.document.write(receiptHTML);
            receiptWindow.document.close();
            receiptWindow.print();
        }

        // Modal functions
        function openAddUserModal() {
            document.getElementById('addUserModal').classList.remove('hidden');
        }

        function closeAddUserModal() {
            document.getElementById('addUserModal').classList.add('hidden');
            document.getElementById('addUserForm').reset();
        }

        function openPermissionModal() {
            document.getElementById('permissionModal').classList.remove('hidden');
        }

        function closePermissionModal() {
            document.getElementById('permissionModal').classList.add('hidden');
        }

        function savePermissions() {
            showNotification('Pengaturan hak akses berhasil disimpan', 'success');
            closePermissionModal();
        }

        function exportUserData() {
            showNotification('Data user berhasil diekspor', 'success');
        }

        function openAddProductModal() {
            document.getElementById('addProductModal').classList.remove('hidden');
        }

        function closeAddProductModal() {
            document.getElementById('addProductModal').classList.add('hidden');
            document.getElementById('addProductForm').reset();
        }

        function closeEditProductModal() {
            document.getElementById('editProductModal').classList.add('hidden');
            document.getElementById('editProductForm').reset();
        }

        function importProducts() {
            document.getElementById('importModal').classList.remove('hidden');
        }

        function exportProducts() {
            document.getElementById('exportModal').classList.remove('hidden');
        }

        function bulkEdit() {
            document.getElementById('bulkEditModal').classList.remove('hidden');
        }

        function closeImportModal() {
            document.getElementById('importModal').classList.add('hidden');
            document.getElementById('importForm').reset();
        }

        function closeExportModal() {
            document.getElementById('exportModal').classList.add('hidden');
        }

        function closeBulkEditModal() {
            document.getElementById('bulkEditModal').classList.add('hidden');
            document.getElementById('bulkEditForm').reset();
        }

        function handleFileImport(e) {
            e.preventDefault();
            
            const fileInput = document.getElementById('importFile');
            const file = fileInput.files[0];
            
            if (!file) {
                showNotification('Pilih file untuk diimport terlebih dahulu', 'error');
                return;
            }
            
            const allowedTypes = ['.csv', '.xlsx', '.xls'];
            const fileExtension = '.' + file.name.split('.').pop().toLowerCase();
            
            if (!allowedTypes.includes(fileExtension)) {
                showNotification('Format file tidak didukung. Gunakan CSV atau Excel', 'error');
                return;
            }
            
            // Simulate file processing
            const progressBar = document.getElementById('importProgress');
            const progressText = document.getElementById('importProgressText');
            const importResults = document.getElementById('importResults');
            
            progressBar.classList.remove('hidden');
            progressText.textContent = 'Memproses file...';
            
            let progress = 0;
            const interval = setInterval(() => {
                progress += 10;
                document.querySelector('.progress-bar').style.width = progress + '%';
                
                if (progress >= 100) {
                    clearInterval(interval);
                    
                    // Simulate import results
                    const sampleData = [
                        { name: 'iPhone 16 Pro', category: 'elektronik', price: 19999000, stock: 20, status: 'success' },
                        { name: 'Samsung Galaxy S25', category: 'elektronik', price: 13999000, stock: 15, status: 'success' },
                        { name: 'MacBook Pro M4', category: 'elektronik', price: 25999000, stock: 10, status: 'success' },
                        { name: 'iPad Air M3', category: 'elektronik', price: 8999000, stock: 25, status: 'success' },
                        { name: 'Apple Watch Ultra 3', category: 'elektronik', price: 12999000, stock: 12, status: 'success' }
                    ];
                    
                    // Add imported products to database
                    sampleData.forEach(item => {
                        const newId = Math.max(...products.map(p => p.id)) + 1;
                        const categoryIcons = {
                            'elektronik': 'üì±',
                            'fashion': 'üëï',
                            'makanan': 'üçî',
                            'kesehatan': 'üíä',
                            'rumah': 'üè†',
                            'olahraga': '‚öΩ',
                            'buku': 'üìö',
                            'mainan': 'üß∏'
                        };
                        
                        products.push({
                            id: newId + products.length,
                            name: item.name,
                            category: item.category,
                            price: item.price,
                            stock: item.stock,
                            status: 'active',
                            image: categoryIcons[item.category] || 'üì¶',
                            sku: `IMP-${newId + products.length}`,
                            createdAt: new Date().toISOString(),
                            updatedAt: new Date().toISOString()
                        });
                    });
                    
                    progressText.textContent = 'Import selesai!';
                    importResults.classList.remove('hidden');
                    importResults.innerHTML = `
                        <div class="mt-4 p-4 bg-green-100 rounded-xl">
                            <h4 class="font-bold text-green-800 mb-2">‚úÖ Import Berhasil!</h4>
                            <div class="text-sm text-green-700 space-y-1">
                                <div>Total produk diimport: <span class="font-bold">${sampleData.length}</span></div>
                                <div>Berhasil: <span class="font-bold text-green-600">${sampleData.length}</span></div>
                                <div>Gagal: <span class="font-bold text-red-600">0</span></div>
                                <div>Duplikat: <span class="font-bold text-orange-600">0</span></div>
                            </div>
                            <div class="mt-3">
                                <button onclick="viewImportLog()" class="text-sm bg-green-600 text-white px-3 py-1 rounded-lg hover:bg-green-700">
                                    üìã Lihat Detail Log
                                </button>
                            </div>
                        </div>
                    `;
                    
                    // Update displays
                    populateProductGrid();
                    populateProductTable();
                    updateProductStats();
                    
                    setTimeout(() => {
                        showNotification(`${sampleData.length} produk berhasil diimport!`, 'success');
                    }, 500);
                }
            }, 200);
        }

        function downloadTemplate() {
            // Create CSV template
            const csvContent = `Nama Produk,SKU,Kategori,Brand,Harga Beli,Harga Jual,Stok,Min Stok,Satuan,Deskripsi,Berat,Dimensi,Supplier,Gudang,Tags,Status
iPhone 15 Pro,IP15P-256,elektronik,Apple,15000000,18999000,25,5,pcs,iPhone 15 Pro 256GB,200,15x7x0.8,Apple Tech,Gudang Utama,smartphone premium 5G,active
MacBook Air M3,MBA-M3-256,elektronik,Apple,16000000,19999000,15,3,pcs,MacBook Air M3 256GB,1240,30x21x1.1,Apple Tech,Gudang Utama,laptop premium,active
AirPods Pro,APP-GEN3,elektronik,Apple,3000000,3999000,50,10,pcs,AirPods Pro Generation 3,56,6x4x2,Apple Tech,Gudang Utama,earphone wireless,active`;
            
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', 'template_import_produk.csv');
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showNotification('Template import berhasil didownload', 'success');
        }

        function handleExport(e) {
            e.preventDefault();
            
            const format = document.getElementById('exportFormat').value;
            const dateRange = document.getElementById('exportDateRange').value;
            const categories = Array.from(document.querySelectorAll('input[name="exportCategories"]:checked')).map(cb => cb.value);
            const includeImages = document.getElementById('includeImages').checked;
            const includeSupplier = document.getElementById('includeSupplier').checked;
            const includeAnalytics = document.getElementById('includeAnalytics').checked;
            
            // Filter products based on selection
            let exportData = products;
            
            if (categories.length > 0 && !categories.includes('all')) {
                exportData = products.filter(p => categories.includes(p.category));
            }
            
            // Simulate export process
            const progressBar = document.getElementById('exportProgress');
            const progressText = document.getElementById('exportProgressText');
            
            progressBar.classList.remove('hidden');
            progressText.textContent = 'Menyiapkan data export...';
            
            let progress = 0;
            const interval = setInterval(() => {
                progress += 15;
                document.querySelector('#exportProgress .progress-bar').style.width = progress + '%';
                
                if (progress >= 100) {
                    clearInterval(interval);
                    
                    // Create export content based on format
                    let content = '';
                    let filename = '';
                    let mimeType = '';
                    
                    if (format === 'csv') {
                        const headers = ['ID', 'Nama Produk', 'SKU', 'Kategori', 'Harga', 'Stok', 'Status'];
                        if (includeSupplier) headers.push('Supplier');
                        if (includeAnalytics) headers.push('Total Terjual', 'Revenue');
                        
                        content = headers.join(',') + '\n';
                        
                        exportData.forEach(product => {
                            const row = [
                                product.id,
                                `"${product.name}"`,
                                product.sku || product.id,
                                product.category,
                                product.price,
                                product.stock,
                                product.status
                            ];
                            
                            if (includeSupplier) row.push(product.supplier || 'N/A');
                            if (includeAnalytics) {
                                row.push(Math.floor(Math.random() * 100)); // Mock sales data
                                row.push(product.price * Math.floor(Math.random() * 100));
                            }
                            
                            content += row.join(',') + '\n';
                        });
                        
                        filename = `export_produk_${new Date().toISOString().split('T')[0]}.csv`;
                        mimeType = 'text/csv;charset=utf-8;';
                    } else if (format === 'json') {
                        const exportProducts = exportData.map(product => {
                            const exportProduct = { ...product };
                            if (includeAnalytics) {
                                exportProduct.analytics = {
                                    totalSold: Math.floor(Math.random() * 100),
                                    revenue: product.price * Math.floor(Math.random() * 100),
                                    lastSold: new Date().toISOString()
                                };
                            }
                            return exportProduct;
                        });
                        
                        content = JSON.stringify({
                            exportDate: new Date().toISOString(),
                            totalProducts: exportProducts.length,
                            products: exportProducts
                        }, null, 2);
                        
                        filename = `export_produk_${new Date().toISOString().split('T')[0]}.json`;
                        mimeType = 'application/json;charset=utf-8;';
                    }
                    
                    // Download file
                    const blob = new Blob([content], { type: mimeType });
                    const link = document.createElement('a');
                    const url = URL.createObjectURL(blob);
                    link.setAttribute('href', url);
                    link.setAttribute('download', filename);
                    link.style.visibility = 'hidden';
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    
                    progressText.textContent = 'Export selesai!';
                    
                    setTimeout(() => {
                        showNotification(`${exportData.length} produk berhasil diekspor ke ${format.toUpperCase()}`, 'success');
                        closeExportModal();
                    }, 1000);
                }
            }, 150);
        }

        function handleBulkEdit(e) {
            e.preventDefault();
            
            const operation = document.getElementById('bulkOperation').value;
            const selectedProducts = Array.from(document.querySelectorAll('input[name="bulkProducts"]:checked')).map(cb => parseInt(cb.value));
            
            if (selectedProducts.length === 0) {
                showNotification('Pilih minimal 1 produk untuk diedit', 'error');
                return;
            }
            
            let updatedCount = 0;
            
            selectedProducts.forEach(productId => {
                const product = products.find(p => p.id === productId);
                if (!product) return;
                
                switch (operation) {
                    case 'updatePrice':
                        const priceAction = document.getElementById('priceAction').value;
                        const priceValue = parseFloat(document.getElementById('priceValue').value) || 0;
                        
                        if (priceAction === 'increase') {
                            product.price = Math.round(product.price * (1 + priceValue / 100));
                        } else if (priceAction === 'decrease') {
                            product.price = Math.round(product.price * (1 - priceValue / 100));
                        } else if (priceAction === 'set') {
                            product.price = priceValue;
                        }
                        break;
                        
                    case 'updateStock':
                        const stockAction = document.getElementById('stockAction').value;
                        const stockValue = parseInt(document.getElementById('stockValue').value) || 0;
                        
                        if (stockAction === 'add') {
                            product.stock += stockValue;
                        } else if (stockAction === 'subtract') {
                            product.stock = Math.max(0, product.stock - stockValue);
                        } else if (stockAction === 'set') {
                            product.stock = stockValue;
                        }
                        break;
                        
                    case 'updateCategory':
                        const newCategory = document.getElementById('newCategory').value;
                        if (newCategory) {
                            product.category = newCategory;
                            
                            // Update category icon
                            const categoryIcons = {
                                'elektronik': 'üì±',
                                'fashion': 'üëï',
                                'makanan': 'üçî',
                                'kesehatan': 'üíä',
                                'rumah': 'üè†',
                                'olahraga': '‚öΩ',
                                'buku': 'üìö',
                                'mainan': 'üß∏'
                            };
                            product.image = categoryIcons[newCategory] || 'üì¶';
                        }
                        break;
                        
                    case 'updateStatus':
                        const newStatus = document.getElementById('newStatus').value;
                        if (newStatus) {
                            product.status = newStatus;
                        }
                        break;
                        
                    case 'applyDiscount':
                        const discountValue = parseFloat(document.getElementById('discountValue').value) || 0;
                        product.discount = discountValue;
                        product.originalPrice = product.originalPrice || product.price;
                        product.price = Math.round(product.originalPrice * (1 - discountValue / 100));
                        break;
                }
                
                product.updatedAt = new Date().toISOString();
                updatedCount++;
            });
            
            // Update displays
            populateProductGrid();
            populateProductTable();
            updateProductStats();
            closeBulkEditModal();
            
            showNotification(`${updatedCount} produk berhasil diupdate secara massal!`, 'success');
        }

        function selectAllProducts() {
            const checkboxes = document.querySelectorAll('input[name="bulkProducts"]');
            const selectAll = document.getElementById('selectAllProducts').checked;
            
            checkboxes.forEach(checkbox => {
                checkbox.checked = selectAll;
            });
            
            updateBulkSelection();
        }

        function updateBulkSelection() {
            const selectedCount = document.querySelectorAll('input[name="bulkProducts"]:checked').length;
            document.getElementById('selectedCount').textContent = selectedCount;
        }

        function showBulkOperationFields() {
            const operation = document.getElementById('bulkOperation').value;
            
            // Hide all operation fields
            document.querySelectorAll('.bulk-operation-field').forEach(field => {
                field.classList.add('hidden');
            });
            
            // Show relevant fields
            if (operation) {
                document.getElementById(operation + 'Fields').classList.remove('hidden');
            }
        }

        function viewImportLog() {
            showNotification('Membuka detail log import dengan status setiap produk...', 'info');
        }

        // Product Management Functions
        function handleAddProduct(e) {
            e.preventDefault();
            
            const formData = {
                name: document.getElementById('productName').value,
                sku: document.getElementById('productSku').value,
                category: document.getElementById('productCategory').value,
                brand: document.getElementById('productBrand').value,
                description: document.getElementById('productDescription').value,
                costPrice: parseFloat(document.getElementById('productCostPrice').value) || 0,
                sellPrice: parseFloat(document.getElementById('productSellPrice').value) || 0,
                discount: parseFloat(document.getElementById('productDiscount').value) || 0,
                stock: parseInt(document.getElementById('productStock').value) || 0,
                minStock: parseInt(document.getElementById('productMinStock').value) || 0,
                unit: document.getElementById('productUnit').value,
                status: document.getElementById('productStatus').value,
                weight: parseFloat(document.getElementById('productWeight').value) || 0,
                dimensions: document.getElementById('productDimensions').value,
                supplier: document.getElementById('productSupplier').value,
                warehouse: document.getElementById('productWarehouse').value,
                tags: document.getElementById('productTags').value
            };
            
            // Validation
            if (!formData.name || !formData.category || !formData.sellPrice) {
                showNotification('Mohon lengkapi field yang wajib diisi', 'error');
                return;
            }
            
            if (formData.sellPrice <= formData.costPrice) {
                if (!confirm('Harga jual lebih rendah dari harga beli. Lanjutkan?')) {
                    return;
                }
            }
            
            // Generate product ID and image
            const newId = Math.max(...products.map(p => p.id)) + 1;
            const categoryIcons = {
                'elektronik': 'üì±',
                'fashion': 'üëï',
                'makanan': 'üçî',
                'kesehatan': 'üíä',
                'rumah': 'üè†',
                'olahraga': '‚öΩ',
                'buku': 'üìö',
                'mainan': 'üß∏'
            };
            
            const newProduct = {
                id: newId,
                name: formData.name,
                sku: formData.sku || `SKU-${newId}`,
                category: formData.category,
                brand: formData.brand,
                description: formData.description,
                price: formData.sellPrice,
                costPrice: formData.costPrice,
                discount: formData.discount,
                stock: formData.stock,
                minStock: formData.minStock,
                unit: formData.unit,
                status: formData.status,
                weight: formData.weight,
                dimensions: formData.dimensions,
                supplier: formData.supplier,
                warehouse: formData.warehouse,
                tags: formData.tags,
                image: categoryIcons[formData.category] || 'üì¶',
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };
            
            products.push(newProduct);
            populateProductGrid();
            populateProductTable();
            updateProductStats();
            closeAddProductModal();
            
            showNotification(`Produk "${formData.name}" berhasil ditambahkan!`, 'success');
        }

        function handleEditProduct(e) {
            e.preventDefault();
            
            const productId = parseInt(document.getElementById('editProductId').value);
            const product = products.find(p => p.id === productId);
            
            if (!product) {
                showNotification('Produk tidak ditemukan', 'error');
                return;
            }
            
            // Update product data
            product.name = document.getElementById('editProductName').value;
            product.category = document.getElementById('editProductCategory').value;
            product.price = parseFloat(document.getElementById('editProductPrice').value) || 0;
            product.stock = parseInt(document.getElementById('editProductStock').value) || 0;
            product.status = document.getElementById('editProductStatus').value;
            product.updatedAt = new Date().toISOString();
            
            // Update category icon if changed
            const categoryIcons = {
                'elektronik': 'üì±',
                'fashion': 'üëï',
                'makanan': 'üçî',
                'kesehatan': 'üíä',
                'rumah': 'üè†',
                'olahraga': '‚öΩ',
                'buku': 'üìö',
                'mainan': 'üß∏'
            };
            product.image = categoryIcons[product.category] || 'üì¶';
            
            populateProductGrid();
            populateProductTable();
            updateProductStats();
            closeEditProductModal();
            
            showNotification(`Produk "${product.name}" berhasil diupdate!`, 'success');
        }

        function calculateProfitMargin() {
            const costPrice = parseFloat(document.getElementById('productCostPrice').value) || 0;
            const sellPrice = parseFloat(document.getElementById('productSellPrice').value) || 0;
            
            if (costPrice > 0 && sellPrice > 0) {
                const margin = ((sellPrice - costPrice) / sellPrice * 100).toFixed(2);
                document.getElementById('productMargin').value = `${margin}% (Rp ${(sellPrice - costPrice).toLocaleString()})`;
            } else {
                document.getElementById('productMargin').value = '';
            }
        }

        function updateProductStats() {
            const totalProductsEl = document.getElementById('totalProducts');
            const lowStockEl = document.getElementById('lowStock');
            const totalCategoriesEl = document.getElementById('totalCategories');
            
            if (totalProductsEl) {
                totalProductsEl.textContent = products.length;
            }
            
            if (lowStockEl) {
                const lowStockCount = products.filter(p => p.stock <= (p.minStock || 10)).length;
                lowStockEl.textContent = lowStockCount;
            }
            
            if (totalCategoriesEl) {
                const categories = [...new Set(products.map(p => p.category))];
                totalCategoriesEl.textContent = categories.length;
            }
        }

        function editProduct(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) {
                showNotification('Produk tidak ditemukan', 'error');
                return;
            }
            
            // Populate edit form
            document.getElementById('editProductId').value = product.id;
            document.getElementById('editProductName').value = product.name;
            document.getElementById('editProductCategory').value = product.category;
            document.getElementById('editProductPrice').value = product.price;
            document.getElementById('editProductStock').value = product.stock;
            document.getElementById('editProductStatus').value = product.status;
            
            // Show edit modal
            document.getElementById('editProductModal').classList.remove('hidden');
        }

        function deleteProduct(productId) {
            console.log('üóëÔ∏è deleteProduct called with ID:', productId);
            
            // Check if user has permission to delete products
            if (!currentRole || currentRole !== 'admin') {
                alert('‚ùå AKSES DITOLAK!\n\nHanya Administrator yang dapat menghapus produk.\n\nRole Anda saat ini: ' + (currentRole || 'Tidak diketahui'));
                return;
            }
            
            // Convert to number to ensure proper comparison
            const id = parseInt(productId);
            const productIndex = products.findIndex(p => p.id === id);
            const product = products.find(p => p.id === id);
            
            console.log('üîç Product lookup - ID:', id, 'Index:', productIndex, 'Found:', !!product);
            console.log('üë§ Current user role:', currentRole);
            
            if (!product || productIndex === -1) {
                alert('‚ùå Produk tidak ditemukan!');
                return;
            }
            
            // Enhanced confirmation dialog for Administrator
            const confirmMessage = `üóëÔ∏è HAPUS PRODUK - ADMINISTRATOR ACCESS\n\n` +
                                 `Nama: ${product.name}\n` +
                                 `SKU: ${product.sku || product.id}\n` +
                                 `Kategori: ${product.category}\n` +
                                 `Harga: Rp ${product.price.toLocaleString()}\n` +
                                 `Stok: ${product.stock} ${product.unit || 'pcs'}\n` +
                                 `Status: ${product.status}\n\n` +
                                 `üë§ Administrator: ${currentUser}\n` +
                                 `üïí Waktu: ${new Date().toLocaleString()}\n\n` +
                                 `‚ö†Ô∏è PERINGATAN ADMINISTRATOR:\n` +
                                 `‚Ä¢ Tindakan ini tidak dapat dibatalkan\n` +
                                 `‚Ä¢ Produk akan dihapus dari semua sistem\n` +
                                 `‚Ä¢ Riwayat transaksi tetap tersimpan\n\n` +
                                 `Apakah Anda yakin ingin menghapus produk ini?`;
            
            if (confirm(confirmMessage)) {
                try {
                    console.log('üîÑ Administrator deletion process started...');
                    
                    // Store original data for logging
                    const originalLength = products.length;
                    const productName = product.name;
                    const deletionTime = new Date().toISOString();
                    
                    console.log(`üìä Before deletion: ${originalLength} products`);
                    console.log('üìä Products before:', products.map(p => ({ id: p.id, name: p.name })));
                    
                    // Create deletion log entry
                    const deletionLog = {
                        action: 'DELETE_PRODUCT',
                        productId: id,
                        productName: productName,
                        productData: { ...product },
                        deletedBy: currentUser,
                        deletedByRole: currentRole,
                        timestamp: deletionTime,
                        success: false
                    };
                    
                    // Remove product using splice method for immediate effect
                    products.splice(productIndex, 1);
                    
                    console.log(`üìä After deletion: ${products.length} products`);
                    console.log('üìä Products after:', products.map(p => ({ id: p.id, name: p.name })));
                    
                    // Verify deletion was successful
                    if (products.length === originalLength - 1) {
                        deletionLog.success = true;
                        console.log('‚úÖ Product successfully removed from array');
                        
                        // Remove from cart if exists
                        const cartBefore = cart.length;
                        cart = cart.filter(item => item.id !== id);
                        if (cart.length < cartBefore) {
                            console.log('‚úÖ Product removed from cart');
                            updateCartDisplay();
                        }
                        
                        // Update all UI components immediately
                        console.log('üîÑ Updating UI components...');
                        
                        // Force refresh all displays with error handling
                        setTimeout(() => {
                            try {
                                // Update product table
                                populateProductTable();
                                console.log('‚úÖ Product table updated');
                                
                                // Update product grid (kasir)
                                populateProductGrid();
                                console.log('‚úÖ Product grid updated');
                                
                                // Update bulk product list
                                populateBulkProductList();
                                console.log('‚úÖ Bulk product list updated');
                                
                                // Update statistics
                                updateProductStats();
                                console.log('‚úÖ Product stats updated');
                                
                                // Show detailed success notification for Administrator
                                const successMessage = `‚úÖ PENGHAPUSAN BERHASIL\n\n` +
                                                      `Produk "${productName}" telah dihapus dari sistem.\n\n` +
                                                      `üìä Detail Penghapusan:\n` +
                                                      `‚Ä¢ ID Produk: ${id}\n` +
                                                      `‚Ä¢ Dihapus oleh: ${currentUser} (Administrator)\n` +
                                                      `‚Ä¢ Waktu: ${new Date().toLocaleString()}\n` +
                                                      `‚Ä¢ Total produk tersisa: ${products.length}\n\n` +
                                                      `Sistem telah diperbarui secara otomatis.`;
                                
                                alert(successMessage);
                                console.log('‚úÖ Administrator deletion completed successfully');
                                
                                // Log the successful deletion (in real app, this would go to audit log)
                                console.log('üìù Deletion audit log:', deletionLog);
                                
                            } catch (updateError) {
                                console.error('‚ùå Error updating UI:', updateError);
                                alert('‚ö†Ô∏è Produk berhasil dihapus, tetapi ada masalah saat memperbarui tampilan.\n\nSilakan refresh halaman untuk melihat perubahan.');
                            }
                        }, 100);
                        
                    } else {
                        deletionLog.error = `Expected ${originalLength - 1} products, got ${products.length}`;
                        throw new Error(deletionLog.error);
                    }
                    
                } catch (error) {
                    console.error('‚ùå Error during Administrator product deletion:', error);
                    alert('‚ùå Terjadi kesalahan saat menghapus produk.\n\nSebagai Administrator, Anda dapat mencoba lagi atau hubungi support teknis.');
                    
                    // Attempt to refresh the displays anyway
                    try {
                        populateProductTable();
                        populateProductGrid();
                        populateBulkProductList();
                        updateProductStats();
                    } catch (refreshError) {
                        console.error('‚ùå Error refreshing displays:', refreshError);
                    }
                }
            } else {
                console.log('‚ùå Administrator deletion cancelled by user');
                
                // Enhanced cancellation feedback for Administrator
                const cancellationMessage = `‚ùå PENGHAPUSAN DIBATALKAN\n\n` +
                                           `Produk "${product.name}" TIDAK dihapus dari sistem.\n\n` +
                                           `üìä Status Produk:\n` +
                                           `‚Ä¢ Nama: ${product.name}\n` +
                                           `‚Ä¢ SKU: ${product.sku || product.id}\n` +
                                           `‚Ä¢ Status: ${product.status.toUpperCase()}\n` +
                                           `‚Ä¢ Stok: ${product.stock} ${product.unit || 'pcs'}\n\n` +
                                           `üë§ Administrator: ${currentUser}\n` +
                                           `üïí Waktu: ${new Date().toLocaleString()}\n\n` +
                                           `‚úÖ Produk tetap tersimpan dengan aman dalam sistem.\n` +
                                           `Tidak ada perubahan yang dilakukan.`;
                
                alert(cancellationMessage);
            }
        }

        function toggleProductStatus(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) {
                showNotification('Produk tidak ditemukan', 'error');
                return;
            }
            
            const newStatus = product.status === 'active' ? 'inactive' : 'active';
            const statusText = newStatus === 'active' ? 'diaktifkan' : 'dinonaktifkan';
            
            if (confirm(`Apakah Anda yakin ingin ${statusText === 'diaktifkan' ? 'mengaktifkan' : 'menonaktifkan'} produk "${product.name}"?`)) {
                product.status = newStatus;
                product.updatedAt = new Date().toISOString();
                
                populateProductTable();
                populateProductGrid();
                updateProductStats();
                showNotification(`Produk "${product.name}" berhasil ${statusText}`, 'success');
            }
        }

        function duplicateProduct(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) {
                showNotification('Produk tidak ditemukan', 'error');
                return;
            }
            
            const newId = Math.max(...products.map(p => p.id)) + 1;
            const duplicatedProduct = {
                ...product,
                id: newId,
                name: `${product.name} (Copy)`,
                sku: `${product.sku}-COPY`,
                stock: 0,
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };
            
            products.push(duplicatedProduct);
            populateProductGrid();
            populateProductTable();
            updateProductStats();
            
            showNotification(`Produk "${product.name}" berhasil diduplikasi`, 'success');
        }

        // Date and time update
        function updateDateTime() {
            const now = new Date();
            const timeElement = document.getElementById('currentTime');
            const dateElement = document.getElementById('currentDate');
            
            if (timeElement) {
                timeElement.textContent = now.toLocaleTimeString('id-ID');
            }
            if (dateElement) {
                dateElement.textContent = now.toLocaleDateString('id-ID', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                });
            }
        }

        // User management functions (existing)
        function handleAddUser(e) {
            e.preventDefault();
            
            const formData = {
                fullName: document.getElementById('userFullName').value,
                username: document.getElementById('userUsername').value,
                email: document.getElementById('userEmail').value,
                phone: document.getElementById('userPhone').value,
                password: document.getElementById('userPassword').value,
                passwordConfirm: document.getElementById('userPasswordConfirm').value,
                role: document.getElementById('userRole').value,
                status: document.getElementById('userStatus').value
            };
            
            if (formData.password !== formData.passwordConfirm) {
                showNotification('Password dan konfirmasi password tidak cocok', 'error');
                return;
            }
            
            if (formData.password.length < 8) {
                showNotification('Password minimal 8 karakter', 'error');
                return;
            }
            
            if (users.find(user => user.username === formData.username)) {
                showNotification('Username sudah digunakan', 'error');
                return;
            }
            
            const newUser = {
                id: users.length + 1,
                fullName: formData.fullName,
                username: formData.username,
                email: formData.email,
                phone: formData.phone,
                role: formData.role,
                status: formData.status,
                lastLogin: '-'
            };
            
            users.push(newUser);
            populateUserTable();
            updateUserStats();
            closeAddUserModal();
            
            showNotification('User berhasil ditambahkan', 'success');
        }

        function populateUserTable() {
            const tbody = document.getElementById('userTableBody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            users.forEach(user => {
                const row = document.createElement('tr');
                row.className = 'border-b border-gray-100 hover:bg-white/10 transition-colors';
                
                const roleClass = `role-${user.role}`;
                const statusBadge = user.status === 'active' 
                    ? '<span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-semibold">Aktif</span>'
                    : '<span class="px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs font-semibold">Tidak Aktif</span>';
                
                row.innerHTML = `
                    <td class="py-4 px-4">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full flex items-center justify-center">
                                <span class="text-white text-sm">üë§</span>
                            </div>
                            <div>
                                <div class="font-semibold text-gray-800">${user.fullName}</div>
                                <div class="text-sm text-gray-600">@${user.username}</div>
                            </div>
                        </div>
                    </td>
                    <td class="py-4 px-4">
                        <span class="role-badge ${roleClass}">${user.role.toUpperCase()}</span>
                    </td>
                    <td class="py-4 px-4">${statusBadge}</td>
                    <td class="py-4 px-4">
                        <div class="text-sm text-gray-600">${user.lastLogin}</div>
                    </td>
                    <td class="py-4 px-4">
                        <div class="flex space-x-2">
                            <button onclick="editUser(${user.id})" class="p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors">
                                ‚úèÔ∏è
                            </button>
                            <button onclick="deleteUser(${user.id})" class="p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors">
                                üóëÔ∏è
                            </button>
                            <button onclick="toggleUserStatus(${user.id})" class="p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors">
                                ${user.status === 'active' ? 'üîí' : 'üîì'}
                            </button>
                        </div>
                    </td>
                `;
                
                tbody.appendChild(row);
            });
        }

        function updateUserStats() {
            const totalUsersEl = document.getElementById('totalUsers');
            const adminCountEl = document.getElementById('adminCount');
            const managerCountEl = document.getElementById('managerCount');
            const cashierCountEl = document.getElementById('cashierCount');
            
            if (totalUsersEl) totalUsersEl.textContent = users.length;
            if (adminCountEl) adminCountEl.textContent = users.filter(u => u.role === 'admin').length;
            if (managerCountEl) managerCountEl.textContent = users.filter(u => u.role === 'manager').length;
            if (cashierCountEl) cashierCountEl.textContent = users.filter(u => u.role === 'cashier').length;
        }

        function filterUsers() {
            const searchTerm = document.getElementById('userSearch').value.toLowerCase();
            const roleFilter = document.getElementById('roleFilter').value;
            
            const filteredUsers = users.filter(user => {
                const matchesSearch = user.fullName.toLowerCase().includes(searchTerm) || 
                                    user.username.toLowerCase().includes(searchTerm) ||
                                    user.email.toLowerCase().includes(searchTerm);
                const matchesRole = !roleFilter || user.role === roleFilter;
                
                return matchesSearch && matchesRole;
            });
            
            // Update table with filtered results
            const tbody = document.getElementById('userTableBody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            filteredUsers.forEach(user => {
                const row = document.createElement('tr');
                row.className = 'border-b border-gray-100 hover:bg-white/10 transition-colors';
                
                const roleClass = `role-${user.role}`;
                const statusBadge = user.status === 'active' 
                    ? '<span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-semibold">Aktif</span>'
                    : '<span class="px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs font-semibold">Tidak Aktif</span>';
                
                row.innerHTML = `
                    <td class="py-4 px-4">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full flex items-center justify-center">
                                <span class="text-white text-sm">üë§</span>
                            </div>
                            <div>
                                <div class="font-semibold text-gray-800">${user.fullName}</div>
                                <div class="text-sm text-gray-600">@${user.username}</div>
                            </div>
                        </div>
                    </td>
                    <td class="py-4 px-4">
                        <span class="role-badge ${roleClass}">${user.role.toUpperCase()}</span>
                    </td>
                    <td class="py-4 px-4">${statusBadge}</td>
                    <td class="py-4 px-4">
                        <div class="text-sm text-gray-600">${user.lastLogin}</div>
                    </td>
                    <td class="py-4 px-4">
                        <div class="flex space-x-2">
                            <button onclick="editUser(${user.id})" class="p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors">
                                ‚úèÔ∏è
                            </button>
                            <button onclick="deleteUser(${user.id})" class="p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors">
                                üóëÔ∏è
                            </button>
                            <button onclick="toggleUserStatus(${user.id})" class="p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors">
                                ${user.status === 'active' ? 'üîí' : 'üîì'}
                            </button>
                        </div>
                    </td>
                `;
                
                tbody.appendChild(row);
            });
        }

        function editUser(userId) {
            const user = users.find(u => u.id === userId);
            if (user) {
                showNotification(`Edit user: ${user.fullName}`, 'info');
            }
        }

        function deleteUser(userId) {
            if (confirm('Apakah Anda yakin ingin menghapus user ini?')) {
                users = users.filter(u => u.id !== userId);
                populateUserTable();
                updateUserStats();
                showNotification('User berhasil dihapus', 'success');
            }
        }

        function toggleUserStatus(userId) {
            const user = users.find(u => u.id === userId);
            if (user) {
                user.status = user.status === 'active' ? 'inactive' : 'active';
                populateUserTable();
                showNotification(`Status user ${user.fullName} berhasil diubah`, 'success');
            }
        }

        // Inventory Management Functions
        function openStockAdjustment() {
            showNotification('Membuka form stock adjustment...', 'info');
        }

        function openStockOpname() {
            showNotification('Memulai proses stock opname...', 'info');
        }

        function generateReorderReport() {
            showNotification('Generating reorder report berdasarkan minimum stock...', 'success');
        }

        function exportInventoryData() {
            showNotification('Data inventory berhasil diekspor ke Excel', 'success');
        }

        function adjustStock(sku) {
            showNotification(`Membuka form adjustment untuk SKU: ${sku}`, 'info');
        }

        // Report Functions
        function generateSalesReport() {
            showNotification('Generating laporan penjualan lengkap...', 'success');
        }

        function generateFinancialReport() {
            showNotification('Generating laporan keuangan dengan P&L statement...', 'success');
        }

        function generateInventoryReport() {
            showNotification('Generating laporan inventory dengan stock analysis...', 'success');
        }

        function exportAllReports() {
            showNotification('Mengekspor semua laporan ke format PDF dan Excel...', 'success');
        }

        function openSalesReport() {
            showNotification('Membuka dashboard laporan penjualan detail...', 'info');
        }

        function openFinancialReport() {
            showNotification('Membuka dashboard laporan keuangan dengan grafik...', 'info');
        }

        function openInventoryReport() {
            showNotification('Membuka dashboard laporan inventory dengan analytics...', 'info');
        }

        function openCustomerReport() {
            showNotification('Membuka dashboard laporan customer analytics...', 'info');
        }

        // Customer Management Functions
        function openAddCustomer() {
            showNotification('Membuka form tambah customer baru...', 'info');
        }

        function openLoyaltyProgram() {
            showNotification('Membuka pengaturan program loyalitas...', 'info');
        }

        function createMarketingCampaign() {
            showNotification('Membuka wizard pembuatan marketing campaign...', 'info');
        }

        function exportCustomerData() {
            showNotification('Data customer berhasil diekspor dengan segmentasi...', 'success');
        }

        function viewCustomerDetail(customerId) {
            showNotification(`Membuka detail customer: ${customerId}`, 'info');
        }

        function manageCustomerDatabase() {
            showNotification('Membuka manajemen database customer lengkap...', 'info');
        }

        function setupLoyaltyProgram() {
            showNotification('Membuka setup program loyalitas dengan tier system...', 'info');
        }

        function createCampaign() {
            showNotification('Membuka campaign builder dengan template...', 'info');
        }

        function viewCustomerAnalytics() {
            showNotification('Membuka customer analytics dashboard...', 'info');
        }

        // Supplier Management Functions
        function openAddSupplier() {
            showNotification('Membuka form tambah supplier baru...', 'info');
        }

        function createPurchaseOrder() {
            showNotification('Membuka form pembuatan Purchase Order...', 'info');
        }

        function viewSupplierPerformance() {
            showNotification('Generating supplier performance report...', 'success');
        }

        function exportSupplierData() {
            showNotification('Data supplier berhasil diekspor dengan rating...', 'success');
        }

        function viewSupplierDetail(supplierId) {
            showNotification(`Membuka detail supplier: ${supplierId}`, 'info');
        }

        function manageSupplierDatabase() {
            showNotification('Membuka manajemen database supplier lengkap...', 'info');
        }

        function managePurchaseOrders() {
            showNotification('Membuka manajemen Purchase Orders dengan workflow...', 'info');
        }

        function viewSupplierAnalytics() {
            showNotification('Membuka supplier analytics dashboard...', 'info');
        }

        function manageSupplierRelations() {
            showNotification('Membuka manajemen hubungan supplier dan kontrak...', 'info');
        }

        // New Product Management Functions
        function manageProductDatabase() {
            showNotification('Membuka database produk lengkap dengan barcode scanner...', 'info');
        }

        function manageCategoriesAndTags() {
            document.getElementById('categoryTagModal').classList.remove('hidden');
            populateCategoryList();
            populateTagList();
        }

        function managePricingStrategy() {
            document.getElementById('pricingDiscountModal').classList.remove('hidden');
            populatePricingRules();
            populateActiveDiscounts();
        }

        function viewProductAnalytics() {
            showNotification('Membuka analytics produk dengan trend analysis...', 'info');
        }

        function manageBulkOperations() {
            showNotification('Membuka bulk operations untuk import/export massal...', 'info');
        }

        function manageMultiStoreSync() {
            showNotification('Membuka sinkronisasi multi-store real-time...', 'info');
        }

        // New Inventory Management Functions
        function manageStockLevels() {
            showNotification('Membuka manajemen level stok dengan alert system...', 'info');
        }

        function viewStockMovement() {
            showNotification('Membuka tracking pergerakan stok real-time...', 'info');
        }

        function startStockOpname() {
            showNotification('Memulai stock opname digital dengan barcode scanner...', 'info');
        }

        function manageReorderPoints() {
            showNotification('Membuka manajemen reorder points otomatis...', 'info');
        }

        function viewInventoryAnalytics() {
            showNotification('Membuka inventory analytics dengan aging report...', 'info');
        }

        function manageWarehouses() {
            showNotification('Membuka manajemen multi-warehouse dengan location tracking...', 'info');
        }

        // New Customer Management Functions
        function manageCustomerSegments() {
            showNotification('Membuka customer segmentation berdasarkan behavior...', 'info');
        }

        function manageCustomerSupport() {
            showNotification('Membuka customer support center dengan ticket system...', 'info');
        }

        // New Supplier Management Functions
        function manageCostOptimization() {
            showNotification('Membuka cost optimization dan procurement analytics...', 'info');
        }

        function trackDeliveries() {
            showNotification('Membuka real-time delivery tracking system...', 'info');
        }

        // New User Management Functions
        function manageUserDatabase() {
            showNotification('Membuka user database dengan role management...', 'info');
        }

        function manageRolesPermissions() {
            showNotification('Membuka role-based permission management...', 'info');
        }

        function viewUserAnalytics() {
            showNotification('Membuka user analytics dan activity tracking...', 'info');
        }

        function manageSecuritySettings() {
            showNotification('Membuka security settings dengan 2FA dan audit...', 'info');
        }

        function viewAuditLogs() {
            showNotification('Membuka audit logs dan system tracking...', 'info');
        }

        function manageUserLifecycle() {
            showNotification('Membuka user lifecycle management system...', 'info');
        }

        // Category & Tag Management System
        let categories = [
            { id: 1, name: 'elektronik', displayName: 'Elektronik', icon: 'üì±', description: 'Produk elektronik dan gadget', parent: null, status: 'active', productCount: 5 },
            { id: 2, name: 'fashion', displayName: 'Fashion', icon: 'üëï', description: 'Pakaian dan aksesoris fashion', parent: null, status: 'active', productCount: 2 },
            { id: 3, name: 'makanan', displayName: 'Makanan & Minuman', icon: 'üçî', description: 'Produk makanan dan minuman', parent: null, status: 'active', productCount: 0 },
            { id: 4, name: 'kesehatan', displayName: 'Kesehatan & Kecantikan', icon: 'üíä', description: 'Produk kesehatan dan kecantikan', parent: null, status: 'active', productCount: 0 },
            { id: 5, name: 'rumah', displayName: 'Rumah & Taman', icon: 'üè†', description: 'Peralatan rumah tangga dan taman', parent: null, status: 'active', productCount: 0 },
            { id: 6, name: 'olahraga', displayName: 'Olahraga', icon: '‚öΩ', description: 'Peralatan dan perlengkapan olahraga', parent: null, status: 'active', productCount: 0 },
            { id: 7, name: 'buku', displayName: 'Buku & Media', icon: 'üìö', description: 'Buku, majalah, dan media', parent: null, status: 'active', productCount: 0 },
            { id: 8, name: 'mainan', displayName: 'Mainan & Hobi', icon: 'üß∏', description: 'Mainan anak dan hobi', parent: null, status: 'active', productCount: 0 }
        ];

        let tags = [
            { id: 1, name: 'premium', color: 'blue', description: 'Produk premium berkualitas tinggi', productCount: 3 },
            { id: 2, name: 'bestseller', color: 'green', description: 'Produk terlaris', productCount: 5 },
            { id: 3, name: 'new', color: 'yellow', description: 'Produk baru', productCount: 2 },
            { id: 4, name: 'sale', color: 'red', description: 'Produk sedang diskon', productCount: 1 },
            { id: 5, name: 'limited', color: 'purple', description: 'Stok terbatas', productCount: 2 },
            { id: 6, name: 'wireless', color: 'blue', description: 'Produk wireless/nirkabel', productCount: 3 },
            { id: 7, name: 'gaming', color: 'orange', description: 'Produk untuk gaming', productCount: 1 },
            { id: 8, name: 'eco-friendly', color: 'green', description: 'Produk ramah lingkungan', productCount: 0 }
        ];

        let pricingRules = [
            { id: 1, name: 'Volume Discount', condition: 'quantity >= 10', action: 'discount_percentage', value: 5, status: 'active', category: 'all' },
            { id: 2, name: 'Member VIP', condition: 'customer_type = vip', action: 'discount_percentage', value: 15, status: 'active', category: 'all' },
            { id: 3, name: 'Flash Sale Weekend', condition: 'day in [saturday, sunday] AND time between 10:00-16:00', action: 'discount_percentage', value: 20, status: 'scheduled', category: 'elektronik' },
            { id: 4, name: 'Bulk Purchase', condition: 'total_amount >= 1000000', action: 'discount_fixed', value: 50000, status: 'active', category: 'all' },
            { id: 5, name: 'New Customer', condition: 'customer_visits = 1', action: 'discount_percentage', value: 10, status: 'active', category: 'all' }
        ];

        let activeDiscounts = [
            { id: 1, code: 'WELCOME10', type: 'percentage', value: 10, description: 'Welcome Discount 10%', category: 'all', minAmount: 0, maxUses: 100, currentUses: 45, expiry: '2024-12-31', status: 'active' },
            { id: 2, code: 'FLASH50', type: 'fixed', value: 50000, description: 'Flash Sale 50K Off', category: 'all', minAmount: 500000, maxUses: null, currentUses: 23, expiry: '2024-01-25', status: 'active' },
            { id: 3, code: 'LOYALTY25', type: 'percentage', value: 25, description: 'Loyalty Member 25%', category: 'elektronik', minAmount: 0, maxUses: 100, currentUses: 12, expiry: '2024-02-15', status: 'active' },
            { id: 4, code: 'STUDENT15', type: 'percentage', value: 15, description: 'Student Discount 15%', category: 'buku', minAmount: 0, maxUses: 200, currentUses: 67, expiry: '2024-06-30', status: 'active' },
            { id: 5, code: 'WEEKEND20', type: 'percentage', value: 20, description: 'Weekend Special 20%', category: 'fashion', minAmount: 200000, maxUses: 50, currentUses: 34, expiry: '2024-03-31', status: 'active' }
        ];

        function populateCategoryList() {
            const container = document.getElementById('categoryList');
            if (!container) return;
            
            container.innerHTML = '';
            
            categories.forEach(category => {
                const categoryItem = document.createElement('div');
                categoryItem.className = 'p-4 bg-white/10 rounded-xl hover:bg-white/20 transition-colors';
                categoryItem.innerHTML = `
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center space-x-3">
                            <span class="text-2xl">${category.icon}</span>
                            <div>
                                <div class="font-semibold text-white">${category.displayName}</div>
                                <div class="text-xs text-gray-300">${category.productCount} produk</div>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="px-2 py-1 ${category.status === 'active' ? 'bg-green-500' : 'bg-red-500'} text-white rounded-full text-xs">
                                ${category.status === 'active' ? '‚úÖ Aktif' : '‚ùå Nonaktif'}
                            </span>
                            <button onclick="editCategory(${category.id})" class="p-1 text-blue-400 hover:bg-blue-100/20 rounded">‚úèÔ∏è</button>
                            <button onclick="deleteCategory(${category.id})" class="p-1 text-red-400 hover:bg-red-100/20 rounded">üóëÔ∏è</button>
                        </div>
                    </div>
                    <div class="text-xs text-gray-300">${category.description}</div>
                `;
                container.appendChild(categoryItem);
            });
        }

        function populateTagList() {
            const container = document.getElementById('tagList');
            if (!container) return;
            
            container.innerHTML = '';
            
            const colorClasses = {
                blue: 'bg-blue-500',
                green: 'bg-green-500',
                red: 'bg-red-500',
                yellow: 'bg-yellow-500',
                purple: 'bg-purple-500',
                orange: 'bg-orange-500'
            };
            
            tags.forEach(tag => {
                const tagItem = document.createElement('div');
                tagItem.className = 'flex items-center justify-between p-3 bg-white/10 rounded-xl hover:bg-white/20 transition-colors';
                tagItem.innerHTML = `
                    <div class="flex items-center space-x-3">
                        <span class="px-3 py-1 ${colorClasses[tag.color]} text-white rounded-full text-xs font-semibold">${tag.name}</span>
                        <div>
                            <div class="text-xs text-gray-300">${tag.description}</div>
                            <div class="text-xs text-gray-400">${tag.productCount} produk</div>
                        </div>
                    </div>
                    <div class="flex space-x-1">
                        <button onclick="editTag(${tag.id})" class="p-1 text-blue-400 hover:bg-blue-100/20 rounded">‚úèÔ∏è</button>
                        <button onclick="deleteTag(${tag.id})" class="p-1 text-red-400 hover:bg-red-100/20 rounded">üóëÔ∏è</button>
                    </div>
                `;
                container.appendChild(tagItem);
            });
        }

        function populatePricingRules() {
            const container = document.getElementById('pricingRulesList');
            if (!container) return;
            
            // Rules are already populated in HTML, this function can be used for dynamic updates
        }

        function populateActiveDiscounts() {
            const container = document.getElementById('activeDiscountsList');
            if (!container) return;
            
            // Discounts are already populated in HTML, this function can be used for dynamic updates
        }

        // Category Management Functions
        function openAddCategoryForm() {
            document.getElementById('addCategoryForm').classList.remove('hidden');
        }

        function closeAddCategoryForm() {
            document.getElementById('addCategoryForm').classList.add('hidden');
            document.getElementById('addCategoryForm').querySelector('form').reset();
        }

        function addNewCategory(e) {
            e.preventDefault();
            
            const formData = {
                name: document.getElementById('newCategoryName').value.toLowerCase().replace(/\s+/g, '-'),
                displayName: document.getElementById('newCategoryName').value,
                icon: document.getElementById('newCategoryIcon').value || 'üì¶',
                description: document.getElementById('newCategoryDescription').value,
                parent: document.getElementById('newCategoryParent').value || null,
                status: document.getElementById('newCategoryStatus').value
            };
            
            if (!formData.displayName) {
                showNotification('Nama kategori wajib diisi', 'error');
                return;
            }
            
            if (categories.find(cat => cat.name === formData.name)) {
                showNotification('Kategori dengan nama tersebut sudah ada', 'error');
                return;
            }
            
            const newCategory = {
                id: Math.max(...categories.map(c => c.id)) + 1,
                name: formData.name,
                displayName: formData.displayName,
                icon: formData.icon,
                description: formData.description,
                parent: formData.parent,
                status: formData.status,
                productCount: 0
            };
            
            categories.push(newCategory);
            populateCategoryList();
            closeAddCategoryForm();
            
            showNotification(`Kategori "${formData.displayName}" berhasil ditambahkan!`, 'success');
        }

        function editCategory(categoryId) {
            const category = categories.find(c => c.id === categoryId);
            if (!category) return;
            
            showNotification(`Edit kategori: ${category.displayName}`, 'info');
        }

        function deleteCategory(categoryId) {
            const category = categories.find(c => c.id === categoryId);
            if (!category) return;
            
            if (category.productCount > 0) {
                showNotification(`Tidak dapat menghapus kategori "${category.displayName}" karena masih memiliki ${category.productCount} produk`, 'error');
                return;
            }
            
            if (confirm(`Apakah Anda yakin ingin menghapus kategori "${category.displayName}"?`)) {
                categories = categories.filter(c => c.id !== categoryId);
                populateCategoryList();
                showNotification(`Kategori "${category.displayName}" berhasil dihapus`, 'success');
            }
        }

        // Tag Management Functions
        function openAddTagForm() {
            document.getElementById('addTagForm').classList.remove('hidden');
        }

        function closeAddTagForm() {
            document.getElementById('addTagForm').classList.add('hidden');
            document.getElementById('addTagForm').querySelector('form').reset();
        }

        function addNewTag(e) {
            e.preventDefault();
            
            const formData = {
                name: document.getElementById('newTagName').value.toLowerCase(),
                color: document.getElementById('newTagColor').value,
                description: document.getElementById('newTagDescription').value
            };
            
            if (!formData.name) {
                showNotification('Nama tag wajib diisi', 'error');
                return;
            }
            
            if (tags.find(tag => tag.name === formData.name)) {
                showNotification('Tag dengan nama tersebut sudah ada', 'error');
                return;
            }
            
            const newTag = {
                id: Math.max(...tags.map(t => t.id)) + 1,
                name: formData.name,
                color: formData.color,
                description: formData.description,
                productCount: 0
            };
            
            tags.push(newTag);
            populateTagList();
            closeAddTagForm();
            
            showNotification(`Tag "${formData.name}" berhasil ditambahkan!`, 'success');
        }

        function editTag(tagId) {
            const tag = tags.find(t => t.id === tagId);
            if (!tag) return;
            
            showNotification(`Edit tag: ${tag.name}`, 'info');
        }

        function deleteTag(tagId) {
            const tag = tags.find(t => t.id === tagId);
            if (!tag) return;
            
            if (confirm(`Apakah Anda yakin ingin menghapus tag "${tag.name}"?`)) {
                tags = tags.filter(t => t.id !== tagId);
                populateTagList();
                showNotification(`Tag "${tag.name}" berhasil dihapus`, 'success');
            }
        }

        function closeCategoryTagModal() {
            document.getElementById('categoryTagModal').classList.add('hidden');
            closeAddCategoryForm();
            closeAddTagForm();
        }

        function exportCategoryData() {
            const data = {
                categories: categories,
                tags: tags,
                exportDate: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `category_tag_data_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            URL.revokeObjectURL(url);
            
            showNotification('Data kategori dan tag berhasil diekspor!', 'success');
        }

        // Pricing & Discount Management Functions
        function addPricingRule() {
            showNotification('Membuka form tambah aturan pricing...', 'info');
        }

        function createNewDiscount() {
            showNotification('Membuka form buat diskon baru...', 'info');
        }

        function applyBulkPriceUpdate() {
            const category = document.getElementById('bulkPriceCategory').value;
            const action = document.getElementById('bulkPriceAction').value;
            const value = parseFloat(document.getElementById('bulkPriceValue').value);
            
            if (!value || value <= 0) {
                showNotification('Masukkan nilai yang valid', 'error');
                return;
            }
            
            let affectedProducts = products;
            if (category) {
                affectedProducts = products.filter(p => p.category === category);
            }
            
            let updatedCount = 0;
            
            affectedProducts.forEach(product => {
                const originalPrice = product.price;
                
                switch (action) {
                    case 'increase':
                        product.price = Math.round(originalPrice * (1 + value / 100));
                        break;
                    case 'decrease':
                        product.price = Math.round(originalPrice * (1 - value / 100));
                        break;
                    case 'margin':
                        if (product.costPrice) {
                            product.price = Math.round(product.costPrice * (1 + value / 100));
                        }
                        break;
                }
                
                product.updatedAt = new Date().toISOString();
                updatedCount++;
            });
            
            // Update displays
            populateProductGrid();
            populateProductTable();
            
            const categoryText = category ? ` kategori ${category}` : '';
            const actionText = action === 'increase' ? 'dinaikkan' : action === 'decrease' ? 'diturunkan' : 'diatur margin';
            
            showNotification(`${updatedCount} produk${categoryText} berhasil ${actionText} ${value}%!`, 'success');
            
            // Clear form
            document.getElementById('bulkPriceCategory').value = '';
            document.getElementById('bulkPriceAction').value = 'increase';
            document.getElementById('bulkPriceValue').value = '';
        }

        function closePricingDiscountModal() {
            document.getElementById('pricingDiscountModal').classList.add('hidden');
        }

        function exportPricingData() {
            const data = {
                pricingRules: pricingRules,
                activeDiscounts: activeDiscounts,
                products: products.map(p => ({
                    id: p.id,
                    name: p.name,
                    price: p.price,
                    costPrice: p.costPrice,
                    margin: p.costPrice ? ((p.price - p.costPrice) / p.price * 100).toFixed(2) : null
                })),
                exportDate: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `pricing_discount_data_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            URL.revokeObjectURL(url);
            
            showNotification('Data pricing dan diskon berhasil diekspor!', 'success');
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96b5889f00a0ea7d',t:'MTc1NDU1NjcwMi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
